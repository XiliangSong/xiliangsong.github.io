<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>松喜凉的博客</title>
  
  <subtitle>松喜凉的博客小站</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://xiliangsong.github.io/"/>
  <updated>2019-08-07T03:25:24.949Z</updated>
  <id>https://xiliangsong.github.io/</id>
  
  <author>
    <name>松喜凉</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>My second Post</title>
    <link href="https://xiliangsong.github.io/2019/08/07/My-second-Post/"/>
    <id>https://xiliangsong.github.io/2019/08/07/My-second-Post/</id>
    <published>2019-08-07T02:43:00.000Z</published>
    <updated>2019-08-07T03:25:24.949Z</updated>
    
    <content type="html"><![CDATA[<p>　　欢迎关注我的博客，这是我的第二个静态博客<br>　　也可以关注我的<a href="xiliang.ml:8080" target="_blank" rel="noopener">动态博客</a></p><a id="more"></a><p>　　<br>　　我们要爱生活，爱家人，爱世界~</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;　　欢迎关注我的博客，这是我的第二个静态博客&lt;br&gt;　　也可以关注我的&lt;a href=&quot;xiliang.ml:8080&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;动态博客&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="个人记录" scheme="https://xiliangsong.github.io/tags/%E4%B8%AA%E4%BA%BA%E8%AE%B0%E5%BD%95/"/>
    
      <category term="欢迎" scheme="https://xiliangsong.github.io/tags/%E6%AC%A2%E8%BF%8E/"/>
    
  </entry>
  
  <entry>
    <title>冯学荣翻译：李鸿章伊藤博文日本马关谈判对话实录 【转】</title>
    <link href="https://xiliangsong.github.io/2019/08/05//articles/2019/08/05/1564967769355.html/"/>
    <id>https://xiliangsong.github.io/2019/08/05//articles/2019/08/05/1564967769355.html/</id>
    <published>2019-08-05T01:16:09.000Z</published>
    <updated>2019-08-05T01:16:09.000Z</updated>
    
    <content type="html"><![CDATA[<p>甲午战争后期，李鸿章代表大清帝国到了日本马关，和伊藤博文进行谈判，二人的谈话，中日双方的速记员均有记录，中方史料名为《马关议和中日谈话录》， 事实上中日双方的记录我都读过，我惊叹双方速记员的精准，彼此都无愧于 “人肉录音机”的称号，中日各自记录的两份谈话录内容基本相符，双方印证之下，可见《马关议和中日谈话录》属于可信史料。</p><p>今天请读者跟随我一起，穿越时空，回到马关的谈判桌上，一起来听听当时李鸿章和伊藤博文，都谈了些什么，原文系文言文，我已将全文翻译成现代中文。</p><p>1</p><p>第一轮谈判（公历1895年3月20日）</p><p>伊藤博文：中堂您这次来日本，一路上还顺利吗?</p><p>李鸿章：还顺利，就是在成山停留了一天，承蒙您两位（指伊藤博文和陆奥宗光）在岸上准备场所，感谢你们。</p><p>伊藤博文：这里位置比较偏僻，我们找不到与头等钦差（指李鸿章）您的身份相匹配的场所，实在是抱歉！</p><p>李鸿章：不敢不敢。</p><p>伊藤博文：今天我们首先要互相核查委任状。</p><p>（双方核对彼此之委任状）</p><p>陆奥宗光：我们天皇的委任状，您看了觉得怎样？</p><p>李鸿章：看了，没问题。我们（光绪）皇帝的委任状，您看可以吗？</p><p>伊藤博文：这次的委任状没有问题。</p><p>（李鸿章命随员罗丰禄宣读英文的《请停战书》，读毕交给伊藤博文）</p><p>伊藤博文：停战这件事，我明天答复你们。</p><p>伊藤博文：双方的委任状，我们彼此留档，可以吗？</p><p>李鸿章：没问题。</p><p>伊藤博文：贵国的委任状，行文挺好，就是缺了光绪皇帝的签名。</p><p>李鸿章：我国风俗与外国不同，我们用个人盖章，效力与签名一样。</p><p>伊藤博文：这次我就不较真了，但是贵国既然诚意与外国交好，为何不按照国际惯例办事（指签名）？</p><p>李鸿章：我国皇帝从来不亲笔签名的，我也不好强求皇帝签名。</p><p>伊藤博文：上次贵国派张荫桓、邵友濂二位来日本谈和，（二人官阶太低），似乎没有诚意，这次中堂大人您来了，我们才相信贵国的诚意。</p><p>李鸿章：我国如果没有诚意，就不会派我来，我如果没有诚意，也不会来到这里。</p><p>伊藤博文：这次我们谈的是两国大事，影响深远，中堂大人见多识广，希望我们彼此能谈和成功、将来两国都受益匪浅。</p><p>李鸿章：在亚洲各国，中日两国最为相邻，又是同文，为何要结仇？今天的纠纷只是暂时的，长远来讲，还是以和好为上策，如果世代为仇，不但对中国没有好处，对日本也没有好处，您看欧洲各国，虽然军事力量强大，但是彼此不轻易打仗，我们都是亚洲国家，应该学习欧洲，希望我们以亚洲大局为重，永远和好，这样我们黄种人才不会被白种人欺负啊。</p><p>伊藤博文：中堂大人的话说到我心坎里了，事实上这个话，十年前我在天津就已经对中堂大人说过，谁知道（两国关系）至今还是老样子，实在令人遗憾。</p><p>李鸿章：那时候听到您说这个，很佩服，也佩服您推动日本改革，使日本成为今天这样，但我中国的事情，受旧俗牵绊，未能如愿以偿，当时您劝我说中国地大人多，改革应以渐进为宜，转眼间十年了，我国还是老样子，我很抱歉，心有余而力不足啊，贵国日本的军队，以西式练兵，兵精马壮，内政各项也日新月盛，这次我去北京和很多同僚聊天，也说到我国必须要变法才能自立啊。</p><p>伊藤博文：天助有德之人，如果贵国锐意奋发，老天一定会帮你们的，老天对待世人都是平等的，关键在于各国要自强。</p><p>李鸿章：您把日本治理得这么好，真的令人羡慕。</p><p>伊藤博文：中堂什么时候上岸住吧？那样更方便议事。</p><p>李鸿章：那就有劳阁下准备住所，我明天上午上岸。</p><p>伊藤博文：我们明天下午两点钟再谈吧。</p><p>李鸿章：两点半吧。我与您是老朋友了，你们二位（指伊藤博文和陆奥宗光）有话可以直说，不必客气，以办大事为重。</p><p>李鸿章：贵大臣（指伊藤博文）办事卓有成效，才华高超，心思缜密。</p><p>伊藤博文：（日本兴旺）是我们天皇的功劳，我没有什么功劳。</p><p>李鸿章：贵国天皇固然英明，但您的功劳也不小。</p><p>李鸿章：你们二位（指伊藤博文和陆奥宗光）的家是在一个地方吗?</p><p>伊藤博文：没有。不在一起。</p><p>李鸿章：你们都是什么时候来这里的?</p><p>伊藤博文：陆外署（陆奥宗光）三天前就来了，我是昨天才到的，平时我在广岛和东京之间跑，坐火车要三十几个小时，办理军事、财政、外交等，也是忙死了。</p><p>李鸿章：贵国天皇现在在广岛游玩多久了？</p><p>伊藤博文：已经七个月了。</p><p>李鸿章：你们天皇勤政啊，令人敬仰。</p><p>伊藤博文：对啊，天皇什么都管，军事国事，每天的谕旨都是自己写。</p><p>李鸿章：这里和世界各地通电报吗？</p><p>伊藤博文：电报都通。</p><p>李鸿章：哦，那就好，我有电报要发回中国。</p><p>伊藤博文：上次贵国张荫桓大人来，我没有允许电报局给他发电报，这次您来不同，我会叫当地电报局给您照发。</p><p>李鸿章：当时还没开始谈嘛。</p><p>（李问年龄，伊藤博文答 55 岁，陆奥宗光答 52 岁）</p><p>（冯学荣评：这里有一个魔鬼细节：伊藤博文此时已经安排技术高手，破译李鸿章与北京的一切往来电报，所以稍后日方已经全部掌握中方的谈判底牌）</p><p>图：李鸿章</p><p>李鸿章：我今年 73 岁了，真没想到在这里和贵大臣重逢，您年富力强，精力充沛，逍遥自在啊。</p><p>伊藤博文：日本人不像中国人那么容易治理。而且日本有国会，办事很棘手。</p><p>李鸿章：贵国的国会，相当于我国的都察院。</p><p>伊藤博文：十年前我就劝您撤掉都察院，您当时对我说都察院制度从汉朝就有了，年代久远，要撤很难，但都察院都是些庸人，使国事难行，我觉得你们中国要学习西方，要大胆起用年富力强的人才，所有旧制度都要撤掉，贵国才有希望。</p><p>李鸿章：现在中国上下，不是没有明白时务的人，而是有关部门各自为政，互相制衡，没有一个强有力的能人说了算。</p><p>伊藤博文：外面各省各部虽然不听话，但是总理衙门应该是由一人说了算嘛。</p><p>李鸿章：总理衙门官员虽然多，但老大是可以说了算。</p><p>伊藤博文：现在总理衙门的老大是谁？</p><p>李鸿章：恭亲王。（日本）大鸟和夏本两位大臣，现在在哪个职位？</p><p>伊藤博文：夏本在农商部做事，大鸟现在在枢密院做顾问，你们袁世凯现在在干什么？</p><p>李鸿章：他？回河南老家去了。</p><p>伊藤博文：他还在营务处吗？</p><p>李鸿章：他官小，无足轻重。</p><p>李鸿章：我们的委任状既然都交换了，我们就尽快开议（和平）条款吧。</p><p>伊藤博文：没问题。</p><p>2</p><p>第二轮谈判（公历1895年3月21日）</p><p>李鸿章：你们给我准备的住所很好，我住得很舒服，十分感谢。</p><p>陆奥宗光：我们本来还为您准备了厨师，是您推辞了，我只好遵命。</p><p>伊藤博文：昨天你们提到停战一事，我们的回复已经准备好了。</p><p>（日本书记官用英语朗读停战条款）</p><p>图：陆奥宗光</p><p>陆奥宗光：英语的叙述，比较清晰。</p><p>李鸿章：现在日本军队并未到大沽口、天津和山海关，为什么在停战条款里面声明日军需要占据这些地方？</p><p>伊藤博文：是贵国要停战，所以我军应暂时占据这些地方，作为担保。</p><p>李鸿章：这三个地方中国部队较多，你们日军来占，那我们去哪？</p><p>伊藤博文：随便你们去哪，中日两军要事先划定中间地带。</p><p>李鸿章：两国军队相距太近，容易惹事生非，而且天津我国官员也很多，他们又退往何处呢？</p><p>伊藤博文：这是细则了，不必现在谈，您首先告诉我。对于停战条款，您同意还是不同意？</p><p>李鸿章：细则也是要事先问清楚的，因为有些细节很重要，不得不事先说明白。</p><p>伊藤博文：您先仔细看看条款，然后再说吧。</p><p>李鸿章：天津是通商口岸，难道你们日本要管辖它？</p><p>伊藤博文：可以暂时交给日本管理。</p><p>李鸿章：日本兵到了天津，兵营将设在哪里？</p><p>伊藤博文：你们中方部队退出兵营，我们的兵就住进去，如果不行，那么我们另行建造兵营。</p><p>李鸿章：那…..你们是想待着不走了？</p><p>伊藤博文：这个要看停战多久了。</p><p>李鸿章：停战多久，是谁说了算？</p><p>伊藤博文：停战期间的长短是你我双方谈，但不能拖得太久。</p><p>李鸿章：既然待不久，我们何必要将这三处地方让出？且这些地方都是兵家必争之地，倘若议和失败，那你们岂不是反客为主了？</p><p>伊藤博文：停战期满，谈和成功了，我们的兵自然会退出。</p><p>李鸿章：中日两国是兄弟之邦，您开的停战条款，未免逼人太甚了，可不可以另找其他办法？</p><p>伊藤博文：暂时没想到其他办法，现在两国交战，是你们要停战，那么我们当然要占据有利地点，我们才不会吃亏，按照国际惯例，停战有两种：一种是全面停战；一种是指定几个地方停战。中堂您说的是全面停战啊。</p><p>李鸿章：可不可以先议定某几个地方停战？</p><p>伊藤博文：那您老希望哪几个地方暂时停战呢？</p><p>李鸿章：承蒙贵国邀请，我来贵国谈和是诚心诚意的，我的国家也是诚意满满的，刚开始谈停战，您就开口要求占据我国三处险要地点（天津、山海关、大沽口），我身为直隶总督，这三个地方都是我的辖区，您叫我的老脸往哪搁呢？试问伊藤大人，将心比心，如果换了您是我，您会怎样想？</p><p>伊藤博文：中堂您来日本谈和，此时两国并未停战，您为了贵国，希望停战，我为了日本，要停战的话，只能这么办。</p><p>李鸿章：希望您给个替代方案，以显示贵国真有和平诚意。</p><p>伊藤博文：我实在没有其他办法，两国相争，各为其主，国家大事与个人交情是两码事，停战是在打仗期间谈的，我是依照国际惯例提的方案。</p><p>李鸿章：我们两国既然要谈和，那么就应该停战，如果一边谈一边打，那么谈和的诚意在哪里呢？</p><p>伊藤博文：如果要停战的话，那么我们的条件不会变，如果您不认同，那么我们可以将停战一事搁置不谈，先谈别的。</p><p>李鸿章：如果说我们暂时不谈停战，先谈和平条款，您可以出示条款给我看看吗？</p><p>伊藤博文：中堂的意思是不同意停战条款？直接谈和平条款？</p><p>李鸿章：昨天会议上我已经说了，我们谈和坦率，从来不说假话，您所提出来的停战条件（日军占据天津、山海关、大沽口），我们实在很难答应。</p><p>伊藤博文：是中堂您先提出停战要求，我们才摆出那些条件，如果您不提停战，那么我们当然可以先谈和平条款。</p><p>李鸿章：我们两人忠心为国，但也需要顾及大局，我们国家根本没有准备和外国打仗，我们招的新兵，都还没有来得及训练，今天既然到了这个地步，我们中日两国是邻邦，怎么能长期相争？从长远看还是要和好，但是要和好，则需要给我们国家留个体面，否则我国上上下下一旦伤了心，则和平也很难持久，我说这个天津山海关，是北京的门户，请贵国的兵，不要攻击这些地方，否则北京震动，我国会很难堪，我也会很难为情，而且这次两国交战，其实是为了朝鲜，今天我军已经退到奉天（沈阳）了，贵国的兵也差不多杀到直隶了，如果贵国的部队不攻击天津山海关的话，则我们可以暂时不论停战，直接谈和平条款。</p><p>伊藤博文：今天的局势发展到这个地步，也不是我的责任，战争一打起来，打到什么地步为止，谁能预料？其实从一开打，我就有心谈和，只是贵国一直没有谈和的诚意，从现在开始，战争的局面又将有大变化，所以只要贵国想停战，那么我们必须占据天津、大沽口、山海关为担保。</p><p>李鸿章：这样好吗？我签字同意这三个地方质押给贵国，但是贵国不必真的派兵占领，可不可以？</p><p>伊藤博文：那如果我们在停战期间谈和不成，这三个地方还不是要打？</p><p>（中方）参议：这样吧，我们不停战，但是在谈和的过程中，我们定一个期限，在这个期限内，日军不攻击这三个地方，可以吗？</p><p>伊藤博文：这样还不是一样交战？只要谈和未成一天，两国军队就互相攻击，很难指定不打哪里。</p><p>李鸿章：您把和平条款先亮给我们看看？</p><p>伊藤博文：那么停战一事，你们是谈？还是不谈了？</p><p>李鸿章：暂时搁置吧。</p><p>伊藤博文：你现在说不谈停战，但是等我们谈和平条款时，你们始终还是要提起（停战）的。</p><p>李鸿章：您不是说过吗？停战有两种，一种是全线停战，第二种是局部停战，我们要求贵军不攻击天津、山海关、大沽口，就是局部停战嘛。</p><p>伊藤博文：您其实是希望全线停战，但是我们日本兵分布很散，很难全线停战，而且您说的这些地方（天津、山海关、大沽口）停战，我仔细想了下，其实很难保证，而且局部停战只适用于战场上的停战会议，我们位处马关，离战场这么远，就没有必要谈局部停战了。</p><p>李鸿章：请贵大臣您出示和平条件。</p><p>伊藤博文：我说过了，请您首先确认，是不是不谈停战了？</p><p>李鸿章：贵方开出的停战条件，太过苛刻，我们做不到，但是贵国既然请我来了，就一定预备有议和条款，对不对？</p><p>伊藤博文：对的，我们的和平条件，已经拟好了。</p><p>李鸿章：那么就请拿出来给我们看看吧。</p><p>伊藤博文：那么停战一事，就真的不谈了？</p><p>（冯学荣点评：伊藤博文其实很希望李鸿章答应日方的停战条件，因为这样日军就可以掐住清廷的咽喉，则日方的谈判筹码就更多）</p><p>图：伊藤博文</p><p>李鸿章：停战条件，我方很难办到，而且您又没有替代方案，既然这样，我们就先谈谈和平条款吧。</p><p>伊藤博文：那么您提出的停战请求，您是撤回请求呢？还是声明不能接受停战条件？</p><p>李鸿章：如果我声明不能接受停战条件，贵方会怎样做？</p><p>伊藤博文：如果那样的话，谈和就要另找时间、重新安排了。</p><p>李鸿章：您的意思是还没有拿定主意？可是您刚才不是说和平条件已经拟好了吗？</p><p>伊藤博文：那就看您怎样回复我的停战条件了。</p><p>李鸿章：我打算回复说，停战条件我方很难接受，暂时搁置，请立即开始谈和平条件，这样行吗？</p><p>伊藤博文：中堂刚开始看到停战条件的时候，说仔细想想然后再回复，可是转眼间又说万万不能接受，我们还是请中堂您先仔细考虑一下，然后再回复我们吧。</p><p>李鸿章：那么就给我几天时间，让我好好想想吧。</p><p>伊藤博文：要多少天？</p><p>李鸿章：一个礼拜。</p><p>伊藤博文：太久了。</p><p>李鸿章：假如我回复说停战条件无法接受，那么您到底还和我议和不议和？</p><p>伊藤博文：还是请中堂您先将我方的停战条件仔细斟酌一下，要么您整个将停战要求撤回，我当作没有听到，然后我们就可以直接谈和平条件，我只是不希望您在谈和期间不断请求停战、停战、停战。</p><p>李鸿章：其实只要和平条件谈妥了，不用谈停战，自然也停战了。</p><p>伊藤博文：贵大臣您到底需要多少天答复我？</p><p>李鸿章：四天之后答复。</p><p>伊藤博文：最晚三天吧，而且是越快越好。</p><p>李鸿章：我希望贵国开出的和平条款，不要像停战条件这么过分。</p><p>伊藤博文：我认为不过分。</p><p>伊藤博文：太过分了，也谈不拢。 </p><p>伊藤博文：:我们两国派大臣会谈，意义正在于此。下一轮谈判，我们什么时候举行，我们可以提前约定。</p><p>李鸿章：让我好好想想。我的回复公文写好之后，是我亲自交给您呢？还是我派人送到您府上？</p><p>伊藤博文：随便，无所谓。</p><p>李鸿章：我回复公文写好之后，派人找您，再约下一轮谈话时间。</p><p>（伊藤博文问陆奥宗光，陆奥说对，这样办可以）</p><p>李鸿章：我只希望贵大臣以大局为重，您所提出的和平条款，千万不要超出我的权限。</p><p>伊藤博文：我也很愿意顾全大局，有益于中日两国，只是不知道贵国会怎样回应。</p><p>3</p><p>第三轮谈判（公历1895年3月24日）</p><p>李鸿章：上回谈的停战条件，我们已作答复。</p><p>（于是中方用中文朗读回复公文，并由李鸿章将答复文稿中英文，亲自交给伊藤博文，伊藤与其诸位部下对中英文的文本研究了好久）</p><p>伊藤博文：中堂对停战一事，搁置不提，对吗？</p><p>李鸿章：暂时搁置吧，我这次来主要是为了议和的。</p><p>（伊藤博文于是又仔细读李鸿章的复函，并与幕僚商榷，又拿起烟来抽，反复思考）</p><p>伊藤博文：其实在中堂您未动身之前，我和贵国一样，都清楚战争的形势，我也是诚心讲和，重修旧好的。</p><p>李鸿章：我已经老了，从来没有出过国，这次我国朝野鉴于形势，知道我和贵大臣您是老相识，所以特意派我来此，这也证明我国确实是诚心讲和，我无法推辞。</p><p>伊藤博文：这次谈和，所有条款一旦谈妥，必须遵照实行，我看历史上贵国与外国签订条约，曾经有不守信用的时候，这次战争事关重大，所以国家派我来与您谈，一旦我方允诺了条款，我方一定履行，希望贵国也要信守承诺。</p><p>李鸿章：您所说的是道光年间我国和外国刚刚发生交往的时候吧，其实自从咸丰、同治之后，我国和外国所签的条约，没有不守信用的，就说十几年前我国和俄国签的伊犁和约，尽管签的不太痛快，但是我们随后也谈妥了、也解决了问题。</p><p>伊藤博文：例如贵国和英国额尔金签署的条约（冯学荣注：此处指第二次鸦片战争），你们就没有守信用，这次你我都是国家的一等大臣，如果签署条约不履行，则有伤国家形象，而且必然还会再起战端，所以这次我们谈和，不单单是为了结束这次战争，而更是为了恢复往日的邦交，我是日本的总理，一旦签署了条约，一定守信用，也请中堂您也能恪守条约信用。</p><p>李鸿章：我是中国的钦差大臣，这次我进北京，皇上召见我很多次，就是因为此事重大，他对我有明白的指示，我前面也和贵大臣您说过了，您所提的条款，必须是在我的权限以内，如果可行，我立即答应，如果行不通的，我会告诉你有待商榷，现在就请您将和平条款出示给我看看吧。</p><p>伊藤博文：明天交给你看。</p><p>李鸿章：明天什么时候？</p><p>伊藤博文：时间你来定。 </p><p>李鸿章：（早上）十点钟，可以吗？</p><p>（伊藤博文扭头问陆奥宗光，陆奥说可以，于是伊藤也说可以）</p><p>李鸿章：您所开出的和平条件，如果涉及到外国利益的，还请您谨慎一些。</p><p>伊藤博文：什么意思？</p><p>李鸿章：就是说，明天您给我看的和平条款，最好不要牵涉到外国的既得利益，否则我们会很难办，正是因为我们两国有交情，所以这一点，我不得不预先提醒您一下。</p><p>伊藤博文：哦，这次谈和是中日两国的事情，与别的国家无关。</p><p>李鸿章：去年我曾经请英国人帮忙调停，当时贵国不接受，当然我们也不需要请外国人介入，今天我们两个人亲自谈，如果连我们两个都谈不拢，那么恐怕两国之间，也就真的没法谈了。</p><p>伊藤博文：万一谈不拢的话，贵国（光绪）皇帝也可以亲自裁定嘛，欧洲各国谈和，都是由皇帝亲自裁定的。</p><p>李鸿章：中国不行，不要说皇上，就算是恭亲王，他管理总理衙门这么多年， 我也没有见过他亲自议和，我们两国打仗，其实迟早也是要和的，晚和不如早和，去年刚开始打的时候，我就苦苦劝你们谈和，所以今天谈，其实已经有点晚了。</p><p>伊藤博文：战争不是好事，但是有时候也无法避免。</p><p>李鸿章：能不打，岂不是更好吗？美国总统格兰特来天津时，和我交上朋友，他就说过：美国南北战争，死人无数，后来他当上总统，就轻易不发动战争，我也是这样劝我的同仁，当年中堂（曾国藩）打长毛（太平天国），战功赫赫，我也劝他不可轻易打仗，我也是反战的，这次（甲午）战争你也应该知道，根本就不是我的本意。</p><p>伊藤博文：打仗是要死人的，但是有时候国家之间，受形势所迫，不得已也只能打。</p><p>李鸿章：打仗不是好人该干的事，况且今天武器技术进步，杀人更多，我老了，更是不忍心，贵大臣您还年轻，尚有雄心。</p><p>伊藤博文：其实这次在开打之初，那时候要谈和是挺简单的。</p><p>李鸿章：当时我也想谈和，可是有时候形势不允许，也很无奈。</p><p>伊藤博文：在开打之前我国开出（关于朝鲜）的条款其实现在看来都不是个事， 当时你们不答应，甚为可惜，开打之前，我们两国就像两个人，彼此只有几里路的距离，可是现在已经是几百英里了，回头已经太难。</p><p>李鸿章：终究也是要回头的，有贵大臣您来处理此事，有什么难的?</p><p>伊藤博文：相距几百英里，回头又要走几百英里了。</p><p>李鸿章：少走几英里，不也可以嘛，就算再走几千里，你们能将我们中国人民杀尽吗?</p><p>伊藤博文：我们日本万万没有（杀尽中国人）这种想法，所谓打仗，其实是两个国家拿出所有的兵器，互相轰击，互相削弱而已，它跟两国人民，并没有什么关系。</p><p>李鸿章：既然现在两国都愿意和平，自然可以不打了。</p><p>伊藤博文：我军现在驻守金州，差遣当地中国人帮我们做（搬运后勤等）事，他们比朝鲜人听话多了，而且干活也勤快，中国的百姓确实很好治理。</p><p>李鸿章：朝鲜人向来懒惰。</p><p>伊藤博文：我们招聘朝鲜人做挑夫，他们都不肯干，我军现在攻打台湾了，不知道台湾人的品性怎样？</p><p>李鸿章：台湾主要是潮州、漳州、泉州的移民，最为强悍。</p><p>伊藤博文：台湾还有生番。</p><p>李鸿章：生番大概占 60%，其余都是移民，您提及台湾，是想永久占据台湾吧， 难怪您不愿停战了，但是我想英国是不会甘心你们占据台湾的，我之前跟你说过，和平条款不要牵涉他国的利益，就是这个意思，如果我们守不住台湾，又怎样呢。</p><p>伊藤博文：对中国有害的，未必一定对英国有害。</p><p>李鸿章：你们倘若占了台湾，就与英国治下的香港为邻。</p><p>伊藤博文：我们两国打仗是我们的事，与第三国无关。</p><p>李鸿章：我听说了，英国不愿意别国占领台湾。</p><p>伊藤博文：贵国如果将台湾送给别国，别国肯定笑纳的。</p><p>李鸿章：我国已经在台湾设置了行省，不可能送给他国的，二十年前，贵国大臣大久保以台湾生番杀害日本商人（冯学荣注：其实是琉球人）为名，出兵台湾，然后进北京议和，路过天津的时候，他对我说：中日两国是邻国，今天这件事，就像小孩子打架，一下子就和好了，甚至比以前更好。当时两国几乎要打起来，我当时极力主和，我说生番杀害日本商人，这件事与中国无关，不必因为这种小事和日本打起来。</p><p>伊藤博文：我总理各种政务，实在非常繁重。</p><p>李鸿章：这次我来议和，耽误贵大臣处理国政了，但是这次议和恐怕一时半会，还谈不完。</p><p>伊藤博文：我国的国事，由天皇签名之后，还需要我签名，一切尚待上奏的文件，我都要亲自过目，我今天来到这里，公事有人代理，唯独（谈和）这件大事，非我本人亲自处理不可。</p><p>李鸿章：如果是这样的话，那么您可能要在此地待很久了。</p><p>伊藤博文：各个办事部门还是在东京，只是公文办成之后，要寄到广岛，这次议和事关重大，（虽说）我一切国政事务交由他人代办，但我实在不能在此地久留。</p><p>李鸿章：我等您给我看您的和平条款吧。如果问题不大，我可以立马答应，否则的话，就要花时间细细商量了，如果那样的话，就要耽搁您更多时间了，还请恕罪。</p><p>伊藤博文：和平条件，两国人民都在苦苦盼望，敲定越快越好，绝对不能像平时处理事务一样拖拖拉拉，因为两国的军队此时还在打仗，多耽搁一天，就多死好多人。</p><p>李鸿章：听说贵国天皇要去京都?</p><p>伊藤博文：还没定。广岛气候不太好，也许稍后会去。</p><p>（当天 3 月 24 日散会之后，李鸿章在返回住所途中，遭到日本愤青小山六之助的枪击，受伤住院，日本皇室慌忙安排医治并慰问，因此下一次谈判已经是 4 月 10 日，李鸿章康复之后）</p><p>4</p><p>第四轮谈判（公历1895年4月10日）</p><p>伊藤博文：今天再次见到中堂大人，而且看到您的枪伤已经康复，这是令人高兴呀。</p><p>李鸿章：这是贵国佐藤医生的功劳啊。</p><p>伊藤博文：佐藤医生给中堂治疗，见效真快，真令人欣慰。</p><p>李鸿章：听佐藤医生说，陆奥大臣（指陆奥宗光）发烧了，是吗？</p><p>伊藤博文：他的身体一向不太好，现在是春天，他患了流行感冒，我挺惦记他的。</p><p>李鸿章：他吃药了吗？有疗效吗？</p><p>伊藤博文：今天稍微退烧了些。</p><p>李鸿章：吃饭有胃口不？</p><p>伊藤博文：吃得不多，一个月之前，我也发烧了，现在已经好了，中堂您今天身体感觉怎么样？</p><p>李鸿章：还好，就是双腿有点发软。</p><p>伊藤博文：我的父母都八十岁了，身体都还挺好。</p><p>李鸿章：他们住在哪里？</p><p>伊藤博文：现在他们住在东京，我的出生和成长，都是在这里（指山口县）。</p><p>李鸿章：是长门市吗？离山口县（城）有多远？</p><p>伊藤博文：大约二十英里。</p><p>李鸿章：你们长门市出了好多人才啊。</p><p>伊藤博文：比不上贵国湖南和安徽两地出的人才多。</p><p>李鸿章：我们中国湖南有点像贵国的萨摩藩，人民最尚武；安徽则是有点像你们的长门市，可还是不能比，差得远了。</p><p>伊藤博文：这次（甲午）战争，是中国打输了，又不是安徽打输的。</p><p>李鸿章：我要是坐你的位置，恐怕办事成效比不上你啊。</p><p>伊藤博文：如果是你干我的工作，你一定能干得比我更好。 </p><p>李鸿章：您在日本所做的一切，就是我想在中国做的，可是如果你要是我，你就会发现在中国改革之难，真是一言难尽。</p><p>伊藤博文：换了我在中国做事，那些当官也不会服我，总之职位高了，总有这样那样难办的事情，怕这怕那的，我们日本其实也是一样的。</p><p>李鸿章：贵国官场上下都是一条心，做什么事都容易。</p><p>伊藤博文：有时候也有很难办事的情形。</p><p>李鸿章：就算有分歧，贵国天皇能听得进良臣的忠告。</p><p>伊藤博文：（明治）天皇圣明，他登基的时候，就已经将那些陈规陋习，全部革除一新，所以才有今天的日本。</p><p>李鸿章：就是因为你们有这样的皇帝，你们当官的才大有所为啊。</p><p>伊藤博文：这多亏天皇英明，所以日本有才能的人，都能舒展所长，现在我们来谈正事吧，现在我们已经停战很久了，和平条款应当尽快敲定，我已经把我们原本的条款修改了一遍，懒得你我双方争辩、浪费时间，两个版本，原先的版本很长，而昨天我修改后的版本则短了一些，我知道中国有为难之处，所以我修改之后的条约，已经尽量减少对贵国的要求，可是删减的也不太多，我也有为难之处，所以中堂您今天看我给你的版本，你只有“同意”和“不同意” 两个选择。</p><p>（注：在李鸿章养伤期间，伊藤博文和李鸿章通过文书来往，伊藤开价赔款三亿两，李鸿章还价一亿两，此轮谈判，伊藤博文再还价二亿两，并且声明不能再降，主要原因是伊藤博文破译了中方代表团的电报密码，已经掌握了中方的底线，而中方的底线正是二亿两，此时李鸿章全然不知自己的电报被破译，仍然试图垂死挣扎）</p><p>李鸿章：难道我就不能就条款发表一些意见吗（指讨价还价）？</p><p>伊藤博文：随便您怎么发表意见，总之这些要求已经不能再减了。</p><p>李鸿章：您也知道我国现在处境很为难，您提出的要求，要在我国力所能及的范围内啊。</p><p>伊藤博文：实在不想浪费时间，所以我已经在我能做到的范围内，事先减去所有能够减去的要求，我懒得跟您争辩，否则我要给您看原版，那么你和我就要反复辩论十天，才能减到今天这个版本。</p><p>李鸿章：这个和平条件有没有中文版？</p><p>伊藤博文：英文版、日文版都有，中文的还没有完全翻译出来，只翻译了一部分。</p><p>（于是伊藤博文将条约英文稿交给中方，另外给了中文的三张纸，写的是主要条款的中文译文）</p><p>伊藤博文：只有在赔款、割地、占领地三个主要条款有中文版。</p><p>（李鸿章认真读完三页中文纸）</p><p>李鸿章：我就先说说这三个条款吧，第一，赔款两亿两白银，数额太大，我国做不到。</p><p>伊藤博文：两亿两白银已经是减到不能再减了，如果仗继续打下去，贵国只会赔的更多。</p><p>李鸿章：两亿两白银，我们给不起，再加码，那就更是给不起，请您减少一些。</p><p>伊藤博文：减不了，仗打过之后，就是这种后果了，没办法。</p><p>（注：李鸿章的电报设有密码，而且中文字的代码是保密的，但是道高一尺，魔高一丈，其实这段时间李鸿章和北京的往来电报，早就被伊藤博文的手下破译了，伊藤博文对中方谈判代表团的底线了如指掌，所以伊藤博文就懒得谈了，索性一次性把价格开到中方的底线，期望尽快达成协议、完成谈和，然而对这一切，李鸿章至死都蒙在鼓里，他完全没有想到自己的电报会被日方破译）</p><p>李鸿章：上次你们把贵国的战费开销清单给我看，数额也是和这个（此处疑指一亿两）差不多，这次我们赔款，只能找外国借钱，加上利息，数额就更大，中国可真是没有办法还债啊。</p><p>伊藤博文：二十年还不清，你们可以分四十年还嘛，分期越多，负担就越小， 这本来是你们的事，与我无关，我也是顺便说说，您不要见怪。</p><p>李鸿章：四十年分期？换了是你，你会愿意借吗？</p><p>伊藤博文：我借不起，总之你们找洋人借钱，分期越久就越好。</p><p>李鸿章：从开战到现在，我们的国库早已经空了，找洋人借钱，一向是以二十年为限，您所说的四十年期限，只有找本国商户借款，才有可能借到。</p><p>伊藤博文：就算是外国人，借钱给你们，他也希望是长期分期。</p><p>李鸿章：外国借债，有一种做法是只付利息，永远不还本金的。</p><p>伊藤博文：那是另外一件事了。关键看各国信不信贵国，外国银行借钱出去，都希望是长期，所以我认为会有很多外国银行愿意借给贵国，不是吗？</p><p>李鸿章：中国打了败仗，声誉已经大大受损了。</p><p>伊藤博文：中国地大物博，有的是财富，不会的。</p><p>李鸿章：我国虽然物产丰富，但是开发不了。</p><p>伊藤博文：你们中国领土有日本十倍那么大，而且中国的人口有四个亿，财源广得很，创造财富很容易，现在贵国患难，人才更是倍出，正好利用他们的才智，来开发财源。</p><p>李鸿章：索性我们中国请你来当我们的首相好了。</p><p>伊藤博文：这个要请示我们天皇了，我个人倒是挺乐意去的。</p><p>李鸿章：如果贵国天皇不批准您去当我们中国的首相，你就去不了，我们都是给皇帝打工的，所以也请您设身处地、将心比心，体谅我的处境，如果照二亿两白银这个数字，写进条约，外国就知道我们必须找他们借钱才能还债，到时候他们一定要挟我们、支付昂贵的利息，到时候我们借不到钱，还不上赔款，最终又是失信于贵国，到时候我们两国又只能重新开战，您又何苦对我国相逼 太甚呢。</p><p>伊藤博文：借钱还债，这是你们中国的事情，与我无关啊。</p><p>李鸿章：我们没钱偿还赔款啊，怎么办呢？</p><p>伊藤博文：正是因为我们深深知道贵国有困难，所以我们才减到这个数（从三亿两减到二亿两），已经实在没有办法再减少了。</p><p>李鸿章：还是要请您再减少一些。 </p><p>伊藤博文：实在是减不了。</p><p>李鸿章：首期赔款缴纳之后，剩下的款子以每年5%的利率收取利息，德国对法国就是这样算的，但是中国自从道光、咸丰年间以来，三次偿还英国和法国的军费，都没有计算利息，只是到期拖欠没还的时候，才加算利息的，贵国这笔钱，怎么能够参照西方各国的例子呢？</p><p>伊藤博文：如果全部赔款都能付清，自然不用计算利息。</p><p>李鸿章：但是二亿两白银，我国实在是给不起，这样好吗？我们每年给贵国支付5%的利息，本金就不用还了，可以吗？</p><p>伊藤博文：这种做法实质上就是相当于找我国（日本）借二亿两白银，我国没有这么多的钱出借。</p><p>李鸿章：贵国根本不需要实际借出本金，贵国只管收取利息即可。</p><p>（冯学荣点评：李鸿章这是要空手套白狼，除非伊藤博文是傻子，否则都不会答应，李鸿章是要将死马当活马来医，也实在是没办法了）</p><p>伊藤博文：这个办不到。</p><p>李鸿章：（除了首期之外）余下的款项，可以加息，但是我们只支付利息，不实际偿还本金，这是我提出的办法，请您仔细考虑下。</p><p>伊藤博文：一般而言，打仗之后的赔款是要一次性付清的，这次我们之所以答应给你们分期付款，就已经是给了你们轻松了。</p><p>李鸿章：赔款一次性付清，世界历史上没有这样的先例，当年德国和法国之间的战争赔款，也是分期支付的，现在我们中国先支付利息，等到我们慢慢筹集到足够的本金了，再支付本金，这样可以吗？</p><p>伊藤博文：这个也办不到。</p><p>李鸿章：既然这样办不到，那么（除了首期之外）余下的款子，就应该免息，这笔赔款本身就数额巨大，如果再加上利息，就相当于是赔款两次了。</p><p>伊藤博文：如果一次性付清，或者虽然分期，但是分期的期限较短的话，可以给你们免息。</p><p>李鸿章：我们的国库早就空了，必须要借外债，这样好吗?等我们借到了外债，到时候再将分期的年限缩短，行不行？</p><p>伊藤博文：条约内必须锁定还债分期的年限（意即不可随意更改）。</p><p>李鸿章：我们在条约内加上这么一句，说如果中国可以提前还清的话，余款就可以免息，好不好？</p><p>伊藤博文：如果能将款项付清的话，利息可以免掉。</p><p>李鸿章：首期我们付清了，就应该免息，而不论我们首期交了多少。</p><p>伊藤博文：首期应该交五千万两白银，此后一年内再交五千万两，如果第二年全部交清的话，可以免息。</p><p>李鸿章：如果第二年的钱我们交不清，余款可以免息吗？</p><p>李鸿章：看余款有多少，如果数字不大的话，就免掉利息怎样？</p><p>李鸿章：利息我们实在是无法接受，这次（甲午）战争，日本虽然打胜了，但是你们总没能强得过英国和法国吧？当年英国法国对中国，赔款都没有强行要求利息（此处疑指两次鸦片战争以及中法战争），这次我们给你们日本支付分期利息，中国人一旦知道，舆论必然大哗，况且这次赔款本身数额就巨大，如果再加上利息，那就真的是不得了。</p><p>伊藤博文：看贵国能不能全数付清了。</p><p>李鸿章：只要您答应免息，一定全数付清，自不用劳烦阁下多说。</p><p>伊藤博文：所谓全部付清，也不是叫你们一次性付清，如果能在两年内（分期）付清，那么可以免掉你们的利息。</p><p>李鸿章：我无法答应，借债的权力不在于我，而是另有其人，到时如果能借到，自然能立马还清，日本虽然打了胜仗，但是也不要欺人太甚、强迫我们办我们办不到的事情。</p><p>伊藤博文：您说办不到，是不是不同意的意思？</p><p>李鸿章：我这次来谈和是真心诚意的，不能说假话，办不到的事情，我不得不直说。</p><p>伊藤博文：从我给出的方案来看，我们已经尽力减少要求了。</p><p>李鸿章：再说割地一条，我看欧洲各国打仗的历史，没有战胜国要求将尚未占领之地全部割让的先例，德国的军队够强了吧？德国的兵都打到巴黎了，最后也只割了两个县那么点地方，剩下的都还给了法国，今天贵国（日本）要求割让奉天（沈阳）以南、日军所占领的整个辽东半岛，这是不是太过分了？事后欧洲各国一定会笑话你们的。</p><p>伊藤博文：欧洲各国打仗的历史多了，德国法国之战只是其中一例而已（意思是:欧洲国家也有割让未占之地的先例）。</p><p>李鸿章：英国和法国的部队也曾经占领过中国的城市，但是从来没有强求割地的。</p><p>（冯学荣点评：弱国外交难，李鸿章这是在睁眼说瞎话，香港割让给英国就是一个先例，李鸿章其实是在不择手段忽悠伊藤博文，以求条件减少一分是一分）</p><p>伊藤博文：英国法国打你们，是另有所图，不能拿他们的例子来说我们（甲午战争）这件事。</p><p>李鸿章：您例如说辽东的营口，这是我们中国收取关税的重地，一向是我国财政收入的主要来源之一，贵国又要我们赔款，又要割占我们的关税重地（营口）， 这是什么道理呢？</p><p>伊藤博文：营口的关税，也是出自当地货物（意思是并非源自外来货物）。</p><p>李鸿章：对嘛，你夺了我们的营口，你就占有了营口的物产和财富，不但这样，你们还要我们另外进行赔款，这又是什么道理嘛？</p><p>伊藤博文：这个，没有办法，只能这样。</p><p>李鸿章：就像养孩子一样嘛，你又要他长身体，又不给他喂奶，这样做，那孩子肯定是死路一条嘛。</p><p>伊藤博文：您怎么可以把中国比喻成一个吃奶的孩子呢？</p><p>李鸿章：今天我们中国贫弱，还真是如同一个吃奶的孩子，而且营口这个地方啊，你们割占了，对你们并没有什么好处，营口北部地方广大，物产丰富，贵国一旦割占了营口关，那么北部的物产只能从内地走陆路了，那么要纳内地的税，好了，从内地上船，再运到营口港，又要交一次关税，这样货物就很贵，贵了就滞销，滞销就停产，停产之后，（你们的）关税就没有了，而且营口北部的土产一旦走了内陆路线，中国的官员叫他们从别处出口、或者加重厘金税收，中国商人根本没有不听话的。</p><p>伊藤博文：这一点，未来我们两国可以商量解决，而且我们两国也可以和欧美各国共同商量，更何况将来我们拟定陆路通商章程，这一点应该也是要谈到的。</p><p>李鸿章：中国对自己的物产加税，是中国的内政事务，怎么可以和外国商量着办？所以说啊，你们割占营口，对你们其实没有什么好处，我建议你们不如再考虑别的地方，营口就算了吧。</p><p>伊藤博文：营口以北的地方，我们已经让了，实在没有办法再让了。</p><p>（冯学荣注：在李鸿章养伤期间，伊藤博文通过文书来往，提出的原方案是割让北纬 41 度线以南的辽东半岛，这次是修正方案，伊藤博文的确已经作出让步）</p><p>李鸿章：还有台湾岛，日本部队并未攻占台湾，为何要割让台湾岛？</p><p>伊藤博文：台湾岛是我们两国商量割让之地，与日本部队是否已经攻占，并无逻辑联系。</p><p>李鸿章：如果我们不答应割让台湾岛呢，你们又怎样？</p><p>伊藤博文：如果必须要日本兵攻占的地方，贵国才肯割让，那么如果我们的兵从山东省一路杀进内地，攻占你们几个省，你们怎么办？</p><p>李鸿章：那是你们日本发明的新做法了，部队攻破的地方，西方各国从来没有全部占领的，你日本要是那样做，岂不是要让西方各国笑话你？</p><p>伊藤博文：那你们为什么将黑龙江、吉林的故土割让给俄国呢？</p><p>（冯学荣点评: 伊藤博文此处应指的是中俄《北京条约》）</p><p>李鸿章：我国和俄国的《北京条约》不是因为打仗而签的。</p><p>伊藤博文：台湾难道是吗？我们两国有在台湾打仗吗？这不是一个道理吗？</p><p>李鸿章：我国割让给俄国的土地，其实是少数民族的边疆地带，不但荒凉贫瘠，而且人烟稀少，台湾不同，我国在台湾已经设置了行政省份，人烟稠密，二者根本不能相比。</p><p>伊藤博文：任何一寸土地，都是你们皇帝的土地，根本不分什么荒凉与繁荣。</p><p>李鸿章：你这样是不是欺负我老了、分不清世间事物的区别了？</p><p>伊藤博文：哪里？你谈起这个话题，我不能不作答。</p><p>李鸿章：总之，现在就是三件事：1、二亿两白银太贵，请您减一些；2、营口不能割让；3、台湾也不能割让。</p><p>伊藤博文：这样就算我们两人意见不合了，我今天将改订之后的条款交给贵方审阅，能减的就这么多了，时间仓促，不能再折腾了，如果贵方能答应就好，如果不能答应，那么我就当作你们拒绝和平条约了。</p><p>李鸿章：难道我就不能辩驳一下吗？</p><p>伊藤博文：您尽管辩驳，总之我这些条件就是没有办法再减少了，我知道您希望能尽快签定和平，其实我也是，我们广岛有六十多艘战舰停泊在港口，总共有二万吨的吨位，今天已经有好几艘船开出去了，兵员和辎重都齐备，我们这些战舰之所以不马上开赴战场，就是因为我们主动停战了而已。</p><p>李鸿章：贵方宣布停战的期限即将届满，请问能不能延展一段时间？</p><p>伊藤博文：如果我们和平条约签好了，停战可以展期，否则不能展期。</p><p>李鸿章：当年德国和法国两国交战，一度停战，而且停战延展了十天。</p><p>伊藤博文：时势不同罢了，当时法国没有皇帝，什么事情都要靠议员，靠议会开会讨论，还要选总统，又要派遣使节，所以耽误了时间而已。</p><p>李鸿章：贵方的要求，我们大体上都已经满足了，有争议的就只剩这么几条了，如果贵国不停战的话，我们的谈和又怎能顺利开展？</p><p>伊藤博文：停战的期限只有十天，今天这些条款，请你们尽快决定，行还是不行？三天之后下午四点半，请你答复我。</p><p>李鸿章：既然尚有谈不拢之处，我们就应当继续谈嘛。</p><p>伊藤博文：三天之后，如果贵方同意条款，请立即复函，我们还要预备签署条约的事宜，而且双方还要安排签章，这些都要耽误好几天的时间。</p><p>李鸿章：复函就不必了，只要我们同意了，我见面跟你说一声就行，可以马上签约，但是三天时间肯定是不够，我直接告诉你吧：我还要发电报回北京请示（皇上），你不能给我设定答复期限。</p><p>伊藤博文：那北京一旦回复批准你了，你就可以办了嘛。</p><p>李鸿章：我请示北京之后，再和您谈谈，总之我一接到北京的指导意见，再来约您。</p><p>伊藤博文：不能再这样拖下去了，必须要设定一个答复期限。</p><p>李鸿章：最多四到五天，总之不会超过停战期限。</p><p>伊藤博文：贵国皇帝三天内应该会给您回电报的。</p><p>李鸿章：这件事十分重大，还需要商量，今天您提到的这些条件，我之前都有接到过（北京的）指导方针，我不能做主。</p><p>伊藤博文：五天太久了，我们等不了。</p><p>李鸿章：停战期限届满距离今天还有十天嘛。</p><p>伊藤博文：说是十天，但我要提前通知我们前线的官兵（准备开打）。</p><p>李鸿章：停战期限，你们前线的官兵哪有不知道的道理？</p><p>伊藤博文：我们前线的军官随时都在打听我们这次谈判的进展。</p><p>李鸿章：毕竟停战还有十天，再谈一次，就可以定局了，而且您给的条约草稿，篇幅较长，又是英文，翻译成中文的只有这三页纸，我们今晚还要加班加点，对全稿进行翻译，然后才能发电报回北京，我想过四天就应该能有答复，最晚不过五天时间。</p><p>伊藤博文：北京回电，我相信三天足够了。</p><p>李鸿章：一旦有回音，我马上约您面谈，请问还是在这个会议室谈吗？还是请您光临寒舍来谈？</p><p>伊藤博文：随中堂您的便，当然这个会议室更好一些。</p><p>李鸿章：赔款还请您再减少五千万两白银，另外，台湾不能割让。</p><p>伊藤博文：如果这样的话，那么我们就要派兵攻打台湾了。</p><p>李鸿章：你我两国是邻国，不必这样闹翻脸，总要和好为妙。</p><p>伊藤博文：赔款、割地，这些其实都是债务，只要债务还清了，两国自然可以和好。</p><p>李鸿章：你们索债，索得也太狠了，就算能谈和成功，我们也是不服的，刚才我给您提出的修正案，句句都出自我的至诚，贵大臣怪我不应该那样说话， 但我这个人说话就是这么直，台湾不好打，法国上次打台湾，都打不下来（指中法战争），台湾沿海风浪很大，而且台湾人民非常强悍。</p><p>伊藤博文：我们的海军，什么样的苦都能吃，去年你们中国东北特别冷，人们一开始都以为我们的兵挨不了那样的寒冷，可是一个冬天过去了，我们的兵并不见得吃了气候什么亏，反而是处处得胜。</p><p>李鸿章：台湾瘴气（疟疾）横行，以前你们日本兵不是打过一次台湾吗？当时伤亡甚多，所以现在台湾人民许多人都抽鸦片，来预防瘴气（疟疾）。</p><p>（注：李鸿章此处提到的“日本打过一次台湾”，应该指的是 1874 年牡丹社事件）</p><p>伊藤博文：您走着瞧，日后台湾归了我国，我一定在台湾禁绝鸦片。</p><p>李鸿章：台湾人民抽鸦片，由来已久，已经不是一天两天了。</p><p>伊藤博文：哪里？鸦片还没诞生的时候，台湾岛上就已经有居民了，我们日本一向禁绝鸦片进口，所以我们日本没有人抽鸦片的。</p><p>李鸿章：十分佩服！</p><p>伊藤博文：禁烟这件事，我以前曾经与你们阎相国谈过，他也是这么看的。</p><p>（注：伊藤博文这里提到的“阎相国”，是不是指的阎敬铭？不能确定，但这一细节无关紧要，可以忽略）</p><p>李鸿章：英国人向我中国进口鸦片，是以“洋药”的名义输入的，而且我国以“加税”的方式、间接承认了它的合法性，这还能怎么禁呢?</p><p>伊藤博文：贵国对英国鸦片加征的进口税，加得太少了，就是再加两倍，也不算过分。</p><p>李鸿章：（加税）我们已经提了好多次了，英国人不同意啊。</p><p>伊藤博文：一个人一旦抽了鸦片，整个人都不好了，这样你们的兵就不可能有很强的战斗力。</p><p>李鸿章：（禁烟）这件事我们受英国人压迫，很难禁得了。</p><p>伊藤博文：贵国应当先立法、禁止国民抽鸦片，这样一来，外国的鸦片自然进不来了。</p><p>（李鸿章起席、与伊藤博文道别，两人握手的时候，李鸿章再次请求伊藤博文 减少赔款，伊藤博文一边笑一边摇头，说:实在不能再减了。散会）</p><p>5</p><p>第五轮谈判（公历1895年4月15日，日本马关，春帆楼(酒楼)）</p><p>李鸿章：陆奥大臣的身体康复了吗？（指日本外相陆奥宗光，时患春季流感）</p><p>伊藤博文：好了一点，他自己说要来（参加本次谈判），但是佐藤医生劝他安心养病、不要外出。</p><p>李鸿章：佐藤医生今天早上也见了我，他也说了陆奥大臣身体尚未完全康复，最好不要外出吹风，昨天我派经方（指李经方，原系李鸿章的侄子，过继为儿子）去了您处商谈和平条约各款，您一一回复谢绝了，您还是毫不放松、一点都不肯相让啊！</p><p>伊藤博文：我早就说过了，我们已经让步到尽头了，这个条约草案已经是定案了，万万不能修改了，我也觉得很遗憾。</p><p>图：中日谈判代表在春帆楼和谈会议室</p><p>李鸿章：我现在已经接到北京方面给我的指示了，说要我“酌情办理”，这件事（割地赔款）是真的不好办啊，我想请您帮我“酌情办理”一下？我真的不知道怎样“酌情办理”才好。</p><p>伊藤博文：换了我是你，我也会感到十分难办。</p><p>李鸿章：您在日本，说一就是一，没有人敢说一个“不”字。</p><p>伊藤博文：哪有？朝野各界也时不时有对我批评指责的。</p><p>李鸿章：总之是比我在中国好，骂我的人可多了。</p><p>伊藤博文：根本不是，我的处境根本比不上你，您在中国位高权重，地位无人可以撼动，然而我们日本有国会，我做事只要有一处闪失，国会就要弹劾我。</p><p>李鸿章：去年北京有许多许多的人在皇上面前弹劾我，说我与日本首相伊藤博文是好朋友的关系，其实他们弹劾得对啊，今天我和你谈判签约，难道不就是明证吗?</p><p>伊藤博文：那些弹劾你的人，都是无知之辈，到了现在这个地步，他们应该知道自己错了，我想他们一定会后悔当年弹劾您。</p><p>李鸿章：今天您要我签这种条约（指《马关条约》），条款凶狠至极，一旦我签字了，我回国又要被骂啊，你说我该怎么办呢?</p><p>图：马关条约签订现场</p><p>伊藤博文：那些人爱胡说八道，就随他们好了，像今天（签《马关条约》）这样的重任，他们也没有担当的分量，中国只有中堂您（指李鸿章）一个人，才能担当这个重任。</p><p>李鸿章：我签字之后，他们（指中国诸位大臣）又要弹劾我、对我群起而攻之。</p><p>伊藤博文：说风凉话的人到处都有，我们日本也有。</p><p>李鸿章：暂且不说这些了，这次皇上（指光绪皇帝）叫我“酌情处理”，如果您能将草约的条件再减少一些，我就敢担当这个重任，请您替我想想，哪些地 方可以稍微让步一下，例如赔款和割地这两条，还是要请您再减让一些，只要稍微减让一些，我可以马上签约。</p><p>伊藤博文：我早就说了，无法再减了，昨天我也告诉了贵方李经方代表，我们已经让步到尽头了，不然的话，我和你开四五次会议，逐次减让，让到今天的地步，结果也是一样，正是因为我考虑到中国的实际情况，所以我一次性减到最低，同时也是为了节省会议时间，谈判议和与到菜市场买菜不同，讨价还价的，根本有失体面。</p><p>李鸿章：前些天临别的时候，我说请您在赔款一条再减五千万两白银，当时我看您的意思，是可以减让的，今天如果您减让五千万两白银，则条约就可以马上敲定。</p><p>伊藤博文：我方如果是可以减让的话，那么根本就不需要您来提，我早就减让了，该让的，我都已经让了。</p><p>李鸿章：如果说减让五千万两不行，那么减让二千万两，怎么样？我这里有一份贵国发行的《时事新报》，上面刊登的文章说贵国（甲午战争）的军费只花了八千万日元，这种说法也许不足为凭，但是恐怕也不是空穴来风。</p><p>（伊藤博文从李鸿章手中接过《时事新报》，仔细阅读相关报道）</p><p>伊藤博文：这份日本报纸的言论，都是与国家作对的，根本不可信。</p><p>李鸿章：这份报纸反不反动，我们就不争论了，总之，是要请您再减让一些，这样就好。</p><p>伊藤博文：我国在甲午战争中的花费，超过这个数字（八千万日元）。</p><p>李鸿章：请您稍微减让一些，我就可以马上签约，只要您减让了，我会发电报回国，我们国家会记得您的情分。</p><p>伊藤博文：能减让的，已经都让了。</p><p>李鸿章：依据条约割让给贵国的土地很大，财源广得很，请您从大处着想，不必只盯着眼前这二亿两白银。</p><p>伊藤博文：您说的这些财源，都是未来的事情，不可以纳入这次的赔款，两码事。</p><p>李鸿章：割地带给贵国的财源是源源不断的，而现在这二亿两白银，和割地的财源相比，并不太重要。</p><p>伊藤博文：将来我们开发这些土地（指辽东、台湾）的财富，其实都是再投资到本土产业之上，不会有现金盈余。</p><p>李鸿章：土地的财源远远不止于此，贵国得地之后，肯定会更加兴旺。</p><p>伊藤博文：我们去开发这些地方（辽东、台湾）的资源，本身也是要花费金钱成本的。</p><p>李鸿章：我就拿台湾说吧，中国人不善于经营实业，事实上台湾有煤矿，有煤油，有金矿，如果换了我是台湾的巡抚，我肯定一一挖掘。</p><p>伊藤博文：我们即便去开发这些矿产，也是以很便宜的价格出售给中国人。</p><p>李鸿章：那中国的中间商也要用钱跟你们买呀，总不能白给吧？</p><p>伊藤博文：这些地方都是未开发的地区，我们必须投入巨资，才能开采有成。</p><p>李鸿章：成本越高，利润越少。何妨将赔款再减少一些，将来你们开发的资源和财富，很容易就能弥补回来，您答应减让了，我国向外借债，也相对容易一些，我还在北京的时候，有外国人说愿意以台湾为抵押品，贷款二千万金镑给我国，后来我来日本议和，他们都知道日本想要台湾，这件事才搁起不谈了，您想想，台湾单单是抵押，就值这么多钱，更何况是出售？出售的价格更高。</p><p>伊藤博文：你们中国地大物博，借钱很容易的。</p><p>李鸿章：无论如何，都请您再减几千万两白银，您不必如此口紧的。</p><p>伊藤博文：说过很多次了，无法再减让了。</p><p>李鸿章：又要赔款，又要割地，双管齐下，您出手太狠，让我很难办。</p><p>伊藤博文：这不是平时轻松谈事，这是打过仗之后的谈和。</p><p>李鸿章：既然是讲和，就要彼此妥协，您办事太狠，才干太大了！</p><p>伊藤博文：这不是我的才干问题，而是打过仗之后的大势使然，不得不这样办，我要与中堂您比才华，我万万比不上。</p><p>李鸿章：既然赔款一分钱都不能让，那么割地方面可以减少一些吗？总不能一毛不拔吧？</p><p>伊藤博文：割地、赔款，都不能减，我已经多次表明，这个草案已经是最终方案了，已经让到尽头了，一点都不能再让了。</p><p>李鸿章：我并非没有签约诚意，不过是请您再少一些，如果稍微再少一些， 我立马就可以定约，如果您能做到，那就是对我的情分，我回国之后，必定会记住您的情义。</p><p>伊藤博文：我已经减了一亿两白银，这就已经是我的情义了，昨天我已经告诉李经方先生，我们的初稿本身是一点都不能修改的，后来是念及我和中堂您多年的交情，所以才减少了一亿两白银。</p><p>（注：伊藤博文原开价 3 亿两，后来减让了 1 亿两，现在是 2 亿两）</p><p>李鸿章：您如此手紧，将来我也许要记仇啊。</p><p>伊藤博文：我与中堂您交情最深，早前减让一亿两白银，日本人民一定会骂我， 但是我为了和您的交情，我愿意挨骂，请您于停战期满之前，赶紧敲定条约，不然的话，赔款只会更多，这不是我一个人的意志，这是日本全国人民的意志。</p><p>李鸿章：既然赔款本金少不了，那么利息总可以免了吧？</p><p>伊藤博文：我前些天开会的时候已经说过了，条约签署之后一年之内，分两期各偿还五千万两白银，然后第二年将余款一亿两白银还清，则利息可以全免。</p><p>李鸿章：万一到期了，我们借不到钱，不给本金，只付利息可以吗？</p><p>伊藤博文：不行。这个你前些天开会的时候已经说过一次了，只给利息，不给本金，这就相当于是日本借钱给贵国，我们日本没有这么大的财力。</p><p>李鸿章：你们日本没有财力，那我们中国更是没有钱啊，这次（甲午）战争开战以后，你们日本都没有找外国借钱，而我们中国则已经找外国借了好几回了， 这就是你们日本比中国有钱的明证。</p><p>伊藤博文：并不是由于日本比中国有钱，只是我们国家稍微懂一点点理财之道而已。</p><p>李鸿章：那么我们就要向你们日本学习理财之道了，可是就现在来说，中国很穷，要借钱，很不容易。</p><p>伊藤博文：依我看，挺容易，根本一点都不难。</p><p>李鸿章：找谁借呢？我们现在是毫无头绪，要等我回国之后，再和他们商量，这样行不？如果三年之内，我们将本金全部还清，那么可以免掉所有的利息吗？</p><p>伊藤博文：如果贵国三年之内可以还清所有的本金，则利息就全免。</p><p>李鸿章：条约内可以写明，如果三年之后还清，怎样怎样，这只不过是灵活用语，只是为了体面而已，我们并不会多占什么便宜。</p><p>伊藤博文：条约可以这样写，首期交清之后，余款要计算利息，如果三年之内不能交清，那么从前免掉的利息，就要补交。</p><p>李鸿章：不如这样写，三年内交清，免息，如果三年内没能交清，则所有的款项都要补交利息。</p><p>伊藤博文：所有款项一并补交利息，好像不太好计算。</p><p>李鸿章：不如干脆这样，二亿两白银，减去两千万两，抵偿利息，余下的的一亿八千万两白银，依照你草约内计算利息的办法，这样岂不是更好计算？</p><p>伊藤博文：不行，三年内交清免息，这个要在条约内写清楚，以免日后合同纠纷。</p><p>李鸿章：我们借钱都还没谱，怎能将交款期限预定呢？</p><p>伊藤博文：我也担心你们两年内筹不到款，所以我在原稿里，将还债期限延长到七年之久。</p><p>李鸿章：请您减免两千万两白银，这样我们中国就可以少借两千万两白银了。</p><p>伊藤博文：不行。绝对不行。</p><p>李鸿章：三年内还清免息，不必写进条约，可以附一个实施细则。</p><p>伊藤博文：不行，这种事要在条约里面写得清清楚楚。</p><p>李鸿章：请您将条约第四个条款再仔细看看，有没有别的办法？</p><p>伊藤博文：要写明三年内还清免息，如果还不清的话怎么办？也要写明。</p><p>李鸿章：可以加一句灵活的，说如果三年内还不清，就怎样怎样。</p><p>伊藤博文：必须要写明白，到期还不清怎么办。</p><p>李鸿章：我们借钱的权力是另有其人，要借到钱了，才能写清楚。</p><p>伊藤博文：那就只好依照原来草稿的措辞了。</p><p>李鸿章：我们以前给英法两国的赔款，都只是写明到期不还的情况下才有罚息，而现在您一开始就索要利息，是不是有点儿太没人情味了？</p><p>伊藤博文：英国法国有钱得很，所以他们不在乎你们的利息。</p><p>李鸿章：你们想钱是想疯了吧，赔款狮子大开口，而且利息又高。</p><p>伊藤博文：你们当年和英法联军打仗，英法两国出兵并不多，而我们日本在甲午战争中出兵很多。</p><p>李鸿章：英法联军时候，英军中许多其实是印度（英属殖民地）兵。</p><p>伊藤博文：印度兵不多，主要还是英国兵。</p><p>李鸿章：直接把“三年内还清免息”添加到原稿里面，可以吗?</p><p>（伊藤博文想了好久）</p><p>伊藤博文：你们要想免息的话，只有一个办法，三年内利息照交，如果三年内真的可以还清本金的话，那么已经缴纳的利息，可以抵扣本金。</p><p>李鸿章：是不是如果我们三年内全部还清、而且也缴纳了利息，可以将已经缴纳的利息抵扣作本金？</p><p>伊藤博文：譬如说签约后六个月内，先交五千万两，再过六个月，又交五千万两，这时候要按照一亿两白银的本金来计算利息，第三、四期的付款，也是这 样算，如果三年届满，你们将所有的余款都交清了，那么头两年半所交的利息，就可以用来抵扣应缴的余款，只是说这里的“三年”是指从签约换约之后开始算。</p><p>李鸿章：那么我们可以将三年之内如果能将全款等等云云之类，写明白，请您过目之后，就可以添加到条约第四款中去。</p><p>（伊藤博文和随员商量片刻）</p><p>伊藤博文：可以添进去。</p><p>李鸿章：还是有几条和您商榷，并不是要增减内容，只是要将条约里面的意思说明白，以免将来产生条约纠纷，例如说辽河口的界线，这条线一到营口的辽河，就顺流而下，直通大海，所以我们应该以河中心为界线，这符合国际公法，凡是以河流为国界的，都是以河中心为界。</p><p>伊藤博文：将来我们两国人员现场勘界的时候，可以划定。</p><p>李鸿章：那么就请将这一点添加到条约第二款的第二项下面。</p><p>伊藤博文：说得对，可以加。</p><p>李鸿章：还有条约第五款，两年后割地之处中国人不迁出的，视为日本臣民，应该加上一条：但是如果有物业在割地之内，而人迁出的，两年后物业应该由日本政府提供保护，应和日本臣民的物产一视同仁。</p><p>伊藤博文：这个不行，依照我们日本现在和西方各国签署的条约，外国人不可以在日本购置物业。</p><p>李鸿章：我所说的是割让地面上原本属于中国人的物业，和外国人后来购置的物业不同。</p><p>伊藤博文：这个与日本的法律冲突，不好办，一旦开了这个口，就会给外国人口实。</p><p>李鸿章：割地之处中国人的物业，都是祖先留下来的，可以依照法律缴纳物业 税，有什么难办的呢？中国人都可以跨县购置物业。</p><p>伊藤博文：中国人跨县购置物业，与外国人到国内来购置物业，不是一回事， 如果日本允许中国人在日本的土地上购置物业，那么外国人必定也要求一视同仁，到时我们就难办了。</p><p>李鸿章：如果台湾的中国人不肯迁走，也不愿意变卖物业，那么日后你们日本政府出了告示，到时候要闹出事来，可与中国无关哦。</p><p>伊藤博文：土地一旦经过割让，日后就是我们日本的责任，不用您操心。</p><p>李鸿章：我刚刚接到台湾巡抚发来的电报，说台湾人民听说台湾要割让给日本，群情汹涌，都说誓死不做日本人。</p><p>伊藤博文：随便他们鼓噪，我自有对付的办法。</p><p>李鸿章：我这样说不是恐吓您，而是出于好意，直言相告的。</p><p>伊藤博文：我也听说了。</p><p>李鸿章：台湾人民谋杀官员，聚众闹事，是常有的事，你们接管台湾之后，日后就不能怪我了。</p><p>伊藤博文：中国一旦将台湾的统治权让出，日后就是日本的事情。</p><p>李鸿章：还是要在先声明。</p><p>伊藤博文：你们中国只需要将台湾的官员撤走、将台湾的驻军撤走，就可以了。</p><p>李鸿章：绿营的士兵不能撤走，驻防的部队可以撤走。</p><p>（伊藤博文读免息一条的英文翻译，并与中文进行核对）</p><p>伊藤博文：可以了，就按这个翻译添加进去。</p><p>李鸿章：台湾这个地方的官员和乡绅，要做工作，所以你们应该给我们六个月的时间，再进行交接，这个应该写进条约。</p><p>伊藤博文：我本来的计划是签约之后几个礼拜之内，就派兵接收台湾。</p><p>李鸿章：贵国可以派人与台湾巡抚洽商，以将交接事宜办的清清楚楚。</p><p>伊藤博文：我们换约之后，还请你们中国政府出台告示，告诉台湾民众，日本即将派官员和部队到台湾接管，在这个过程中，台湾一切的武器，都要暂行收管。</p><p>李鸿章：日本会派文官去吗？</p><p>伊藤博文：对，也会派文官。</p><p>李鸿章：领土交接是一件大事，应该先订好具体的办事大纲，日后照办，避免纠纷。</p><p>伊藤博文：我们不能等六个月之后才去接管台湾，换约之后，我们会立即派人去台湾，开始筹备办理交接事宜。</p><p>李鸿章：我们可以在条约内说明，换约之后，两国商订台湾交接办事大纲。</p><p>伊藤博文：早就写好了，在这里，就是为了台湾而草的，你看看。</p><p>（说罢，伊藤博文将台湾交接事宜大纲的日文版、英文版交给李鸿章，李鸿章看日文，说看不懂，于是叫部下口译英文版，部下说了大略：一切堡垒、枪炮与政府物品，都交给日本武官接管，所有中国兵的行李和个人物品可以随身带走，日本官员指定一个地方，让中国兵暂时居住，直至调回大陆，中国应限期撤兵，撤兵费用自己承担，撤兵之后，日本官员将洋枪送还中方，然后派文官治理台湾，公家产业由日本政府接管，其余细节，由中日两国文武官员商定， 云云）</p><p>李鸿章：这是换约之后的事情了，这个不归我管。</p><p>伊藤博文：中堂大人您连改期都有权，这个交接细则与和平条约同样重要，怎么能说不归您管呢？</p><p>（冯学荣评：听李鸿章说他对台湾交接一事撒手不管，伊藤博文感到十分紧张， 因为伊藤博文知道当时台湾巡抚唐景崧态度反日，而李鸿章无论怎么说都属于当时中国官员里面相对好打交道的，所以伊藤博文希望李鸿章负责到底，不但割让台湾，而且还要主持台湾的交接事宜）</p><p>李鸿章：这些都是换约之后才应该谈的事情，与日后的中日两国通商水陆章程等事情，可以一并商议。</p><p>伊藤博文：台湾交接，这是目前最要紧、最紧急的事情。</p><p>李鸿章：这个要等（马关条约）换约以后，再进行商议，您要知道，台湾巡抚不归我管，要总理各国事务衙门才有这个权力管他，台湾交接一事，应当在总理衙门商议，我现在和您谈的，不过是将台湾割让给你们日本而已，或许这样也可以，等到换约的时候，可以另行订立台湾交接简明章程。</p><p>伊藤博文：这样纯粹是浪费时间。</p><p>李鸿章：在没换约之前，还不能这么说，台湾仍然属于中国。</p><p>伊藤博文：这个你倒说的对。</p><p>李鸿章：要么我们在条约里约定：台湾交接事宜，等本约互换批准之后，两国再另行商议。</p><p>（冯学荣评：李鸿章这是在尽量为中国拖延台湾交接的时间）</p><p>伊藤博文：既然这样，我马上派兵前往台湾，幸亏台湾不在停战声明的地域范围之内。</p><p>（冯学荣评：伊藤博文这句是赌气话，意思是你故意拖延我，那么我就派兵打，不跟你客气）</p><p>李鸿章：既然你们出兵，那么我们可以在（马关）条约里删除有关台湾的内容， 就让你们日本出兵自己去拿好了。</p><p>（冯学荣评：李鸿章这句也是赌气话，意思是你要打，你去打好了）</p><p>伊藤博文：为什么台湾交接的时间不能提前限定？</p><p>（冯学荣评：伊藤博文其实也不想谈崩，他看自己没吓倒李鸿章，于是语气立马恢复正常，回归商量的口吻）</p><p>李鸿章：这事真不归我管。</p><p>伊藤博文：六个月交接台湾，时间太久了，和平条约换约之后，你们的总理衙门可不可以马上订立章程，说条约一经互换，台湾马上交给日本？</p><p>李鸿章：给是给日本，但是在交接之前，还是需要另行订立交接办法。</p><p>伊藤博文：根本不需要什么交接办法，你们中国只需要将台湾岛内的中国兵全部撤走即可。</p><p>（冯学荣评：伊藤博文很警觉，他知道割让这么大片领土是一件大事，宜迅速解决，不宜长拖，以免夜长梦多，以防各种变数）</p><p>李鸿章：如果说台湾交接不需要章程的话，那么你刚才给我看的细则又是怎么回事?</p><p>伊藤博文：我刚才给您看的细则，只有寥寥几条，而且都是请你们撤兵的，你说台湾要拖延六个月之后才转交给日本，这也太久了吧？</p><p>李鸿章：这样吧好不好，我们换约之后，各自派出代表，议定交接章程。</p><p>伊藤博文：那样的话，我们是不是也要约定一个期限呢?</p><p>李鸿章：不用。</p><p>伊藤博文：和平条约一经换约，台湾马上交接。</p><p>李鸿章：难道就不用订立交接章程吗?</p><p>伊藤博文：限定一个月之内，够了没?</p><p>李鸿章：可以这样定：条约批准互换之后一个月内，中日两国派代表商议台湾交接章程。</p><p>伊藤博文：不行，不是“一个月内商议”，而是“一个月内交接完毕”。</p><p>李鸿章：你刚刚不是说了，贵国会指派文官去台湾，既然这样，贵国为何不指派几个文官，去找中国台湾的巡抚（唐景崧）另行协商交接事宜呢？</p><p>图：唐景崧</p><p>伊藤博文：我让（助理）伊东用英文写好：换约之后一个月内，中日两国各派代表，办理台湾交接事宜。</p><p>李鸿章：一个月的时间，太仓促了，总理衙门和我都离台湾很远，不能详细知道地方的情形，最好由中国的台湾巡抚和日本的代表在台湾商议交接办法，（马关）条约一经签署，中日两国就是友好国家，有什么事情不能商量的呢?</p><p>伊藤博文：一个月内交接，完全足够了。</p><p>李鸿章：台湾交接一事，其实很繁琐的，至少要两个月的时间才够，这样办事才能稳妥，贵国何必这样猴急呢？台湾已经是你们的口中之物。</p><p>伊藤博文：口中之物又怎么样？要咽下去才算，只要没咽下去一天，我们都是饿得慌。</p><p>李鸿章：我们都赔你们两亿两白银了，足够你们填饱肚子、撑一段时间了，换约之后，我们还需要请旨、指派官员交接，一个月的时间，确实是太过于仓促了。</p><p>伊藤博文：可以在条约里写明：一个月之内，请旨派人办理交接等等。</p><p>李鸿章：请旨这些敏感字，就不要写进条约了。</p><p>伊藤博文：你们一个月派出官员办理交接，能不能做到?</p><p>李鸿章：我们一个月内派出官员没有问题，但是具体的交接事宜，还是需要中国台湾的巡抚（唐景崧）来酌情裁定。</p><p>（冯学荣评：李鸿章多次将台湾交接事宜推给台湾巡抚，一是拖延时间，二是不想管交接事宜，多一事不如少一事）</p><p>伊藤博文：那么我们应当这样写：限两个月之内，台湾交接完毕。</p><p>李鸿章：我们应该写一个月内两国派出代表协商交接，但不必约定多久之内必须要交接完毕。</p><p>伊藤博文：我觉得要写明白，两个月之内台湾必须交接完毕，否则会夜长梦多，我不想节外生枝。</p><p>李鸿章：只需要写明：一个月内，两国指派代表，办理交接，就可以了。</p><p>伊藤博文：不行，要这样写：一个月内，两国指派代表协商交接事宜，两个月内，台湾必须交接完毕。</p><p>李鸿章：要么这样吧，两个月内，两国必须派员协商，并交接完毕。</p><p>伊藤博文：不如这样，一个月派员协商，再过一个月，交接完毕。</p><p>李鸿章：两个月内，中日两国各派代表，将台湾交接完毕。</p><p>伊藤博文：为什么“一个月内派员协商，再一个月内交接完毕”这样不行呢？</p><p>李鸿章：因为我觉得你提的方案不如我提的好：限定两个月以内，两国派员协商、并交接完毕。</p><p>伊藤博文：可以改成这样：条约换约之后，立即派员协商。</p><p>李鸿章：干脆加一条，说关于台湾，本条约批准互换之后，两国立即派人至台湾，并于本条约互换之后两个月内，将台湾交接完毕。</p><p>伊藤博文：行。就按这个办。</p><p>李鸿章：再说这个第六款第三条，说日本国臣民在中国租住客房，中国官员不得干涉，这条的本意是预防中国官员勒索日本商人，但是这样写太模糊了，你比如说日本人在我中国犯罪了，他躲到他住的客房，我们的官难道就不能去抓他了？我觉得这条应该删掉。</p><p>伊藤博文：嗯。这个可以删掉。</p><p>李鸿章：再说第四条，中国海关都用关平银纳税，然而这条说要用库平银，做不到统一，而且你们日本的银元在各个通商口岸，都和墨西哥鹰洋按照市价通用，这一条何必写上？直接整条删了吧。</p><p>伊藤博文：可以全部删掉。</p><p>李鸿章：第五条说日本臣民可以在中国制造一切货物，这个还是不够清晰，因为如果照这样写的话，那么日本人也可以深入中国内地开厂制造，我觉得应该写明日本臣民在通商口岸的城市，制造一切货物，这样才有所限制。</p><p>伊藤博文：（与其随员互相商谈好久，答复可以照李鸿章说的修改）</p><p>李鸿章：第八款说日本要在威海卫保留驻兵，驻兵多少？</p><p>伊藤博文：一万人。</p><p>李鸿章：一万人根本在威海连住的地方都没有。</p><p>伊藤博文：我们会在威海建造兵房。</p><p>李鸿章：刘公岛已经没有多余的地方了。</p><p>伊藤博文：还有地方，在威海卫口子的左边附近，我们的武官一开始的想法是派两万到沈阳，两万到威海。</p><p>李鸿章：这一条里面说驻兵的费用由中国支付，可不可以将这一点删去？以前英国、法国也曾经在我国驻兵，可是都是他们自费的，我们都没有付钱。</p><p>伊藤博文：驻兵由驻在国付费，这是欧洲各国的通例。</p><p>李鸿章：我们已经割地、赔款，而且还要支付利息，因此你们的驻兵费用，应当包含在我们的赔款里面了。</p><p>伊藤博文：你们的赔款是赔的战争支出，驻兵是驻兵的支出，不是一回事。</p><p>李鸿章：这个我们中国负担不起啊。</p><p>伊藤博文：这个应该照欧洲各国的通例办理。</p><p>李鸿章：现在我们是在亚洲，你谈欧洲干什么呢？而且英国法国当年在我国驻兵，我国并未付费，这个我们是有档案可查的。</p><p>伊藤博文：什么时候的事情？</p><p>李鸿章：当年英国部队驻兵在广东、舟山、大沽口等地，就是先例。</p><p>伊藤博文：他们当时驻兵，不是为了赔款抵押的目的。</p><p>李鸿章：英国和法国在同治初年，驻兵在大沽口和上海，都是为了索要赔款的抵押，当年我们中国并没有承担驻兵费用，今天我们的割地赔款大事都已经约好，驻兵费用这种小事，你为何不能让一下呢？</p><p>伊藤博文：这样吧，驻兵如果不满一年的话，费用你们不用出。</p><p>李鸿章：我们所赔给你们的钱，已经是你们日本几年的财政收入，此外又追加了数百万，你何必这样斤斤计较？驻兵费用是很小的一笔钱。</p><p>伊藤博文：本约（指马关条约）何时签订呢？</p><p>李鸿章：只要备好了条约文本，就可以立马签约。</p><p>伊藤博文：这次我们签的条约，英文版本不必签名，我们只需要在中文、日文两个版本上签名就可以了，英文版是为了万一你我双方日后对某一段文字产生误解，就以英文版本为准，为了这个，我们专门写了一个专条，请你过目。</p><p>李鸿章：（看过之后说）这个中文版本没问题。</p><p>伊藤博文：我们准备条约的英文、日文各一式两份，你们准备中文一式两份。</p><p>李鸿章：你们的英文版和日文版，什么时候可以准备好？</p><p>伊藤博文：明天早上就可以准备好，至于威海卫驻兵这一节，我另外写了中文的专条，请你过目。</p><p>李鸿章：（看了之后说）都可以照办，但是必须删去负担驻兵费用这一点。</p><p>伊藤博文：从签约之日起，15天之内，我们换约，怎样?</p><p>李鸿章：批准换约，是（光绪）皇帝的事情，我不能作主，必须请旨之后，才能确定。</p><p>伊藤博文：明天签字的时候，应当约定换约的时限。</p><p>图：清朝与日本代表在马关条约上签字</p><p>李鸿章：我一旦回到天津，就会派人带条约回到北京，送到总理各国事务衙门，然后进呈给皇上，才能够择日批准，这里面要转好多道，我真的很难预先确定期限。</p><p>伊藤博文：条约里面一定要约定好换约期限的。</p><p>李鸿章：条约里可以这样写：本条约签字之后，多则一年，少则六个月，必须换约。</p><p>伊藤博文：这个条约的换约期限，15天就够了。</p><p>李鸿章：我刚刚已经解释过了，这事情要折腾好几道，当然也许也用不了15天，可这个是皇上的事情，我实在是预定不了。</p><p>伊藤博文：我们的皇帝也是这样。</p><p>李鸿章：确实无法在条约里写明。</p><p>伊藤博文：凡是条约，一定要写明换约期限，我们天皇现在人在广岛，马上就可以批准。</p><p>李鸿章：你们皇帝离你近，我的皇帝离我远，不能相比。</p><p>伊藤博文：换约的地点约定在哪里呢？</p><p>李鸿章：应当在北京换约。</p><p>伊藤博文：北京我们没有使臣，如果派人去，还要派兵护送，太不方便。</p><p>李鸿章：这次我来日本谈和，花不少钱，签约之后，中日两国就是友邦，批准换约之后，那就更是和好，这样吧，可以在天津换约，我国历史上换约，向来不是北京就是天津。</p><p>伊藤博文：这不是成例。</p><p>李鸿章：我来贵国议和，贵国派人到我国换约，有来有往，这才是真正的和好。</p><p>伊藤博文：在换约之前，我国在旅顺、大连有二十万的官兵，两个地方都没有兵营可住，现在都住在船上，听候换约了，才能撤兵回国，所以换约的事件，应当越快越好，能不能就在旅顺换约？</p><p>李鸿章：你们的兵现在就可以撤走了，这个条约我们皇上一定会批准的。</p><p>伊藤博文：没有换约一天，我们两国的和平局面，都还不能算定下来。</p><p>李鸿章：为何不能派武官来天津换约？最好派川上（操六？）来。</p><p>伊藤博文：派谁去换约，是天皇决定的，川上未必可以去。</p><p>李鸿章：川上的人比较和气，和我们天津的文武官员关系不错。</p><p>伊藤博文：他恐怕还很难离开部队。</p><p>李鸿章：我们签约之后，肯定不会再打仗的了，川上呆在部队里，也没有什么意义，你们就派川上来吧。</p><p>伊藤博文：万一你们皇帝不批准条约，怎么办？</p><p>李鸿章：这样吧，我们皇上一旦批准了，我马上发电报通知你。此外问你，电报用哪个密码本?</p><p>伊藤博文：电报用英语就可以了，不需要密码，但是何时换约，何地换约，我们要约定。</p><p>李鸿章：这是我们皇上才能决定的事情，我真的定不了。</p><p>伊藤博文：天下所有条约都指定换约期限，这样吧，就以15天为限。</p><p>李鸿章：15天太仓促了，这样吧，一个月，稍微宽松些。</p><p>伊藤博文：我们的官兵人数太多，住一个月，时间太久了。</p><p>李鸿章：就一个月之内吧，可以吗?</p><p>伊藤博文：三个礼拜之内。</p><p>李鸿章：条约从来不见“礼拜”这种字眼。</p><p>伊藤博文：不用“礼拜”这种字眼，可以写“20天”。</p><p>李鸿章：一个月之内。</p><p>伊藤博文：最多20天。</p><p>李鸿章：是否可以确定在天津换约？</p><p>伊藤博文：天津换约我们要派兵护送，不方便。</p><p>李鸿章：派一艘兵船，就可以了。</p><p>伊藤博文：兵船过不了拦江沙，这样吧，烟台换约？</p><p>李鸿章：烟台换约，要请示皇上。</p><p>伊藤博文：必须要约定了换约的地方，条约才能签署。</p><p>李鸿章：天津换约，我现在就可以定。</p><p>伊藤博文：为什么就不能在烟台换呢？</p><p>伊藤博文：签约之后，可以去天津，但是绝对不能生事，此外，所谈的驻兵费用一事，你能否定下来？</p><p>伊藤博文：就如刚刚所谈，在烟台换约，以20天为限，可以吗?</p><p>李鸿章：总是要一个月，时间才够。</p><p>伊藤博文：我猜这个条约应该能批准，可是万一你们皇帝不批准，到时候我们又要开打，所以说你换约是越快越好。</p><p>李鸿章：条约批准绝对没有问题，你放心。</p><p>伊藤博文：总是要约定换约的时限。</p><p>李鸿章：我皇上给我的委任状上说了，如果看了我的条约，觉得没问题，再批准。所以我不能替皇上做主。</p><p>伊藤博文：我天皇给我的委任状不也是这样写吗？</p><p>李鸿章：要皇上批准了条约，才能换约的，总之皇上一旦批准，我会立即发电报告知你。</p><p>伊藤博文：那么就要约定，我要等接到你们皇帝批准的电报了，才能派人过去和你换约。</p><p>李鸿章：你已经说了20天，我的要求也不过是一个月，差也就差10天，并不多。</p><p>伊藤博文：明天签字，后天您启程回国，回到天津之后立马就可以把条约送回北京，其实很快的，要不了多久。</p><p>李鸿章：我回到天津之后，还需要请假，此外派人将条约送到总理各国事务衙门，中国人做事比较啰嗦，限期不要约定太短。</p><p>伊藤博文：这次是打仗讲和，不是平时一般事务可比，所以说越快越好。</p><p>李鸿章：我们平时签约换约的事情，都需要一年以上的时间。</p><p>伊藤博文：去年我们与英国订立新条约，7月17日签字，18日英国皇室就批准了。</p><p>李鸿章：中国的事情，做不到这么快，举例说皇上批准了条约，又要派人去天津，从天津等候坐船到烟台，这些都快不了，这样吧，就听你的，在烟台换约，但是日期得由我来定。</p><p>伊藤博文：20天足够了，你多要10天，我们多花10天的钱，我们有60只兵船在大连，官兵都在船里等候呢。</p><p>李鸿章：依我看，条约一旦签署，你们的兵真的可以调走了。</p><p>伊藤博文：不可以。</p><p>李鸿章：我来到马关，仅仅用了30天，就把和约敲定了下来，算快了，这个条约从天津送到北京，等皇上盖章，然后派人送来天津，然后等船去烟台，这里面耽搁的时间不少，你又何必苦苦催促?</p><p>伊藤博文：你多要10天，太多了。</p><p>李鸿章：这是小事，何必为这个闹得你我不愉快？中国人办事，向来拖沓，例如说我正月十九奉旨，立马加速办理，来到这里也已经是二月廿三了，换约的时限，写明30天之内，我应该不用30天就能办好，你给我限定20天，太短了，万一来不及，我就要失信。</p><p>伊藤博文：西方国家议和，都是皇上自己决定，马上签字敲定的。</p><p>李鸿章：这里是亚洲，何必老拿欧洲说事？总之换约地点我听你的，期限由我说了算。</p><p>伊藤博文：一个月真的太长了。</p><p>李鸿章：驻兵费用这一条，到底能不能删掉？</p><p>伊藤博文：不可以。</p><p>李鸿章：那我也没办法了。</p><p>伊藤博文：你们中国说为难，但是无论如何，至少也要承担一半。</p><p>李鸿章：200万两银子的驻兵支出，太贵了，就算一方一半，也要一百万两，这样吧，我不管你花了多少钱，每年我补贴50万两，全包。</p><p>伊藤博文：50万两，只能养一个营的兵。</p><p>李鸿章：你何必留那么多的兵在我国？我们两国很近，万一需要派兵，马上就可以派来。</p><p>伊藤博文：驻兵是为了保证你们能支付赔款，不是为了别的。</p><p>李鸿章：英国法国当年在我国驻兵都没有要钱，你们应该宽大一点。</p><p>伊藤博文：换约的期限，20天，可以定下来了吗？</p><p>李鸿章：我已经说了，要一个月。</p><p>伊藤博文：太久了，换约应该越快越好，双方都是这样。</p><p>李鸿章：中间有许多折腾耗费时间。</p><p>伊藤博文：20天足够了，烟台很近，如果可以约定20天，我就答应你们兵费50万两的提议，不然就要100万两。</p><p>李鸿章：换约的期限，我真的需要请示皇上。还有那个驻兵费用50万两，应当从换约之日算起。</p><p>伊藤博文：如果你答应20天之内换约的话，可以。</p><p>李鸿章：我真的不能做主。</p><p>伊藤博文：你说一个月可以，为何20天不行呢？</p><p>李鸿章：写明一个月，我自然会为你催促，我们今天开会也好久了，我们互派参赞将条约文字核对一下，后天签字吧。</p><p>伊藤博文：为何不是明天签字？我们明天早上就可以写好。</p><p>李鸿章：我们要明天晚上才能准备好文本，所以后天签约。</p><p>伊藤博文：那么就定后天10点钟吧。</p><p>李鸿章：还是在这里吧，我们当面签约可以吗？</p><p>伊藤博文：可以。但刚刚还有两件事，要决定。</p><p>李鸿章：我回去请示，换约期限，暂时空着。</p><p>（于是李鸿章站起来，伊藤博文又重申要20天换约，才能答应中方只承担50万两银子的驻兵费用，李鸿章说刚刚已经说好了，不必再谈了。告别，当时已经是七点钟）</p><p>（完）</p><p>小公告：为免失联，</p><p>请加冯学荣备用号“有趣灵魂研究所”</p><p>长按扫码  即可关注</p><p>往期精彩文章：</p><p>冯学荣：读点历史，到底有什么用</p><p>冯学荣：为什么历史事实很容易被误传</p><p>冯学荣：我看胡志明这一生</p><p>冯学荣，70年代生人，现居香港，知名作家，读史人，著有《日本为什么侵华》、《亲历北洋》、《不忍面对的真相》、《隐动力》等，是广州番禺奥园城市天地“别等”书吧的常客与形象代言人。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;甲午战争后期，李鸿章代表大清帝国到了日本马关，和伊藤博文进行谈判，二人的谈话，中日双方的速记员均有记录，中方史料名为《马关议和中日谈话录》， 事实上中日双方的记录我都读过，我惊叹双方速记员的精准，彼此都无愧于 “人肉录音机”的称号，中日各自记录的两份谈话录内容基本相符，双方
      
    
    </summary>
    
    
      <category term="甲午战争" scheme="https://xiliangsong.github.io/tags/%E7%94%B2%E5%8D%88%E6%88%98%E4%BA%89/"/>
    
      <category term="李鸿章" scheme="https://xiliangsong.github.io/tags/%E6%9D%8E%E9%B8%BF%E7%AB%A0/"/>
    
      <category term="历史" scheme="https://xiliangsong.github.io/tags/%E5%8E%86%E5%8F%B2/"/>
    
      <category term="晚清" scheme="https://xiliangsong.github.io/tags/%E6%99%9A%E6%B8%85/"/>
    
  </entry>
  
  <entry>
    <title>道以无心度有情，一切方便是修真！ 【转】</title>
    <link href="https://xiliangsong.github.io/2019/08/05//articles/2019/08/05/1564967543187.html/"/>
    <id>https://xiliangsong.github.io/2019/08/05//articles/2019/08/05/1564967543187.html/</id>
    <published>2019-08-05T01:12:23.000Z</published>
    <updated>2019-08-05T01:12:23.000Z</updated>
    
    <content type="html"><![CDATA[<p>转自 微信公众号<a href="[https://mp.weixin.qq.com/s?__biz=MzA3NDQ0NTEwMQ==&mid=2653292085&idx=3&sn=c0074167383b1d210aac00d5c2346fbc&chksm=84ad1e77b3da9761ba73745df62aa53e81bb4d59a67ae49c6fc879470e4b13e7842867bf36bb&mpshare=1&scene=2&srcid=&sharer_sharetime=1564964270959&sharer_shareid=6c775bb09bb777a2285edfceb3bfc2e5&from=timeline&clicktime=1564964340#rd](https://mp.weixin.qq.com/s?__biz=MzA3NDQ0NTEwMQ==&mid=2653292085&idx=3&sn=c0074167383b1d210aac00d5c2346fbc&chksm=84ad1e77b3da9761ba73745df62aa53e81bb4d59a67ae49c6fc879470e4b13e7842867bf36bb&mpshare=1&scene=2&srcid=&sharer_sharetime=1564964270959&sharer_shareid=6c775bb09bb777a2285edfceb3bfc2e5&from=timeline&clicktime=1564964340#rd)">道教</a></p><h2 id="道以无心度有情，一切方便是修真！"><a href="#道以无心度有情，一切方便是修真！" class="headerlink" title="道以无心度有情，一切方便是修真！"></a>道以无心度有情，一切方便是修真！</h2><p>点击蓝字关注👉 <a href="javascript:void(0);" target="_blank" rel="noopener">道教</a> <em>今天</em></p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/xhQFvib781Ivj2xlJlQRUySkUGiacdHNdEdK83V0U9WXRYm0rg8ck55yjUlyFTNDluSyHqBLyucBnwBDEmmyhRPw/640?tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="null"></p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/xhQFvib781Isu9yIas2nMGOL9NFRcMCMEKMDlicicv10J0xllxqtKeZ3OHMblib5VdoVnsibemia4O4bOiav7VTSC0e2w/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="null"></p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/xhQFvib781Isu9yIas2nMGOL9NFRcMCMEfjDOwx79fUQoEsjxMmIkcuT7SxSyuBzJtZ0R0WuF2TPpLdj0MKVMzw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="null"></p><p><img src="https://mmbiz.qpic.cn/mmbiz_gif/xhQFvib781Isu9yIas2nMGOL9NFRcMCMEiaj5GWibibO6Z2bicu7MpGa0B9G6BWgSbn6dV8jze6icic2seKoiaoz6V8K9g/640?wx_fmt=gif&tp=webp&wxfrom=5&wx_lazy=1" alt="null"></p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/xhQFvib781Isu9yIas2nMGOL9NFRcMCME3lfTm9SO20UQFBIica9GrpPdYnRdrapOORYQyoOynHGOTTicGrUsddgw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="null"></p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/xhQFvib781Isu9yIas2nMGOL9NFRcMCMEvChoQO1WlFyEAHg2ia1dPpZq9qEMXtprMqTYzc9pRIvVDB5ukDiaXGaA/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="null"></p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/xhQFvib781Isu9yIas2nMGOL9NFRcMCMEHYm9VpF2hkXj0jlDvUdfQwmLkL9cGUNrYoJiaLrcGTENV1GnhHYBwvQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="null"></p><p>01</p><p>其实我不怎么去写太多关于修行与福报之类的文章，因为自感修行尚浅、福报不够而所悟不深，因而不敢妄论因果福报而乱人视听，如此则罪莫大焉。只不过，每每与人谈天，总会不知不觉将话题往福报上扯。</p><p>今日有个修行的朋友问我，为何他修行数年，生活却未见改变，甚至连老婆都没娶上。说实在的，要在以前，我必定从其八字命理上判断问题的根源。不过，今日对他的劝说却从修行入手。故而，将所言书录之，以飨有缘。</p><p>大凡修行之人，皆有一个共同的特征——谦卑。这位修行的朋友亦如此。他行年34岁，属大龄青年，尚未娶妻。据说，他八年前已开始修行，无论佛道，他博采众长，因而交友广阔。他家境一般，双亲皆年过花甲，上有一兄，成亲多年。唯独他自己却成了父母的牵挂。他相貌不错，除了略显沧桑，其余并无不妥。</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/xhQFvib781Isu9yIas2nMGOL9NFRcMCMEVbCfppkGbjeKGBkicLzaCzCXGpMGbZYj7IFA2ncxtPGrFSE4ohkibiaEg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="null"></p><p>02</p><p>闲聊之中，只听他讲了很多修行理论，也曾亲身实践，但因未曾正式投拜明师，故而至今仍然游身玄门之外。实际上，从头到尾我都不怎么插话，他口若悬河，喋喋不休，我也听得极其认真。只是，我偶尔发现他口无遮拦，后来竟开始说人是非，开始抱怨老天不公，且带有粗俗之语。他的信息量很大，特别是别人的八卦是非，不知从何处打探而来。</p><p>其实，聊着聊着，我似乎看到了他诸事不顺的因果。一个人的修行重在真心、诚心，且一丝不苟，无论言行举止须成为表率，应该以正能量示人，如此才能教化人于无形。八卦是非之语或抱怨之谈或许是事实，然而，挂在嘴边对修行不利，有些事情不可说，有些事情不可多说，否则容易损了自己的德行。天长日久，自己尚未察觉，但福报会偷偷溜走。</p><p>修行之人一般不会有大灾大难，除非是那些道貌岸然而又沽名钓誉的假修行人。其实一个人修行层次的高低和精进程度可以通过其日常生活看出来。红尘中修行，免不了要接触别人、接触社会，在纷繁复杂的俗世生活中，我们会遭遇很多诱惑，如名、利、财、色等。这些诱惑对修行是极为不利的，嘴上说说能抗拒这些诱惑容易，但若身临其境时，就未必能自持了。</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/xhQFvib781Isu9yIas2nMGOL9NFRcMCMEEYjyib5ZbqmhJxkQYw5FtuCLkFuaY5jU3kf81aU7qwzGkFE8rvxAUmw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="null"></p><p>03</p><p>说到修行中的自持，即自律。大多数修行人都是皈依了宗教的，所以，虽然未在宫观接受各种清规戒律，但日常生活中也须注意自持，尽量做到不该争的不争、不该看的不看、不该听的不听、不该说的不说、不该做的不作，不该计较的不计较，如此等等；尽量放下欲望，尤其是杀心、贪心和邪淫心，这是最损害功德的事情。</p><p>一般情况下，红尘中修行，忌口是容易做到的。道教居士除了五荤之外，对其他肉类并未进行严格规定，但既然皈依道教，即不可杀生，亦不可食三净肉，其他辛味食物易损气，所以当忌则忌。素食不是不可，但要圆融，如若因为自己忌口而给别人带来极度不便，这就不太好了。道经讲“一切方便是修真”，用在此处虽然不尽合题意，但大意相同。任何修行，皆以与人方便为上。</p><p>除了吃之外，修行人还需管住嘴巴。有句话说：祸从口出。此言不虚。除了自身造作的罪孽之外，很多大灾小难都与说话有关。话多固然不好，因为很多时候口不择言，言者无意而听者有心，少说话可以尽量避免祸事。要说也可以，多多说自己之过，多褒扬别人之功。多赞扬别人，然后保持谦逊，这不是虚伪，而是做人的根本方法。</p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/xhQFvib781Isu9yIas2nMGOL9NFRcMCMErPK5YHtP4RvGbSSrq5licuTAwYZ4QrKyuibIibtuVhuGrLjmhgDhyVlvw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="null"></p><p>04</p><p>修行人还应该改掉自以为是的毛病。很多人一经修行便开始卖弄自己的学识。听到点风就把它说成雨，并坚持己见，听不进别人的话。说实在的，即便修行了，我们也未必比别人懂得多，比如宗教方面，一个普通的修行人对宗教的了解未必一个研究宗教的人多。我读研之前以为自己对道教的研究已经很深了，可跟导师聊完以后才发现他才是道学方面的专家，无论是老庄哲学、葛洪研究、丹道研究等无一不通，而且还常常进行实证。顿时觉得自惭形秽。</p><p>修行人还需要时时守心。言行多表漏于外，别人都能听到、看到，然而，心却不然。所以，修行就要守住心神，使心不乱，即不乱想。其实，很多人在这方面做得不够，所以容易心动。比如，突然有一个似乎有利可图的机会，或者突然看到一个衣着暴露的女孩，心总会往邪处想。须知，一起心动念，问题就来了，即使再装得若无其事，也无法阻止福报的折损。很多年轻人屡遭坎坷的原因，大多与此有关。所以，做到不动心，不受外物影响，自守内心澄净，是多么重要的事情。</p><p>总而言之，修行中遇到阻碍和坎坷，休怪真师难遇，也休怪修行无用，很多时候，不顺与坎坷都是自己造成的，理应积极自查，这样才能不断精进。切记不可急于求成，不然修一尺而退一丈，就太不值当了。福生无量。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;转自 微信公众号&lt;a href=&quot;[https://mp.weixin.qq.com/s?__biz=MzA3NDQ0NTEwMQ==&amp;mid=2653292085&amp;idx=3&amp;sn=c0074167383b1d210aac00d5c2346fbc&amp;chksm=84ad1e
      
    
    </summary>
    
    
      <category term="道教" scheme="https://xiliangsong.github.io/tags/%E9%81%93%E6%95%99/"/>
    
      <category term="修行" scheme="https://xiliangsong.github.io/tags/%E4%BF%AE%E8%A1%8C/"/>
    
      <category term="修心" scheme="https://xiliangsong.github.io/tags/%E4%BF%AE%E5%BF%83/"/>
    
  </entry>
  
  <entry>
    <title>机器学习法则：（谷歌）机器学习工程最佳实践 【转】</title>
    <link href="https://xiliangsong.github.io/2019/08/05//articles/2019/08/05/1564967346799.html/"/>
    <id>https://xiliangsong.github.io/2019/08/05//articles/2019/08/05/1564967346799.html/</id>
    <published>2019-08-05T01:09:06.000Z</published>
    <updated>2019-08-05T01:09:06.000Z</updated>
    
    <content type="html"><![CDATA[<p>转自 微信公众号<a href="[https://mp.weixin.qq.com/s?__biz=MzA4MTk3ODI2OA==&mid=2650343931&idx=1&sn=3c01965fc8778802e7ad7d3814d812a4&chksm=87811f08b0f6961ee759986bca9dc531462c5212580a63e6d2a39fea8593163741172738d214&scene=0&xtrack=1#rd](https://mp.weixin.qq.com/s?__biz=MzA4MTk3ODI2OA==&mid=2650343931&idx=1&sn=3c01965fc8778802e7ad7d3814d812a4&chksm=87811f08b0f6961ee759986bca9dc531462c5212580a63e6d2a39fea8593163741172738d214&scene=0&xtrack=1#rd)">机器学习AI算法工程</a></p><h2 id="机器学习法则：（谷歌）机器学习工程最佳实践"><a href="#机器学习法则：（谷歌）机器学习工程最佳实践" class="headerlink" title="机器学习法则：（谷歌）机器学习工程最佳实践"></a>机器学习法则：（谷歌）机器学习工程最佳实践</h2><p>机器学习AI算法工程 昨天</p><p>向AI转型的程序员都关注了这个号👇👇👇</p><p>机器学习AI算法工程 公众号：datayx</p><p>这是Martin Zinkevich在NIPS 2016 Workshop 分享的谷歌机器学习实践的四十三条法则《Rules of Machine Learning:Best Practices for ML Engineering》</p><p>Martin Zinkevich google 研究科学家。</p><p>机器学习（ML）最优实践方法，浓缩了其多年技术积累与经验，尤其是YouTube、Google Play和Google+ 等平台背后的ML算法开发、维护经历。谷歌于白皮书中总结了四十三条ML黄金法则，旨在帮助已经掌握了基础知识的开发者少走弯路。</p><h3 id="术语"><a href="#术语" class="headerlink" title="术语"></a>术语</h3><p>实体（Instance)：要对其进行预测的事物</p><p>标签（Label):预测任务的结果</p><p>特征：在预测任务中用到的实体的一个属性</p><p>特征集（feature Column):相关特征的一个集合</p><p>样例（Example):实体（及它的特征）和标签的集合</p><p>模型（Model):关于一个预测任务的一个统计表示。在样例中训练一个模型，然后用这个模型来预测</p><p>指标（metric):你关心的一些东西。有可能直接优化。</p><p>目标（Objective):你的算法尝试去优化的一个指标</p><p>工作流（pipeline):关于一个机器学习算法所有的基础构件。包括从前端收集数据，将数据输入训练数据文件，训练一个或者更多模型，以及将模型导出用于生产。</p><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>要想创造出优秀的产品：</p><p>你需要以一位优秀工程师的身份去运用机器学习，而不是作为一位伟大的机器学习专家（而事实上你并不是）。</p><p>事实上，你所面临的大多数问题都是技术性问题。即便拥有足以媲美机器学习专家的理论知识。要想有所突破，大多数情况下都在依赖示例良好特征而非优秀的机器学习算法。因此，基本方法如下：</p><p>1.确保你的 工作流 各连接端十分可靠</p><ol start="2"><li><p>树立合理的目标</p></li><li><p>添加的常识性特征尽量简单</p></li><li><p>确保你的 工作流 始终可靠</p></li></ol><p>这种方法能带来相当多的盈利，也能在较长时间里令许多人都满意，甚至还可能实现双赢。只有在简单技巧不发挥任何作用的情况下，才考虑使用复杂的一些的方法。方法越复杂，产品最终输出速度慢。</p><p>当所有的简单技巧用完后，很可能就要考虑最前沿机器学习术了。</p><p>本文档主要由四部分组成：</p><h3 id="第一部分：帮助你明白是否到了需要构建一个机器学习系统"><a href="#第一部分：帮助你明白是否到了需要构建一个机器学习系统" class="headerlink" title="第一部分：帮助你明白是否到了需要构建一个机器学习系统"></a>第一部分：帮助你明白是否到了需要构建一个机器学习系统</h3><h3 id="第二部分：部署你的第一个工作流"><a href="#第二部分：部署你的第一个工作流" class="headerlink" title="第二部分：部署你的第一个工作流"></a>第二部分：部署你的第一个工作流</h3><h3 id="第三部分：往工作流增加新特征时的发布和迭代，以及如何评价模型和训练-服务倾斜（training-serving-shew"><a href="#第三部分：往工作流增加新特征时的发布和迭代，以及如何评价模型和训练-服务倾斜（training-serving-shew" class="headerlink" title="第三部分：往工作流增加新特征时的发布和迭代，以及如何评价模型和训练-服务倾斜（training-serving shew)"></a>第三部分：往工作流增加新特征时的发布和迭代，以及如何评价模型和训练-服务倾斜（training-serving shew)</h3><h3 id="第四部分：达到稳定阶段后该继续做什么。"><a href="#第四部分：达到稳定阶段后该继续做什么。" class="headerlink" title="第四部分：达到稳定阶段后该继续做什么。"></a>第四部分：达到稳定阶段后该继续做什么。</h3><p>在机器学习之前</p><h4 id="法则1：不用害怕发布一款没有用到机器学习的产品"><a href="#法则1：不用害怕发布一款没有用到机器学习的产品" class="headerlink" title="法则1：不用害怕发布一款没有用到机器学习的产品"></a>法则1：不用害怕发布一款没有用到机器学习的产品</h4><p>机器学习很酷，但它需要数据。如果不是绝对需要机器学习，那在没有数据前，不要使用它。</p><h4 id="法则2：将度量标准的设计和执行置于首位"><a href="#法则2：将度量标准的设计和执行置于首位" class="headerlink" title="法则2：将度量标准的设计和执行置于首位"></a>法则2：将度量标准的设计和执行置于首位</h4><p>在定义你的机器学习系统将要做什么前，尽可能的记录你当前的系统“足迹”。原因：</p><p>1、在早期，获得系统用户的许可相对容易.</p><p>2、如果你认为某些事在将来会重要，那么最好是从现在开始就收集历史数据</p><p>3、如果你设计系统时，就已经在心里有度量指标，那么将来一切就会更加的顺畅。特别是你肯定不想为了测量你的指标而需要在日志中执行grep。</p><p>4、你能够注意到什么改变了，什么没有变。比如，假如你想要直接优化每日活跃用户。但是，在你早期对系统的管理中，你可能注意到对用户体验的急剧改变，可能并不会明显的改变这个指标。</p><p>Google Plus团队测量“转发数”（expands per read)、分享数（reshares per read)、点赞数（plus-ones per read)、评论/阅读比（comments/read)、每个用户的评论数、每个用户的分享数等。这些用来在服务时间衡量一篇帖子的质量。同样，有一个能够将用户聚成组，并实验生成统计结果的实验框架很重要。见法则12</p><h4 id="法则3：在机器学习和启发式方法中优先选择机器学习。"><a href="#法则3：在机器学习和启发式方法中优先选择机器学习。" class="headerlink" title="法则3：在机器学习和启发式方法中优先选择机器学习。"></a>法则3：在机器学习和启发式方法中优先选择机器学习。</h4><p>机器学习模型更好更新和更容易管理</p><p>机器学习阶段1：第一条工作流<br>认真对待第一条工作流的基础架构建设。虽然发挥想象力构思模型很有意思，但首先得确保你的工作流是可靠的，这样出了问题才容易发现。</p><h4 id="法则4：第一个模型要简单，基础架构要正确。"><a href="#法则4：第一个模型要简单，基础架构要正确。" class="headerlink" title="法则4：第一个模型要简单，基础架构要正确。"></a>法则4：第一个模型要简单，基础架构要正确。</h4><p>第一个模型对你的产品提高最大，因此它不需要有多神奇。相反，你会碰到比你想象的多的基础架构方面的问题。在别人使用你的神奇的新机器学习系统前，你要决定：</p><p>1、如何为学习算法得到样本</p><p>2、对于你的系统，“好”、“坏”的定义是什么</p><p>3、如何在你的应用中融入你的模型。你可以在线应用你的模型，也可以在离线预先计算好模型，然后将结果保存到表中。比如，你可能想要预分类网页并将结果存入表，也有可能你想直接在线上分类聊天信息。</p><p>选择简单的特征，以能够更容易确保：</p><p>1、这些特征正确应用于学习算法</p><p>2、模型能够学习到合理的权重</p><p>3、这些特征正确应用于服务器模型。</p><p>你的系统如果能够可靠地遵守这三点，你就完成了大多数工作。你的简单模型能够提供基准指标和基准行为，你可以用来测量更加复杂的模型。</p><h4 id="法则5：单独测试基础架构。"><a href="#法则5：单独测试基础架构。" class="headerlink" title="法则5：单独测试基础架构。"></a>法则5：单独测试基础架构。</h4><p>确保基础架构是可测试的。系统的学习部分独立封装，因此所有围绕它的都能测试。</p><h4 id="法则6：复制工作流时留意丢失的数据"><a href="#法则6：复制工作流时留意丢失的数据" class="headerlink" title="法则6：复制工作流时留意丢失的数据"></a>法则6：复制工作流时留意丢失的数据</h4><p>我们有时候会通过复制已经存在的工作流来创建一个新的工作流。在新的工作流中需要的数据，很可能在旧的数据流就丢弃了。比如，仅仅记录那些用户看到过的帖子的数据，那么，如果我们想要建模“为什么一篇特定的帖子没有被用户阅读”时，这些数据就没用了。</p><h4 id="法则7：要么把启发式方法转化为特征，要么在外部处理它们"><a href="#法则7：要么把启发式方法转化为特征，要么在外部处理它们" class="headerlink" title="法则7：要么把启发式方法转化为特征，要么在外部处理它们"></a>法则7：要么把启发式方法转化为特征，要么在外部处理它们</h4><p>机器学习尝试解决的问题通常并不完全是新的。可以利用到很多已有的规则和启发式方法。当你调整机器学习时，这些相同的启发式方法能提供非常有用的帮助。</p><p>监控<br>一般来说，实施良好的警报监控，例如使警报可操作并具有报表页面。</p><h4 id="法则8：了解系统的新鲜度要求"><a href="#法则8：了解系统的新鲜度要求" class="headerlink" title="法则8：了解系统的新鲜度要求"></a>法则8：了解系统的新鲜度要求</h4><p>如果系统是一天前的，性能会降低多少？如果是一个星期前，或者1个季度前的呢？知道这些能够帮助你理解监控的优先级。如果模型一天未更新，你的收入会下降10%，那最好是有个工程师持续不断的关注。大多数广告服务系统每天都有新广告要处理，因此必须每日更新。有些需要频繁更新，有些又不需要，这因不同的应用和场景而定。此外，新鲜度也会因时间而异，特别是你的模型会增加或移除特征时。</p><h4 id="法则9：导出（发布）你的模型前，务必检查各种问题"><a href="#法则9：导出（发布）你的模型前，务必检查各种问题" class="headerlink" title="法则9：导出（发布）你的模型前，务必检查各种问题"></a>法则9：导出（发布）你的模型前，务必检查各种问题</h4><p>将模型导出部署到线上服务。如果这个时候，你的模型出了问题，这就是一个用户看到的问题。但如果是在之前出现问题，那就是一个训练问题，用户并不会发现。</p><p>在导出模型前务必进行完整性的检查。特别是要确保对留存的数据，你的模型能够满足性能。如果对数据感觉有问题，就不用导出模型！很多持续部署模型的团队都会在导出前检测AUC。模型问题出现在导出前，会收到警告邮件，但如果模型问题让用户碰到，就可能需要一纸辞退信了。因此，在影响用户前，最好先等一等，有确定把握后，在导出。</p><h4 id="法则10：注意隐藏性失败"><a href="#法则10：注意隐藏性失败" class="headerlink" title="法则10：注意隐藏性失败"></a>法则10：注意隐藏性失败</h4><p>相对其他类型的系统，机器学习系统出现这种问题的可能性更高。比如关联的某张表不再更新。虽然机器学习还是会照样调整，行为还是表现的很合适，但已经在逐渐衰落。有时候发现了那些已经数月没有更新的表，那这个时候，一个简单的更新要比其他任何改变都能更好的提高性能。比如，由于实现的改变，一个特征的覆盖率会变：比如，开始覆盖90%的样本，突然只能覆盖60%了。google Play做过一个实验，有张表6个月一直不变，仅仅是对这个表更新，就在安装率方面提高了2%。跟踪数据的统计，并且在必要的时候人工检查，你就可以减少这样的错误。</p><h4 id="法则11：给特征指定作者和文档"><a href="#法则11：给特征指定作者和文档" class="headerlink" title="法则11：给特征指定作者和文档"></a>法则11：给特征指定作者和文档</h4><p>如果系统很大，有很多的特征，务必要知道每个特征的创建者或者管理者。如果理解特征的人要离职，务必确保有其他人理解这个特征。尽管很多的特征的名字已基本描述了特征的意义，但对特征有更新详细的描述，比如，它的来源以及其他它能提供什么帮助等，那就更好了。</p><p>你的第一个目标<br>对于你的系统，你有很多关心的指标。但对于你的机器学习算法，通常你需要一个单一目标——你的算法“尝试”去优化的数字。指标和目标的区别是：指标是你的系统报告的任何数字。这可能重要，也可能不重要。</p><h4 id="法则12：不要过分思考你选择直接优化的目标"><a href="#法则12：不要过分思考你选择直接优化的目标" class="headerlink" title="法则12：不要过分思考你选择直接优化的目标"></a>法则12：不要过分思考你选择直接优化的目标</h4><p>你有成千上万关心的指标，这些指标也值得你去测试。但是，在机器学习过程的早期，你会发现，即使你并没有直接去优化，他们也都会上升。比如，你关心点击次数，停留时间以及每日活跃用户数。如果仅优化了点击次数，通常也会看到停留时间增加了。</p><p>所以，当提高所有的指标都不难的时候，就没必要花心思来如何权衡不同的指标。不过过犹不及：不要混淆了你的目标和系统的整体健康度。</p><h4 id="法则13：为你的第一个目标选择一个简单、可观察以及可归因的指标"><a href="#法则13：为你的第一个目标选择一个简单、可观察以及可归因的指标" class="headerlink" title="法则13：为你的第一个目标选择一个简单、可观察以及可归因的指标"></a>法则13：为你的第一个目标选择一个简单、可观察以及可归因的指标</h4><p>有时候你自以为你清楚真实的目标,但随着你对数据的观察，对老系统和新的机器学习系统的分析，你会发现你又想要调整。而且，不同的团队成员对于真实目标并不能达成一致。机器学习的目标必须是能很容易测量的，并且一定是“真实”目标的代言。因此，在简单的机器学习目标上训练，并创建一个“决策层”，以允许你在上面增加额外的逻辑（这些逻辑，越简单越好）来形成最后的排序。</p><p>最容易建模的是那些可以直接观察并可归属到系统的某个动作的用户行为：</p><p>1.排序的链接被点击了吗？</p><p>2.排序的物品被下载了吗？</p><p>3.排序的物品被转发/回复/邮件订阅了吗？</p><p>4.排序的物品被评价了吗？</p><p>5.展示的物品是否被标注为垃圾/色情/暴力？</p><p>最开始要避免对间接效果建模：</p><ol><li><p>用户第2天会来访吗？</p></li><li><p>用户访问时间是多长？</p></li><li><p>每日活跃用户是什么样的？</p></li></ol><p>间接效果是非常重要的指标，在A/B test和发布决定的时候可以使用。</p><p>最后，不要试图让机器学习来回答以下问题：</p><ol><li><p>用户使用你的产品是否开心</p></li><li><p>用户是否有满意的体验</p></li><li><p>产品是否提高了用户的整体幸福感</p></li><li><p>这些是否影响了公司的整体健康度</p></li></ol><p>这些都很重要，但太难评估了。与其如此，不如考虑其他代替的：比如，用户如果高兴，那停留时间就应该更长。如果用户满意，他就会再次造访。</p><h4 id="法则14：从一个可解释的模型开始，使调试更容易。"><a href="#法则14：从一个可解释的模型开始，使调试更容易。" class="headerlink" title="法则14：从一个可解释的模型开始，使调试更容易。"></a>法则14：从一个可解释的模型开始，使调试更容易。</h4><p>线性回归，逻辑回归和泊松回归直接由概率模型激发。每个预测可解释为概率或期望值。这使得他们比那些使用目标来直接优化分类准确性和排序性能的模型要更容易调试。比如，如果训练时的概率和预测时的概率，或者生产系统上的查看到的概率有偏差，那说明存在某种问题。</p><p>比如在线性，逻辑或者泊松回归中，存在数据子集，其中平均预测期望等于平均标记（1-力矩校准或刚刚校准）。如果有一个特征对于每个样例，取值要么为1，有么为0，那为1的那些样例就是校准的。同样，如如果都为1，那所有样例都是校准的。</p><p>通常我们会使用这些概率预测来做决策：比如，按期望值（比如，点击/下载等的概率）对贴排序。但是，要记住，当到了要决定选择使用哪个模型的时候，决策就不仅仅是关于提供给模型的数据的概率性了。</p><h4 id="法则15：在决策层区分垃圾过滤和质量排名"><a href="#法则15：在决策层区分垃圾过滤和质量排名" class="headerlink" title="法则15：在决策层区分垃圾过滤和质量排名"></a>法则15：在决策层区分垃圾过滤和质量排名</h4><p>质量排名是一门艺术，而垃圾过滤是一场战争。那些使用你系统的人非常清楚你采用什么来评价一篇帖子的质量，所以他们会想尽办法来使得他们的帖子具有这些属性。因此，质量排序应该关注对哪些诚实发布的内容进行排序。如果将垃圾邮件排高名次，那质量排序学习器就大打折扣。同理也要将粗俗的内容从质量排序中拿出分开处理。垃圾过滤就是另外一回事。你必须考虑到要生成的特征会经常性的改变。你会输入很多明显的规则到系统中。至少要保证你的模型是每日更新的。同时，要重点考虑内容创建者的信誉问题。</p><h3 id="机器学习阶段二：特征工程"><a href="#机器学习阶段二：特征工程" class="headerlink" title="机器学习阶段二：特征工程"></a>机器学习阶段二：特征工程</h3><p>将训练数据导入学习系统、完成相关感兴趣指标的评估记录以及搭建服务架构，这些都是机器学习系统生命周期的第一阶段非常重要的任务。当已经具有一个可工作的端对端系统，并且构建了单元测试和系统测试，那么，就进入阶段二了。</p><p>在第二阶段，有很多可以很容易就取得的成果。有很多明显能加入系统的特征。因此，在机器学习的第二阶段会涉及到导入尽可能多的特征，并且以最直观地方式组合它们。在此阶段，所有指标应该仍然在上升。将会经常性的发版。这将是一个伟大的时刻，在这个阶段能够吸引很多的工程师来融合所有想要的数据来创建一个了不起的学习系统</p><h4 id="法则16：做好发布和迭代的计划"><a href="#法则16：做好发布和迭代的计划" class="headerlink" title="法则16：做好发布和迭代的计划"></a>法则16：做好发布和迭代的计划</h4><p>不要期望现在发布的这个模型是最后。因此，考虑你给当前这个模型增加的复杂度会不会减慢后续的发布。很多团队一个季度，甚至很多年才发布一个模型。以下是应该发布新模型的三个基本原因：</p><ol><li><p>会不断出现新的特征</p></li><li><p>您正在以新的方式调整规则化和组合旧特征，或者</p></li><li><p>你正在调整目标。</p></li></ol><p>无论如何，对一个模型多点投入总是好的：看看数据反馈示例可以帮助找到新的、旧的以及坏的信号。因此，当你构建你的模型时，想想添加，删除或重组特征是不是很容易。想想创建工作流的新副本并验证其正确性是不是很容易。考虑是否可能有两个或三个副本并行运行。最后，不要担心35的特征16是否会进入此版本的工作流（Finally，don’t worry about whether feature 16 of 35 makes it into this version of the pipeline.）。这些，你都会在下个季度得到。</p><h4 id="法则17：优先考虑哪些直接观察到和可记录的特征，而不是那些习得的特征。"><a href="#法则17：优先考虑哪些直接观察到和可记录的特征，而不是那些习得的特征。" class="headerlink" title="法则17：优先考虑哪些直接观察到和可记录的特征，而不是那些习得的特征。"></a>法则17：优先考虑哪些直接观察到和可记录的特征，而不是那些习得的特征。</h4><p>首先，什么是习得特征？所谓习得特征，就是指外部系统（比如一个无监督聚类系统）生成的特征，或者是学习器自己生成的特征（比如，通过分解模型或者深度学习）。这些特征都有用，但涉及到太多问题，因此不建议在第一个模型中使用。</p><p>如果你使用外部系统来创建一个特征，切记这个系统本身是有自己目标的。而它的目标很可能和你目前的目标不相关。这个外部系统可能已经过时了。如果你从外部 系统更新特征，很可能这个特征的含义已经改变。使用外部系统提供的特征，一定要多加小心。</p><p>分解模型和深度学习模型最主要的问题是它们是非凸的。因此不能找到最优解，每次迭代找到的局部最小都不同。这种不同让人很难判断一个对系统的影响到底是有意义的，还是只是随机的。一个没有深奥特征的模型能够带来非常好的基准性能。只有当这个基准实现后，才考虑更深奥的方法。</p><h4 id="法则18：从不同的上下文环境中提取特征"><a href="#法则18：从不同的上下文环境中提取特征" class="headerlink" title="法则18：从不同的上下文环境中提取特征"></a>法则18：从不同的上下文环境中提取特征</h4><p>通常情况下，机器学习只占到一个大系统中的很小一部分，因此你必须要试着从不同角度审视一个用户行为。比如热门推荐这一场景，一般情况下论坛里“热门推荐”里的帖子都会有许多评论、分享和阅读量，如果利用这些统计数据对模型展开训练，然后对一个新帖子进行优化，就有可能使其成为热门帖子。另一方面，YouTube上自动播放的下一个视频也有许多选择，例如可以根据大部分用户的观看顺序推荐，或者根据用户评分推荐等。总之，如果你将一个用户行为用作模型的标记（label），那么在不同的上下文条件下审视这一行为，可能会得到更丰富的特征（feature），也就更利于模型的训练。需要注意的是这与个性化不同：个性化是确定用户是否在特定的上下文环境中喜欢某一内容，并发现哪些用户喜欢，喜欢的程度如何。</p><h4 id="法则19：尽量选择更具体的特征"><a href="#法则19：尽量选择更具体的特征" class="headerlink" title="法则19：尽量选择更具体的特征"></a>法则19：尽量选择更具体的特征</h4><p>在海量数据的支持下，即使学习数百万个简单的特征也比仅仅学习几个复杂的特征要容易实现。由于被检索的文本标识与规范化的查询并不会提供太多的归一化信息，只会调整头部查询中的标记排序。因此你不必担心虽然整体的数据覆盖率高达90%以上，但针对每个特征组里的单一特征却没有多少训练数据可用的情况。另外，你也可以尝试正则化的方法来增加每个特征所对应的样例数。</p><h4 id="法则20：以合理的方式组合、修改现有的特征"><a href="#法则20：以合理的方式组合、修改现有的特征" class="headerlink" title="法则20：以合理的方式组合、修改现有的特征"></a>法则20：以合理的方式组合、修改现有的特征</h4><p>有很多组合和修改特征的方式。类似TensorFlow的机器学习系统能够通过‘transformations’(转换)来预处理数据。最基本的两种方式是：“离散化”（discretizations）和“交叉”（crosses）</p><p>离散化：将一个值为连续的特征拆分成很多独立的特征。比如年龄，1<del>18作为1个特征，18</del>35作为1个特征等等。不要过分考虑边界，通常基本的分位点就能达到最好。</p><p>交叉：合并多个特征。在TensorFlow的术语中，特征栏是一组相似的特征，比如{男性，女性}，{美国，加拿大，墨西哥}等。这里的交叉是指将两个或多个特征栏合并，例如{男性，女性}×{美国，加拿大，墨西哥}的结果就是一个交叉（a cross），也就构成了一个新的特征栏。假设你利用TensorFlow框架创建了这样一个交叉，其中也就包含了{男性，加拿大}的特征，因此这一特征也就会出现在男性加拿大人的样例中。需要注意的是，交叉方法中合并的特征栏越多，所需要的训练数据量就越大。</p><p>如果通过交叉法生成的特征栏特别庞大，那么就可能引起过拟合。<br>例如，假设你正在进行某种搜索，并且在查询请求和文档中都具有一个包含关键字的特征栏。那么假如你选择用交叉法组合这两个特征栏，这样得到的新特征栏就会非常庞大，它内部包含了许多特征。当这种情况发生在文本搜索场景时，有两种可行的应对方法。最常用的是点乘法（dot product），点乘法最常见的处理方式就是统计查询请求和文档中共同的所有特征词，然后对特征离散化。另一个方法是交集（intersection），比如当且仅当关键词同时出现在文档和查询结果中时，我们才能获取所需的特征。</p><h4 id="法则21：通过线性模型学到的特征权重的数目，大致与数据量成正比"><a href="#法则21：通过线性模型学到的特征权重的数目，大致与数据量成正比" class="headerlink" title="法则21：通过线性模型学到的特征权重的数目，大致与数据量成正比"></a>法则21：通过线性模型学到的特征权重的数目，大致与数据量成正比</h4><p>许多人都认为从一千个样例中并不能得到什么可靠的训练结果，或者由于选择了某种特定的模型，就必须获取一百万个样例，否则就没法展开模型训练。这里需要指出的是，数据量的大小是和需要训练的特征数正相关的：</p><p>1) 假如你在处理一个搜索排名问题，文档和查询请求中包含了数百万个不同的关键词，并且有一千个被标记的样例，那么你应该用上文提到的点乘法处理这些特征。这样就能得到一千个样例，对应了十几个特征。</p><p>2) 如你有一百万个样例，那么通过正则化和特征选择的方式就可以交叉处理文档和查询请求中的特征栏，这可能会产生数百万的特征数，但再次使用正则化可以大大减少冗余特征。这样就可能得到一千万个样例，对应了十万个特征。</p><p>3) 如果你有数十亿或数百亿个样例，那同样可以通过特征选择或正则化的方法交叉处理文档和查询请求中的特征栏。这样就可能得到十亿个样例，对应了一千万个特征。</p><h4 id="法则22：清理不再需要的特征"><a href="#法则22：清理不再需要的特征" class="headerlink" title="法则22：清理不再需要的特征"></a>法则22：清理不再需要的特征</h4><p>不再使用的特征，在技术上就是一个累赘。如果一个特征不再使用，并且也没办法和其他的特征组合，那就清理掉！你必须确保系统清洁，以满足能尽可能快的尝试最有希望得出结果的特征。对于那些清理掉的，如果有天需要，也可以再加回来。</p><p>至于保持和添加什么特征，权衡的一个重要指标是覆盖率。比如，如果某些特征只覆盖了8%的用户，那保留还是不保留都不会带来什么影响。</p><p>另一方面，增删特征时也要考虑其对应的数据量。例如你有一个只覆盖了1%数据的特征，但有90%的包含这一特征的样例都通过了训练，那么这就是一个很好的特征，应该添加。</p><p>对系统的人工分析<br>在进入机器学习第三阶段前，有一些在机器学习课程上学习不到的内容也非常值得关注：如何检测一个模型并改进它。这与其说是门科学，还不如说是一门艺术。这里再介绍几种要避免的反模式（anti-patterns）</p><h4 id="法则23：你并不是一个典型的终端用户"><a href="#法则23：你并不是一个典型的终端用户" class="headerlink" title="法则23：你并不是一个典型的终端用户"></a>法则23：你并不是一个典型的终端用户</h4><p>这可能是让一个团队陷入困境的最简单的方法。虽然fishfooding（只在团队内部使用原型）和dogfooding（只在公司内部使用原型）都有许多优点，但无论哪一种，开发者都应该首先确认这种方式是否符合性能要求。要避免使用一个明显不好的改变，同时，任何看起来合理的产品策略也应该进一步的测试，不管是通过让非专业人士来回答问题，还是通过一个队真实用户的线上实验。这样做的原因主要有两点：</p><p>首先，你离实现的代码太近了。你只会看到帖子的特定的一面，或者你很容易受到情感影响（比如，认知性偏差）。</p><p>其次，作为开发工程师，时间太宝贵。并且有时候还没什么效果。</p><p>如果你真的想要获取用户反馈，那么应该采用用户体验法（user experience methodologies）。在流程早期创建用户角色（详情见Bill Buxton的《Designing User ExperienCES》一书），然后进行可用性测试（详情见Steve Krug的《Do not Make Me Think》一书）。这里的用户角色涉及创建假想用户。例如，如果你的团队都是男性，那设计一个35岁的女性用户角色所带来的效果要比设计几个25~40岁的男性用户的效果强很多。当然，让用户实测产品并观察他们的反应也是很不错的方法。</p><h4 id="法则24：测量模型间的差异"><a href="#法则24：测量模型间的差异" class="headerlink" title="法则24：测量模型间的差异"></a>法则24：测量模型间的差异</h4><p>在将你的模型发布上线前，一个最简单，有时也是最有效的测试是比较你当前的模型和已经交付的模型生产的结果之间的差异。如果差异很小，那不再需要做实验，你也知道你这个模型不会带来什么改变。如果差异很大，那就要继续确定这种改变是不是好的。检查对等差分很大的查询能帮助理解改变的性质（是变好，还是变坏）。但是，前提是一定要确保你的系统是稳定的。确保一个模型和它本身比较，这个差异很小（理想情况应该是无任何差异）。</p><h4 id="法则25：选择模型的时候，实用的性能要比预测能力更重要"><a href="#法则25：选择模型的时候，实用的性能要比预测能力更重要" class="headerlink" title="法则25：选择模型的时候，实用的性能要比预测能力更重要"></a>法则25：选择模型的时候，实用的性能要比预测能力更重要</h4><p>你可能会用你的模型来预测点击率（CTR）。当最终的关键问题是你要使用你的预测的场景。如果你用来对文本排序，那最终排序的质量可不仅仅是预测本身。如果你用来排查垃圾文件，那预测的精度显然更重要。大多数情况下，这两类功能应该是一致的，如果他们存在不一致，则意味着系统可能存在某种小增益。因此，假如一个改进措施可以解决日志丢失的问题，但却造成了系统性能的下降，那就不要采用它。当这种情况频繁发生时，通常应该重新审视你的建模目标。</p><h4 id="法则26：从误差中查找新模式、创建新特征"><a href="#法则26：从误差中查找新模式、创建新特征" class="headerlink" title="法则26：从误差中查找新模式、创建新特征"></a>法则26：从误差中查找新模式、创建新特征</h4><p>假设你的模型在某个样例中预测错误。在分类任务中，这可能是误报或漏报。在排名任务中，这可能是一个正向判断弱于逆向判断的组。但更重要的是，在这个样例中机器学习系统知道它错了，需要修正。如果你此时给模型一个允许它修复的特征，那么模型将尝试自行修复这个错误。</p><p>另一方面，如果你尝试基于未出错的样例创建特征，那么该特征将很可能被系统忽略。例如，假设在谷歌Play商店的应用搜索中，有人搜索“免费游戏”，但其中一个排名靠前的搜索结果却是一款其他App，所以你为其他App创建了一个特征。但如果你将其他App的安装数最大化，即人们在搜索免费游戏时安装了其他App，那么这个其他App的特征就不会产生其应有的效果。</p><p>所以，正确的做法是一旦出现样例错误，那么应该在当前的特征集之外寻找解决方案。例如，如果你的系统降低了内容较长的帖子的排名，那就应该普遍增加帖子的长度。而且也不要拘泥于太具体的细节。例如你要增加帖子的长度，就不要猜测长度的具体含义，而应该直接添加几个相关的特征，交给模型自行处理，这才是最简单有效的方法。</p><h4 id="法则27：尝试量化观察到的异常行为"><a href="#法则27：尝试量化观察到的异常行为" class="headerlink" title="法则27：尝试量化观察到的异常行为"></a>法则27：尝试量化观察到的异常行为</h4><p>有时候团队成员会对一些没有被现有的损失函数覆盖的系统属性感到无能为力，但这时抱怨是没用的，而是应该尽一切努力将抱怨转换成实实在在的数字。比如，如果应用检索展示了太多的不好应用，那就应该考虑人工评审来识别这些应用。如果问题可以量化，接下来就可以将其用作特征、目标或者指标。总之，先量化，再优化</p><h4 id="法则28：注意短期行为和长期行为的差别"><a href="#法则28：注意短期行为和长期行为的差别" class="headerlink" title="法则28：注意短期行为和长期行为的差别"></a>法则28：注意短期行为和长期行为的差别</h4><p>假设你有一个新系统，它可以查看每个doc_id和exact_query，然后根据每个文档的每次查询行为计算其点击率。你发现它的行为几乎与当前系统的并行和A/B测试结果完全相同，而且它很简单，于是你启动了这个系统。却没有新的应用显示，为什么？由于你的系统只基于自己的历史查询记录显示文档，所以不知道应该显示一个新的文档。<br>要了解一个系统在长期行为中如何工作的唯一办法，就是让它只基于当前的模型数据展开训练。这一点非常困难。</p><p>离线训练和实际线上服务间的偏差<br>引起这种偏差的原因有：</p><p>1）训练工作流和服务工作流处理数据的方式不一样；</p><p>2）训练和服务使用的数据不同；</p><p>3）算法和模型间循的一个循环反馈。</p><h4 id="法则29：确保训练和实际服务接近的最好方式是保存服务时间时使用到的那些特征，然后在后续的训练中采用这些特征"><a href="#法则29：确保训练和实际服务接近的最好方式是保存服务时间时使用到的那些特征，然后在后续的训练中采用这些特征" class="headerlink" title="法则29：确保训练和实际服务接近的最好方式是保存服务时间时使用到的那些特征，然后在后续的训练中采用这些特征"></a>法则29：确保训练和实际服务接近的最好方式是保存服务时间时使用到的那些特征，然后在后续的训练中采用这些特征</h4><p>即使你不能对每个样例都这样做，做一小部分也比什么也不做好，这样你就可以验证服务和训练之间的一致性（见规则37）。在谷歌采取了这项措施的团队有时候会对其效果感到惊讶。比如YouTube主页在服务时会切换到日志记录特征，这不仅大大提高了服务质量，而且减少了代码复杂度。目前有许多团队都已经在其基础设施上采用了这种策略。</p><h4 id="法则30：给抽样数据按重要性赋权重，不要随意丢弃它们"><a href="#法则30：给抽样数据按重要性赋权重，不要随意丢弃它们" class="headerlink" title="法则30：给抽样数据按重要性赋权重，不要随意丢弃它们"></a>法则30：给抽样数据按重要性赋权重，不要随意丢弃它们</h4><p>当数据太多的时候，总会忍不住想要丢弃一些，以减轻负担。这绝对是个错误。有好几个团队就因为这样，而引起了不少问题（见规则6）。尽管那些从来没有展示给用户的数据的确可以丢弃，但对于其他的数据，最好还是对重要性赋权。比如如果你绝对以30%的概率对样例X抽样，那最后给它一个10/3的权重。使用重要性加权并不影响规则14中讨论的校准属性。</p><h4 id="法则31：注意在训练和服务时都会使用的表中的数据是可能变化的"><a href="#法则31：注意在训练和服务时都会使用的表中的数据是可能变化的" class="headerlink" title="法则31：注意在训练和服务时都会使用的表中的数据是可能变化的"></a>法则31：注意在训练和服务时都会使用的表中的数据是可能变化的</h4><p>因为表中的特征可能会改变，在训练时和服务时的值不一样，这会造成，哪怕对于相同的文章，你的模型在训练时预测的结果和服务时预测的结果都会不一样。避免这类问题最简单的方式是在服务时将特征写入日志（参阅法则32）。如果表的数据变化的缓慢，你也可以通过每小时或者每天给表建快照的方式来保证尽可能接近的数据。但这也不能完全解决这种问题。</p><h4 id="法则32：尽量在训练工作流和服务工作流间重用代码"><a href="#法则32：尽量在训练工作流和服务工作流间重用代码" class="headerlink" title="法则32：尽量在训练工作流和服务工作流间重用代码"></a>法则32：尽量在训练工作流和服务工作流间重用代码</h4><p>首先需要明确一点：批处理和在线处理并不一样。在线处理中，你必须及时处理每一个请求（比如，必须为每个查询单独查找），而批处理，你可以合并完成。服务时，你要做的是在线处理，而训练是批处理任务。尽管如此，还是有很多可以重用代码的地方。比如说，你可以创建特定于系统的对象，其中的所有联结和查询结果都以人类可读的方式存储，错误也可以被简单地测试。然后，一旦在服务或训练期间收集了所有信息，你就可以通过一种通用方法在这个特定对象和机器学习系统需要的格式之间形成互通，训练和服务的偏差也得以消除。因此，尽量不要在训练时和服务时使用不同的变成语言，毕竟这样会让你没法重用代码。</p><h4 id="法则33：训练采用的数据和测试采用的数据不同（比如，按时间上，如果你用1月5日前的所有的数据训练，那测试数据应该用1月6日及之后的）"><a href="#法则33：训练采用的数据和测试采用的数据不同（比如，按时间上，如果你用1月5日前的所有的数据训练，那测试数据应该用1月6日及之后的）" class="headerlink" title="法则33：训练采用的数据和测试采用的数据不同（比如，按时间上，如果你用1月5日前的所有的数据训练，那测试数据应该用1月6日及之后的）"></a>法则33：训练采用的数据和测试采用的数据不同（比如，按时间上，如果你用1月5日前的所有的数据训练，那测试数据应该用1月6日及之后的）</h4><p>通常，在评测你的模型的时候，采用你训练时用的数据之后生成的数据能更好反映实际线上的结果。因为可能存在每日效应（daily effects）,你可能没有预测实际的点击率和转化率。但AUC应该是接近的。</p><h4 id="法则34：在二进制分类过滤的应用场景中（例如垃圾邮件检测），不要为了纯净的数据做太大的性能牺牲"><a href="#法则34：在二进制分类过滤的应用场景中（例如垃圾邮件检测），不要为了纯净的数据做太大的性能牺牲" class="headerlink" title="法则34：在二进制分类过滤的应用场景中（例如垃圾邮件检测），不要为了纯净的数据做太大的性能牺牲"></a>法则34：在二进制分类过滤的应用场景中（例如垃圾邮件检测），不要为了纯净的数据做太大的性能牺牲</h4><p>一般在过滤应用场景中，反面样例并不会对用户展示。不过假如你的过滤器在服务过程中阻止了75%的反面样例，那么你可能需要从向用户显示的实例中提取额外的训练数据并展开训练。比如说，用户将系统认可的邮件标记为垃圾邮件，那么你可能就需要从中学习。</p><p>但这种方法同时也引入了采样偏差。如果改为在服务期间将所有流量的1%标记为“暂停”，并将所有这样的样例发送给用户，那你就能收集更纯净的数据。现在你的过滤器阻止了至少74％的反面样例，这些样例可以成为训练数据。</p><p>需要注意的是，如果你的过滤器阻止了95%或更多的反面样例，那这种方法可能就不太适用。不过即使如此，如果你想衡量服务的性能，可以选择做出更细致的采样（例如0.1%或0.001%），一万个例子足以准确地估计性能。</p><h4 id="法则35：注意排序问题的固有偏差"><a href="#法则35：注意排序问题的固有偏差" class="headerlink" title="法则35：注意排序问题的固有偏差"></a>法则35：注意排序问题的固有偏差</h4><p>当你彻底改变排序算法时，一方面会引起完全不同的排序结果，另一方面也可能在很大程度上改变算法未来可能要处理的数据。这会引入一些固有偏差，因此你必须事先充分认识到这一点。以下这些方法可以有效帮你优化训练数据。</p><p>1.对涵盖更多查询的特征进行更高的正则化，而不是那些只覆盖单一查询的特征。这种方式使得模型更偏好那些针对个别查询的特征，而不是那些能够泛化到全部查询的特征。这种方式能够帮助阻止非常流行的结果进入不相关查询。这点和更传统的建议不一样，传统建议应该对更独特的特征集进行更高的正则化。</p><p>2.只允许特征具有正向权重，这样一来就能保证任何好特征都会比未知特征合适。</p><p>3.不要有那些仅仅偏文档（document-only）的特征。这是法则1的极端版本。比如，不管搜索请求是什么，即使一个给定的应用程序是当前的热门下载，你也不会想在所有地方都显示它。没有仅仅偏文档类特征，这会很容易实现。</p><h4 id="法则36：避免具有位置特征的反馈回路"><a href="#法则36：避免具有位置特征的反馈回路" class="headerlink" title="法则36：避免具有位置特征的反馈回路"></a>法则36：避免具有位置特征的反馈回路</h4><p>内容的位置会显著影响用户与它交互的可能性。很明显，如果你把一个App置顶，那它一定会更频繁地被点击。处理这类问题的一个有效方法是加入位置特征，即关于页面中的内容的位置特征。假如你用位置类特征训练模型，那模型就会更偏向“1st-position”这类的特征。因而对于那些“1st-position”是True的样例的其他因子（特征），你的模型会赋予更低的权重。而在服务的时候，你不会给任何实体位置特征，或者你会给他们所有相同的默认特征。因为在你决定按什么顺序排序展示前，你已经给定了候选集。</p><p>切记，将任何位置特征和模型的其他特征保持一定的分离是非常重要的。因为位置特征在训练和测试时不一样。理想的模型是位置特征函数和其他特征的函数的和。比如，不要将位置特征和文本特征交叉。</p><h4 id="法则37：测量训练-服务偏差"><a href="#法则37：测量训练-服务偏差" class="headerlink" title="法则37：测量训练/服务偏差"></a>法则37：测量训练/服务偏差</h4><p>很多情况会引起偏差。大致上分为一些几种：</p><p>1.训练数据和测试数据的性能之间的差异。一般来说，这总是存在的，但并不总是坏事。</p><p>2.测试数据和新时间生成数据之间的性能差异。同样，这也总是存在的。你应该调整正则化来最大化新时间数据上的性能。但是，如果这种性能差异很大，那可能说明采用了一些时间敏感性的特征，且模型的性能下降了。</p><p>3.新时间数据和线上数据上的性能差异。如果你将模型应用于训练数据的样例，也应用于相同的服务样例，则它们应该给出完全相同的结果（详见规则5）。因此，如果出现这个差异可能意味着出现了工程上的异常。</p><p>机器学习第三阶段<br>有一些信息暗示第二阶段已经结束。首先，月增长开始减弱。你开始要考虑在一些指标间权衡：在某些测试中，一些指标增长了，而有些却下降了。这将会变得越来越有趣。增长越来越难实现，必须要考虑更加复杂的机器学习。</p><p>警告：相对于前面两个阶段，这部分会有很多开放式的法则。第一阶段和第二阶段的机器学习总是快乐的。当到了第三阶段，团队就不能不去找到他们自己的途径了。</p><h4 id="法则38：如果目标不协调，并成为问题，就不要在新特征上浪费时间"><a href="#法则38：如果目标不协调，并成为问题，就不要在新特征上浪费时间" class="headerlink" title="法则38：如果目标不协调，并成为问题，就不要在新特征上浪费时间"></a>法则38：如果目标不协调，并成为问题，就不要在新特征上浪费时间</h4><p>当达到度量瓶颈，你的团队开始关注 ML 系统目标范围之外的问题。如同之前提到的，如果产品目标没有包括在算法目标之内，你就得修改其中一个。比如说，你也许优化的是点击数、点赞或者下载量，但发布决策还是依赖于人类评估者。</p><h4 id="法则39：模型发布决策是长期产品目标的代理"><a href="#法则39：模型发布决策是长期产品目标的代理" class="headerlink" title="法则39：模型发布决策是长期产品目标的代理"></a>法则39：模型发布决策是长期产品目标的代理</h4><p>艾丽斯有一个降低安装预测逻辑损失的想法。她增加了一个特征，然后逻辑损失下降了。当线上测试的时候，她看到实际的安装率增加了。但当她召集发布复盘会议时，有人指出每日活跃用户数下降了5%。于是团队决定不发布该模型。艾丽斯很失望，但意识到发布决策依赖于多个指标，而仅仅只有一些是机器学习能够直接优化的。</p><p>真实的世界不是网络游戏：这里没有“攻击值”和“血量”来衡量你的产品的健康状况。团队只能靠收集统计数据来有效的预测系统在将来会如何。他们必须关心用户粘性、1 DAU,30 DAU，收入以及广告主的利益。这些 A/B 测试中的指标，实际上只是长期目标的代理：让用户满意、增加用户、让合作方满意还有利润；即便这时你还可以考虑高品质、有使用价值的产品的代理，以及五年后一个繁荣的企业的代理。</p><p>做出发布决策唯一容易的是当所有指标都变好的时候（或者至少没有变化）。当团队在复杂 ML 算法和简单启发式算法之间有选择时；如果简单的启发式算法在这些指标上做得更好；那么应当选择启发式。另外，所有指标数值并没有明确的孰重孰轻。考虑以下更具体的两种情形：</p><p>如果现有系统是 A ，团队不会想要转移到 B。如果现有系统是 B，团队也不会想要转到 A。这看起来与理性决策相抵触：但是，对指标变化的预期情形或许会发生，或许不会。因此任意一种改变都有相当大的风险。每一个指标覆盖了一些团队所关注的风险。但没有指标能覆盖团队的首要关切——“我的产品在五年后会怎样？”</p><p>另一方面，个体更倾向于那些他们能够直接优化的单一目标。大多数机器学习工具也如此。在这样的环境下，一个能够创造新特征的工程师总能够稳定的输出产品发布。有一种叫做多目标学习的机器学习类型开始处理这类问题。比如，给每个目标设定最低界限，然后优化指标的线性组合。但即便如此，也不是所有指标都能轻易表达为 ML 目标：如果一篇文章被点击了，或者一个app被安装了，这可能是只是因为这个内容被展示了。但要想搞清楚为什么一个用户访问你的网站就更难了。如何完整预测一个网站将来是否能成功是一个AI完全（AI-complete）问题。就和计算机视觉或者自然语言处理一样难。</p><h4 id="法则40：保证集成模型（ensemble）的简洁"><a href="#法则40：保证集成模型（ensemble）的简洁" class="headerlink" title="法则40：保证集成模型（ensemble）的简洁"></a>法则40：保证集成模型（ensemble）的简洁</h4><p>接收原始特征、直接对内容排序的统一模型，是最容易理解、最容易修补漏洞的模型。但是，一个集成模型（一个把其他模型得分组合在一起的“模型”）的效果会更好。为保持简洁，每个模型应该要么是一个只接收其他模型的输入的集成模型，要么是一个有多种特征的基础模型，但不能两者皆是。如果你有单独训练、基于其它模型的模型，把它们组合到一起会导致不好的行为。</p><p>只使用简单模型来集成那些仅仅把你的基础模型输出当做输入。你同样想要给这些集成模型加上属性。比如，基础模型生成得分的提高，不应该降低集成模型的分数。另外，如果连入模型在语义上可解释（比如校准了的）就最好了，这样其下层模型的改变不会影响集成模型。此外，强行让下层分类器预测的概率升高，不会降低集成模型的预测概率。</p><h4 id="法则41：当碰到性能瓶颈，与其精炼已有的信息，不如寻找有质量的新信息源"><a href="#法则41：当碰到性能瓶颈，与其精炼已有的信息，不如寻找有质量的新信息源" class="headerlink" title="法则41：当碰到性能瓶颈，与其精炼已有的信息，不如寻找有质量的新信息源"></a>法则41：当碰到性能瓶颈，与其精炼已有的信息，不如寻找有质量的新信息源</h4><p>你已经给用户增加了人工统计属性信息，给文本中的词增加了一些信息，经历了模板探索并且实施了正则化。然后，几乎有好几个季度你的关键指标都没有过提高超过1%了。现在该怎么办？</p><p>现在是到了为完全不同的特征（比如，用户昨天，上周或者去年访问过的文档，或者来自不同属性的数据）构建基础架构的时候了。为你的公司使用维基数据（wikidata）实体或者一些内部的东西（比如谷歌的知识图，Google’s knowledge graph）。你或许需要使用深度学习。开始调整你对投资回报的期望，并作出相应努力。如同所有工程项目，你需要平衡新增加的特征与提高的复杂度。</p><h4 id="法则42：不要期望多样性、个性化、相关性和受欢迎程度之间有紧密联系"><a href="#法则42：不要期望多样性、个性化、相关性和受欢迎程度之间有紧密联系" class="headerlink" title="法则42：不要期望多样性、个性化、相关性和受欢迎程度之间有紧密联系"></a>法则42：不要期望多样性、个性化、相关性和受欢迎程度之间有紧密联系</h4><p>一系列内容的多样性能意味着许多东西，内容来源的多样性最为普遍。个性化意味着每个用户都能获得它自己感兴趣的结果。相关性意味着一个特定的查询对于某个查询总比其他更合适。显然，这三个属性的定义和标准都不相同。</p><p>问题是标准很难打破。</p><p>注意：如果你的系统在统计点击量、耗费时间、浏览数、点赞数、分享数等等，你事实上在衡量内容的受欢迎程度。有团队试图学习具备多样性的个性化模型。为个性化，他们加入允许系统进行个性化的特征（有的特征代表用户兴趣），或者加入多样性（表示该文档与其它返回文档有相同特征的特征，比如作者和内容），然后发现这些特征比他们预想的得到更低的权重（有时是不同的信号）。</p><p>这不意味着多样性、个性化和相关性就不重要。就像之前的规则指出的，你可以通过后处理来增加多样性或者相关性。如果你看到更长远的目标增长了，那至少你可以声称，除了受欢迎度，多样性/相关性是有价值的。你可以继续使用后处理，或者你也可以基于多样性或相关性直接修改你的目标。</p><h4 id="法则43：不同产品中，你的朋友总是同一个，你的兴趣不会如此"><a href="#法则43：不同产品中，你的朋友总是同一个，你的兴趣不会如此" class="headerlink" title="法则43：不同产品中，你的朋友总是同一个，你的兴趣不会如此"></a>法则43：不同产品中，你的朋友总是同一个，你的兴趣不会如此</h4><p>谷歌的 ML 团队 常常把一个预测某产品联系紧密程度（the closeness of a connection in one product）的模型，应用在另一个产品上，然后发现效果很好。另一方面，我见过好几个在产品线的个性化特征上苦苦挣扎的团队。是的，之前看起来它应该能奏效。但现在看来它不会了。有时候起作用的是——用某属性的原始数据来预测另一个属性的行为。即便知道某用户存在另一个属性能凑效的历史，也要记住这一点。比如说，两个产品上用户活动的存在或许就自身说明了问题。</p><p>阅读过本文的人还看了以下：</p><p>分享《深度学习入门:基于Python的理论与实现》高清中文版PDF+源代码</p><p>《21个项目玩转深度学习：基于TensorFlow的实践详解》完整版PDF+附书代码</p><p>《深度学习之pytorch》pdf+附书源码</p><p>李沐大神开源《动手学深度学习》，加州伯克利深度学习（2019春）教材</p><p>笔记、代码清晰易懂！李航《统计学习方法》最新资源全套！</p><p>《神经网络与深度学习》最新2018版中英PDF+源码</p><p>将机器学习模型部署为REST API</p><p>FashionAI服装属性标签图像识别Top1-5方案分享</p><p>重要开源！CNN-RNN-CTC 实现手写汉字识别</p><p>yolo3 检测出图像中的不规则汉字</p><p>同样是机器学习算法工程师，你的面试为什么过不了？</p><p>前海征信大数据算法：风险概率预测</p><p>【Keras】完整实现‘交通标志’分类、‘票据’分类两个项目，让你掌握深度学习图像分类</p><p>VGG16迁移学习，实现医学图像识别分类工程项目</p><p>特征工程(一)</p><p>特征工程(二) :文本数据的展开、过滤和分块</p><p>特征工程(三):特征缩放,从词袋到 TF-IDF</p><p>特征工程(四): 类别特征</p><p>特征工程(五): PCA 降维</p><p>特征工程(六): 非线性特征提取和模型堆叠</p><p>特征工程(七)：图像特征提取和深度学习</p><p>如何利用全新的决策树集成级联结构gcForest做特征工程并打分？</p><p>Machine Learning Yearning 中文翻译稿</p><p>蚂蚁金服2018秋招-算法工程师（共四面）通过</p><p>全球AI挑战-场景分类的比赛源码(多模型融合)</p><p>斯坦福CS230官方指南：CNN、RNN及使用技巧速查（打印收藏）</p><p>python+flask搭建CNN在线识别手写中文网站</p><p>中科院Kaggle全球文本匹配竞赛华人第1名团队-深度学习与特征工程</p><p>不断更新资源</p><p>深度学习、机器学习、数据分析、python</p><p>搜索公众号添加： datayx</p><p>长按图片，识别二维码，点关注</p><p>AI项目体验</p><p><a href="https://loveai.tech" target="_blank" rel="noopener">https://loveai.tech</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;转自 微信公众号&lt;a href=&quot;[https://mp.weixin.qq.com/s?__biz=MzA4MTk3ODI2OA==&amp;mid=2650343931&amp;idx=1&amp;sn=3c01965fc8778802e7ad7d3814d812a4&amp;chksm=87811f
      
    
    </summary>
    
    
      <category term="人工智能" scheme="https://xiliangsong.github.io/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"/>
    
      <category term="谷歌" scheme="https://xiliangsong.github.io/tags/%E8%B0%B7%E6%AD%8C/"/>
    
      <category term="机器学习" scheme="https://xiliangsong.github.io/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>独家 | 你的神经网络不起作用的37个理由（附链接）【转】</title>
    <link href="https://xiliangsong.github.io/2019/08/05//articles/2019/08/05/1564967236202.html/"/>
    <id>https://xiliangsong.github.io/2019/08/05//articles/2019/08/05/1564967236202.html/</id>
    <published>2019-08-05T01:07:16.000Z</published>
    <updated>2019-08-05T01:07:16.000Z</updated>
    
    <content type="html"><![CDATA[<p>转自微信公众号<a href="[https://mp.weixin.qq.com/s?__biz=MzAxMzA2MDYxMw==&mid=2651569204&idx=1&sn=6b000f42b6cf24327d2e5ff1673b3dba&chksm=8057435eb720ca486dff0b85d80ce9daad11aa2505a538ba8c3cfe9082240f8cf20c8659f02c&scene=0&xtrack=1#rd](https://mp.weixin.qq.com/s?__biz=MzAxMzA2MDYxMw==&mid=2651569204&idx=1&sn=6b000f42b6cf24327d2e5ff1673b3dba&chksm=8057435eb720ca486dff0b85d80ce9daad11aa2505a538ba8c3cfe9082240f8cf20c8659f02c&scene=0&xtrack=1#rd)[https://mp.weixin.qq.com/s?__biz=MzAxMzA2MDYxMw==&mid=2651569204&idx=1&sn=6b000f42b6cf24327d2e5ff1673b3dba&chksm=8057435eb720ca486dff0b85d80ce9daad11aa2505a538ba8c3cfe9082240f8cf20c8659f02c&scene=0&xtrack=1#rd](https://mp.weixin.qq.com/s?__biz=MzAxMzA2MDYxMw==&mid=2651569204&idx=1&sn=6b000f42b6cf24327d2e5ff1673b3dba&chksm=8057435eb720ca486dff0b85d80ce9daad11aa2505a538ba8c3cfe9082240f8cf20c8659f02c&scene=0&xtrack=1#rd)">THU数据派</a><br>独家 | 你的神经网络不起作用的37个理由（附链接）<br>THU数据派  今天<br>文章转载自公众号  数据派THU 数据派THU ， 作者 数据派</p><p>作者：Slav Ivanov</p><p>翻译：吴金笛</p><p>校对：丁楠雅</p><p>本文约4400字，建议阅读12分钟。</p><p>本文列举了在搭建神经网络过程中的37个易错点，并给出了解决建议。</p><p>有一个网络已经训练了12个小时。一切看起来都很好：梯度是逐渐变化的，损失在减少。但接下来的预测：都是零，所有的图像背景都没有被检测到。“我做错了什么？”——我问我的电脑，但它没有回答我。</p><p>你从哪里开始检查是否你的模型输出了垃圾（例如，预测输出了平均值，或者它的准确性真的很差)？</p><p>由于许多原因，神经网络可能不会进行训练。在许多调试过程中，我经常发现自己在做同样的检查。我把我的经验和最好的想法整理在这个便利的列表中，希望它们对你也有用。</p><p>[TOC]</p><h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ol><li><p>如何使用本指南？</p></li><li><p>数据集问题</p></li><li><p>数据规范化或增强的问题</p></li><li><p>实现问题</p></li><li><p>训练问题<br>[TOC]</p></li></ol><h2 id="1-如何使用本指南？"><a href="#1-如何使用本指南？" class="headerlink" title="1.如何使用本指南？"></a>1.如何使用本指南？</h2><p>很多方面都可能出错。但是其中一些比其他的更有可能被防范。我通常从以下简短的清单开始，作为紧急的第一反应：</p><ol><li><p>从一个已知适用于这类数据的简单模型开始（例如，图像的VGG）。如果可能，使用标准损失。</p></li><li><p>关闭所有的附加功能，例如正则化和数据增强。</p></li><li><p>如果对一个模型进行微调，要仔细检查预处理，因为它应该与原始模型的训练相同。</p></li><li><p>验证输入数据是否正确。</p></li><li><p>从一个非常小的数据集（2-20个样本）开始。对它进行过度拟合，并逐渐添加更多的数据。</p></li><li><p>开始逐步添加所有被省略的部分：增强/正则化、自定义损失函数、尝试更复杂的模型。</p></li></ol><p>如果上面的步骤没有解决问题，那就根据下面的列表逐一验证。</p><h2 id="2-数据集问题"><a href="#2-数据集问题" class="headerlink" title="2.数据集问题"></a>2.数据集问题</h2><p>1.检查你的输入数据</p><p>检查你向网络输入的数据是否有意义。例如，我不止一次搞混了图像的宽度和高度。有时候，我会错误地输入全0数据。或者我会一遍又一遍地使用相同的批次。因此，打印/显示几批输入和目标输出，以确保它们是正确的。</p><p>2.尝试随机输入</p><p>尝试传入随机数而不是实际数据，看看错误是否相同。如果是这样，这是一个确定的信号，说明你的网络在某个时候将数据转换为了垃圾。试着一层一层或一个操作一个操作的调试看看哪里出错了。</p><ol start="3"><li>检查数据加载程序</li></ol><p>你的数据可能没问题，但是将输入传递到网络的代码可能会出错。在任何操作之前打印并检查第一层的输入。</p><ol start="4"><li>确保输入连接到输出</li></ol><p>检查一些输入样本是否有正确的标签。同时确保对输入样例进行打乱的方式与输出标签的相同。</p><ol start="5"><li>输入和输出之间的关系是否过于随机？</li></ol><p>也许与随机部分相比，输入输出关系中的非随机部分太小了（人们可能认为股价就是这样的）。即输入与输出不充分相关。没有一种通用的方法来检测这一点，因为这取决于数据的性质。</p><ol start="6"><li>数据集中是否有太多噪音？</li></ol><p>当我从一个食品网站上抓取一个图像数据集时，这种情况发生在我身上。有很多网络无法学习的不好的标签。手动检查一批输入样本，看看标签是否正常。</p><p>截止点是有争议的，因为此文（<a href="https://arxiv.org/pdf/1412.6596.pdf）使用50％损坏的标签使MNIST的准确度达到50％以上。" target="_blank" rel="noopener">https://arxiv.org/pdf/1412.6596.pdf）使用50％损坏的标签使MNIST的准确度达到50％以上。</a></p><ol start="7"><li>打乱数据集</li></ol><p>如果你的数据集没有被打乱，并且有一个特定的顺序（按标签排序），这可能会对学习产生负面影响。打乱你的数据集以避免这种情况。确保输入和标签打的乱顺序相同。</p><ol start="8"><li>减少类别不平衡</li></ol><p>是否每个B类图像对应1000个A类图像？那么你可能需要平衡你的损失函数或尝试其他类不平衡方法。（<a href="https://machinelearningmastery.com/tactics-to-combat-imbalanced-classes-in-your-machine-learning-dataset/）" target="_blank" rel="noopener">https://machinelearningmastery.com/tactics-to-combat-imbalanced-classes-in-your-machine-learning-dataset/）</a></p><ol start="9"><li>你有足够的训练样本吗？</li></ol><p>如果你正在从零开始训练一个网络（即不是微调），你可能需要大量的数据。对于图像分类，人们认为每个类需要1000张或更多的图像。</p><p>（<a href="https://stats.stackexchange.com/questions/226672/how-few-training-examples-is-too-few-when-training-a-neural-network/226693#226693）" target="_blank" rel="noopener">https://stats.stackexchange.com/questions/226672/how-few-training-examples-is-too-few-when-training-a-neural-network/226693#226693）</a></p><ol start="10"><li>确保你的批次中不只包含一个标签</li></ol><p>这可能发生在排序的数据集中（即前10k个样本包含相同的类)。通过打乱数据集很容易解决。</p><ol start="11"><li>减少批量大小</li></ol><p>此文（<a href="https://arxiv.org/abs/1609.04836）指出，批量较大会降低模型的泛化能力。" target="_blank" rel="noopener">https://arxiv.org/abs/1609.04836）指出，批量较大会降低模型的泛化能力。</a></p><p>除了1。使用标准数据集（例如mnist、cifar10）<br>感谢@hengcherkeng:<br>当测试新的网络架构或编写新的代码时，首先使用标准数据集，而不是你自己的数据。这是因为这些数据集有很多参考结果，并且它们被证明是“可解的”。不存在标签噪声、训练/测试分布差异、数据集难度过大等问题。</p><h2 id="3-数据则正则化或增强"><a href="#3-数据则正则化或增强" class="headerlink" title="3.数据则正则化或增强"></a>3.数据则正则化或增强</h2><ol start="12"><li>规范的功能</li></ol><p>你是否将输入标准化为零均值和单位方差？</p><ol start="13"><li>你的数据增强太多了吗？</li></ol><p>增强具有正则化作用。与其他形式的正则化（权重L2、dropout等）结合使用过多会导致网络不匹配。</p><ol start="14"><li>检查预训练模型的预处理</li></ol><p>如果你使用的是预训练模型，请确保使用的规范化和预处理与训练时使用的模型相同。例如，一个图像像素是否应该在[0,1]、[- 1,1]或[0,255]范围内。</p><ol start="15"><li>检查训练/验证/测试集的预处理</li></ol><p>CS231n指出了一个常见的陷阱：</p><p>“…任何预处理统计数据(例如数据平均值)必须只计算在训练数据上，然后应用于验证/测试数据。例如，计算平均值并从整个数据集中的每个图像减去它，然后将数据分割为训练集/验证集/测试集，这是一个错误。”</p><p>此外，检查每个样本或批次的不同预处理。</p><h2 id="4-实现问题"><a href="#4-实现问题" class="headerlink" title="4.实现问题"></a>4.实现问题</h2><ol start="16"><li>试着解决这个问题的简单版本</li></ol><p>这将有助于找到问题所在。例如，如果目标输出是一个对象类和坐标，则尝试将预测限制为对象类。</p><ol start="17"><li>“随机”寻找正确的损失</li></ol><p>同样来自优秀的CS231n：使用小参数初始化，无需正则化。例如，如果我们有10个类，随机意味着我们将在10%的时间内得到正确的类，而Softmax损失是正确类的概率的对数的相反数，所以:-ln(0.1) = 2.302。</p><p>在此之后，尝试增加正则化强度，这会增加损失。</p><ol start="18"><li>检查损失函数</li></ol><p>如果你实现了自己的损失函数，请检查它是否有错误并添加单元测试。通常情况下，我的损失值会略微不正确，并小程度的降低网络的性能。</p><ol start="19"><li>验证损失输入</li></ol><p>如果你正在使用框架提供的损失函数，请确保传递给它的是它所期望的值。例如，在PyTorch中，我将混合NLLLoss和CrossEntropyLoss，因为前者需要一个softmax输入，而后者不需要。</p><p>20.调整损失权重</p><p>如果损失由几个较小的损失函数组成，请确保它们相对于每个损失函数的大小是正确的。这可能需要测试不同的损失权重的组合。</p><ol start="21"><li>监视其他指标</li></ol><p>有时候，损失并不最好的预测器来判断你的网络是否在正常训练。如果可以，请使用其他指标，如准确性。</p><ol start="22"><li>测试任何自定义层</li></ol><p>是否网络中的某一层是你自己实现的？请反复检查以确保它们按预期工作。</p><ol start="23"><li>检查“冻结”层或变量</li></ol><p>检查是否无意中禁用了一些应该被学习的层/变量的梯度更新。</p><ol start="24"><li>增加网络的大小</li></ol><p>也许你的网络的表现力不足以捕获目标功能。尝试在完全连接的层中添加更多层或更多隐藏单元。</p><ol start="25"><li>检查隐藏的维度错误</li></ol><p>如果你的输入是(k, H, W) =(64, 64, 64)，那么很容易忽略与错误维度相关的错误。对输入维使用奇怪的数字（例如，每个维使用不同的素数)，并检查它们如何在网络中传播。</p><ol start="26"><li>进行梯度检查</li></ol><p>如果你手工实现梯度下降，进行梯度检查可以确保你的反向传播能够正常工作。更多信见:<br>1 <a href="http://ufldl.stanford.edu/tutorial/supervised/DebuggingGradientChecking/" target="_blank" rel="noopener">http://ufldl.stanford.edu/tutorial/supervised/DebuggingGradientChecking/</a></p><p>2 <a href="http://cs231n.github.io/neural-networks-3/#gradcheck" target="_blank" rel="noopener">http://cs231n.github.io/neural-networks-3/#gradcheck</a></p><p>3<a href="https://www.coursera.org/lecture/machine-learning/gradient-checking-Y3s6r" target="_blank" rel="noopener">https://www.coursera.org/lecture/machine-learning/gradient-checking-Y3s6r</a></p><h2 id="5-训练问题"><a href="#5-训练问题" class="headerlink" title="5.训练问题"></a>5.训练问题</h2><ol start="27"><li>解决一个非常小的数据集</li></ol><p>对一小部分数据进行过度拟合，并确保其工作正常。例如，只训练1或2个例子，看看你的网络能否学会区分这些。继续对每个类别添加更多的示例。</p><ol start="28"><li>检查权重初始化</li></ol><p>如果不确定，请使用Xavier或He初始化。此外，你的初始化可能会导致错误的局部最小值，因此尝试不同的初始化，看看是否有帮助。</p><ol start="29"><li>更改超参数</li></ol><p>也许你使用了一组特别糟糕的超参数。如果可行，尝试网格搜索。</p><p>30.减少正规化</p><p>过多的正则化会导致网络严重不拟合。减少正则化，如dropout、batch norm、weight/bias L2正则化等。在优秀的“程序员实践深度学习”课程中，Jeremy Howard建议首先摆脱不拟合。这意味着你要对训练数据进行充分的过拟合，然后才能解决过拟合问题。</p><ol start="31"><li>给它时间</li></ol><p>也许你的网络在开始做出有意义的预测之前需要更长的时间来训练。如果你的损失在稳步下降，就再训练更多的时间。</p><ol start="32"><li>从训练模式切换到测试模式</li></ol><p>有些框架具有Batch Norm、Dropout等层，其他层在训练和测试期间的行为有所不同。切换到适当的模式可能有助于你的网络正确预测。</p><ol start="33"><li>可视化训练</li></ol><p>监视每一层的激活、权重和更新。</p><p>确保它们的大小匹配。</p><p>例如，参数更新的大小(权重和偏差)应该是1-e3。</p><p>考虑一个可视化库，比如Tensorboard和Crayon。</p><p>在紧要关头，你还可以打印权重/偏差/激活。</p><p>注意那些平均值远远大于0的层激活。尝试Batch Norm或ELUs。</p><p>Deeplearning4j指出了在权重和偏差的直方图中应该期望什么:</p><p>“对于权重，这些直方图应该在一段时间后具有近似高斯(正态)分布。对于偏差，这些直方图通常从0开始，并且通常以近似高斯分布结束(LSTM是一个例外)。注意那些发散到+/-∞的参数。注意那些非常大的偏移量。如果类别的分布非常不平衡，有时可能会在输出层中进行分类。”</p><p>检查层的更新，他们应该形成一个高斯分布。</p><ol start="34"><li>尝试不同的优化器</li></ol><p>你选择的优化器不应该阻止你的网络进行训练，除非你选择了特别糟糕的超参数。然而，合适的任务优化器有助于在最短的时间内获得最多的训练。该论文指出你正在使用的算法应该指定优化器。如果没有，我倾向于使用Adam或带动量的普通SGD。</p><p>查看这篇由Sebastian Ruder撰写的优秀文章，了解更多关于梯度下降优化器的知识。</p><p><a href="http://ruder.io/optimizing-gradient-descent/" target="_blank" rel="noopener">http://ruder.io/optimizing-gradient-descent/</a></p><ol start="35"><li>爆炸/消失的梯度</li></ol><p>检查层的更新，因为非常大的值可以说明梯度爆炸。梯度剪切可能会有所帮助。</p><p>检查层激活。Deeplearning4j提供了一个很好的指导方针：“激活的良好标准偏差在0.5到2.0之间。明显超出这一范围可能意味着消失或爆炸的激活。”</p><ol start="36"><li>升高/降低学习率</li></ol><p>低学习率将导致你的模型收敛得非常缓慢。</p><p>高学习率会在开始时迅速减少损失，但可能很难找到一个好的解决方案。</p><p>用你目前的学习速度乘以0.1或10来解决问题。</p><ol start="37"><li>克服NaN</li></ol><p>在训练RNN时，据我所知，得到一个NaN（Non-a-Number）是一个更大的问题。一些解决方法：</p><p>降低学习速度，特别是如果你在前100次迭代中得到了NaNs。</p><p>NaNs可以由除以0，或0或负数的自然对数产生。</p><p>Russell Stewart在如何应对NaN中有很好的建议。</p><p><a href="http://get.mysecurify.com/view/item_81593.html" target="_blank" rel="noopener">http://get.mysecurify.com/view/item_81593.html</a></p><p>试着一层一层地评估你的网络，看看NaNs出现在哪里。</p><p>我遗漏什么了吗？有什么错误吗？请在下方留言让我知道。</p><p>嗨，朋友，我是Slav，企业家和开发者。此外，我也是SaaS公司Encharge - marketing automation software的联合创始人。</p><p>原文标题：37 Reasons why your Neural Network is not working<br>原文链接：<a href="https://blog.slavv.com/37-reasons-why-your-neural-network-is-not-working-4020854bd607" target="_blank" rel="noopener">https://blog.slavv.com/37-reasons-why-your-neural-network-is-not-working-4020854bd607</a></p><p>编辑：王菁<br>校对：林亦霖</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;转自微信公众号&lt;a href=&quot;[https://mp.weixin.qq.com/s?__biz=MzAxMzA2MDYxMw==&amp;mid=2651569204&amp;idx=1&amp;sn=6b000f42b6cf24327d2e5ff1673b3dba&amp;chksm=8057435
      
    
    </summary>
    
    
      <category term="深度学习" scheme="https://xiliangsong.github.io/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="人工智能" scheme="https://xiliangsong.github.io/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"/>
    
  </entry>
  
  <entry>
    <title>推荐几个免费漂亮的开源个人网站系统</title>
    <link href="https://xiliangsong.github.io/2019/08/04//articles/2019/08/04/1564908213769.html/"/>
    <id>https://xiliangsong.github.io/2019/08/04//articles/2019/08/04/1564908213769.html/</id>
    <published>2019-08-04T08:43:33.000Z</published>
    <updated>2019-08-04T08:43:33.000Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://www.lazyman.vip/2018/08/26/%E5%85%8D%E8%B4%B9%E5%BC%80%E6%BA%90%E7%BD%91%E7%AB%99%E7%B3%BB%E7%BB%9F%E6%8E%A8%E8%8D%90/#" target="_blank" rel="noopener"></a><a href="https://www.lazyman.vip/" target="_blank" rel="noopener"></a><a href="https://lazymanl.github.io/2016/10/17/%E6%A0%87%E7%AD%BE%E3%80%81%E5%88%86%E7%B1%BB%E3%80%81%E6%89%80%E6%9C%89%E4%BD%9C%E5%93%81%E5%90%88%E9%9B%86/" target="_blank" rel="noopener"></a><a href="https://www.lazyman.vip/2018/01/20/%E4%BD%A0%E5%A5%BD%E3%80%81%E9%99%8C%E7%94%9F%E4%BA%BA/" target="_blank" rel="noopener"></a><a href="https://www.lazyman.vip/2018/01/20/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91%E9%95%BF%E6%9C%9F%E6%9B%B4%E6%96%B0/" target="_blank" rel="noopener"></a><a href="http://lackar.com/aa/?utm_source=mindstore.io" target="_blank" rel="noopener"></a><a href="https://www.lazyman.vip/2018/08/13/%E5%8F%8B%E9%93%BE%E6%8E%A8%E8%8D%90/" target="_blank" rel="noopener"></a><a href="https://www.lazyman.vip/2018/06/15/%E7%9F%A5%E8%AF%86%E7%A4%BE%E7%BE%A4/" target="_blank" rel="noopener"></a><br><a href="https://www.lazyman.vip/2018/08/26/%E6%8E%A8%E8%8D%90%E4%B8%80%E4%B8%AA%E5%8F%AF%E4%BB%A5%E8%B5%9A%E9%92%B1%E7%9A%84%E7%BD%91%E7%9B%98/" target="_blank" rel="noopener"></a><a href="https://www.lazyman.vip/2018/08/14/%E6%97%A0%E7%89%88%E6%9D%83%E5%9B%BE%E7%89%87%E7%B4%A0%E6%9D%90%E7%BD%91%E7%AB%99/" target="_blank" rel="noopener"></a><a href="https://www.lazyman.vip/2018/08/26/%E5%85%8D%E8%B4%B9%E5%BC%80%E6%BA%90%E7%BD%91%E7%AB%99%E7%B3%BB%E7%BB%9F%E6%8E%A8%E8%8D%90/#" target="_blank" rel="noopener"></a><a href="https://www.lazyman.vip/2018/08/26/%E5%85%8D%E8%B4%B9%E5%BC%80%E6%BA%90%E7%BD%91%E7%AB%99%E7%B3%BB%E7%BB%9F%E6%8E%A8%E8%8D%90/#" target="_blank" rel="noopener"></a><br><a href="https://www.lazyman.vip/2018/08/26/%E5%85%8D%E8%B4%B9%E5%BC%80%E6%BA%90%E7%BD%91%E7%AB%99%E7%B3%BB%E7%BB%9F%E6%8E%A8%E8%8D%90/#1%E3%80%81%E5%9F%BA%E4%BA%8E-Java-%E7%9A%84%E4%BF%A1%E6%81%AF%E5%92%A8%E8%AF%A2%E7%BD%91%E7%AB%99-jfinal-cms" target="_blank" rel="noopener"></a><a href="https://www.lazyman.vip/2018/08/26/%E5%85%8D%E8%B4%B9%E5%BC%80%E6%BA%90%E7%BD%91%E7%AB%99%E7%B3%BB%E7%BB%9F%E6%8E%A8%E8%8D%90/#2%E3%80%81%E5%9F%BA%E4%BA%8E-yii2-%E7%9A%84%E5%86%85%E5%AE%B9%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F-FeehiCMS-%E5%9B%BD%E4%BA%A7" target="_blank" rel="noopener"></a><a href="https://www.lazyman.vip/2018/08/26/%E5%85%8D%E8%B4%B9%E5%BC%80%E6%BA%90%E7%BD%91%E7%AB%99%E7%B3%BB%E7%BB%9F%E6%8E%A8%E8%8D%90/#3%E3%80%81%E5%9F%BA%E4%BA%8E-ThinkPHP5-Bootstrap-%E7%9A%84%E5%90%8E%E5%8F%B0%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6-FastAdmin" target="_blank" rel="noopener"></a></p><h1 id="推荐几个免费漂亮的开源个人网站系统"><a href="#推荐几个免费漂亮的开源个人网站系统" class="headerlink" title="推荐几个免费漂亮的开源个人网站系统"></a>推荐几个免费漂亮的开源个人网站系统</h1><p>跨界思者 </p><p>2018-08-26 </p><p>  <a href="https://www.lazyman.vip/tags/%E5%85%A8%E9%83%A8%E6%96%87%E7%AB%A0/" target="_blank" rel="noopener">全部文章</a>, <a href="https://www.lazyman.vip/tags/%E6%8A%80%E6%9C%AF/" target="_blank" rel="noopener">技术</a></p><p><img src="https://i.imgur.com/oxQzLXA.jpg" alt><br>我想很多人应该很想自己搭建一个属于自己的个人网站或者个人博客吧、可是又不会开发又不会码、什么都不会、其实很多网站系统、个人博客系统免费实用漂亮开源的很多、而且都不错、今天我就推荐几款觉得不错的个人开源网站系统和个人博客项目吧！</p><p>我大概的写一下、它们官方文档有安装部署教程、有需要的感兴趣的可以去看一下依葫芦画瓢自己动手才是最靠谱的！我也是这么干的、如果官方文档又看不懂的、自己把这些系统的名字记下来比如去知乎啦、简书、谷歌这类的知识平台搜、应该会有很多教程、所以我只分享、教程我就懒得写了心累、因为早就有人写了告诉你方法自己去折腾！</p><h2 id="1、基于-Java-的信息咨询网站-jfinal-cms"><a href="#1、基于-Java-的信息咨询网站-jfinal-cms" class="headerlink" title="1、基于 Java 的信息咨询网站 jfinal cms"></a><a href="https://www.lazyman.vip/2018/08/26/%E5%85%8D%E8%B4%B9%E5%BC%80%E6%BA%90%E7%BD%91%E7%AB%99%E7%B3%BB%E7%BB%9F%E6%8E%A8%E8%8D%90/#1%E3%80%81%E5%9F%BA%E4%BA%8E-Java-%E7%9A%84%E4%BF%A1%E6%81%AF%E5%92%A8%E8%AF%A2%E7%BD%91%E7%AB%99-jfinal-cms" title="1、基于 Java 的信息咨询网站 jfinal cms" target="_blank" rel="noopener"></a>1、基于 Java 的信息咨询网站 jfinal cms</h2><p>授权协议:Apache</p><p>开发语言:Java »</p><p>操作系统:跨平台</p><hr><p><a href="http://www.jflyfox.com/" target="_blank" rel="noopener">官网首页</a>| <a href="https://gitee.com/jflyfox/jfinal_cms/blob/master/doc/jfinal%20cms%E6%96%87%E6%A1%A3.docx" target="_blank" rel="noopener">官方文档</a>|<a href="https://gitee.com/jflyfox/jfinal_cms" target="_blank" rel="noopener">源码下载地址</a>|</p><p><img src="https://i.imgur.com/gCSQNDP.gif" alt></p><ul><li>jfinal cms 详细介绍</li></ul><p>jfinal cms、采用了简洁强大的JFinal作为web框架、模板引擎用的是beetl、数据库用mysql，前端bootstrap、flat ui等框架。 支持多站点、oauth2认证、帐号注册、密码加密、评论及回复，消息提示，网站访问量统计，文章评论数和浏览量统计，回复管理，权限管理等。</p><p>后台模块包含：栏目管理，栏目公告，栏目滚动图片，文章管理，回复管理，意见反馈，我的相册，相册管理，图片管理，专辑管理、视频管理、缓存更新，友情链接，访问统计，联系人管理，模板管理，组织机构管理，用户管理，角色管理，菜单管理，数据字典管理，站点管理。</p><p>jfinal cms交流群：568909653</p><p>osc@git源码地址：<a href="https://gitee.com/jflyfox/jfinal_cms" target="_blank" rel="noopener">https://gitee.com/jflyfox/jfinal_cms</a></p><p>github源码地址：<a href="https://github.com/jflyfox/jfinal_cms" target="_blank" rel="noopener">https://github.com/jflyfox/jfinal_cms</a></p><p>jfinal cms已经支持了官网、资讯站点、论坛、博客等各类模板，如下：</p><p>默认CMS模板运行效果：<a href="http://mtg.jflyfox.com/" target="_blank" rel="noopener">http://mtg.jflyfox.com/</a></p><p>博客模板运行效果：<a href="http://blog.jflyfox.com/" target="_blank" rel="noopener">http://blog.jflyfox.com/</a></p><p>论坛模板运行效果：<a href="http://bbs.jflyfox.com/" target="_blank" rel="noopener">http://bbs.jflyfox.com/</a></p><p>官网模板运行效果：<a href="http://website.jflyfox.com/" target="_blank" rel="noopener">http://website.jflyfox.com/</a></p><p>项目展示模板运行效果：<a href="http://project.jflyfox.com/" target="_blank" rel="noopener">http://project.jflyfox.com/</a></p><p>相册模板运行效果：<a href="http://photo.jflyfox.com/" target="_blank" rel="noopener">http://photo.jflyfox.com/</a></p><p>视频模板运行效果：<a href="http://video.jflyfox.com/" target="_blank" rel="noopener">http://video.jflyfox.com/</a></p><p>登陆页面：管理员登陆账号密码：admin/admin123</p><p>欢迎页：<a href="http://www.jflyfox.com/" target="_blank" rel="noopener">http://www.jflyfox.com</a></p><p>模板功能：</p><ol><li>系统默认采用单站点模式，各个站点可以在“其他管理”下“站点管理”菜单方便的切换。</li><li>如果使用多站点，可以在“系统管理”下“多站点标示”菜单中，将“多站点标示”项目修改为true。</li><li>多站点需要设置各个站点对应的域名，通过域名解析到不同的站点模板。</li><li>代码生成：通过本人AutoCreate项目可实现代码自动生成功能；新增模板，创建好表以及注释，增删改查排序等功能一键搞定。模板可根据自己项目定制完善。</li></ol><p>详细功能请查看项目doc下文档。</p><ul><li>前台默认模板：</li></ul><p><img src="https://i.imgur.com/Sktqr1P.gif" alt></p><ul><li>支持在线编辑模板：</li></ul><p><img src="https://i.imgur.com/sW0RPlZ.gif" alt></p><p>比我博客的功能插件多多了、感兴趣的去折腾吧、</p><h2 id="2、基于-yii2-的内容管理系统-FeehiCMS-国产"><a href="#2、基于-yii2-的内容管理系统-FeehiCMS-国产" class="headerlink" title="2、基于 yii2 的内容管理系统 FeehiCMS 国产"></a><a href="https://www.lazyman.vip/2018/08/26/%E5%85%8D%E8%B4%B9%E5%BC%80%E6%BA%90%E7%BD%91%E7%AB%99%E7%B3%BB%E7%BB%9F%E6%8E%A8%E8%8D%90/#2%E3%80%81%E5%9F%BA%E4%BA%8E-yii2-%E7%9A%84%E5%86%85%E5%AE%B9%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F-FeehiCMS-%E5%9B%BD%E4%BA%A7" title="2、基于 yii2 的内容管理系统 FeehiCMS  国产" target="_blank" rel="noopener"></a>2、基于 yii2 的内容管理系统 FeehiCMS 国产</h2><p>建站系统CMS<br>授权协议:GPL<br>开发语言:PHP JavaScript HTML/CSS 查看源码»<br>操作系统:跨平台</p><hr><p><a href="http://cms.feehi.com/" target="_blank" rel="noopener">官网首页</a>|<a href="https://gitee.com/liufee/cms" target="_blank" rel="noopener">源码地址</a>|<a href="http://doc.feehi.com/" target="_blank" rel="noopener">开发文档</a>|</p><p><img src="https://i.imgur.com/7vnEDxI.png" alt></p><p>FeehiCMS 详细介绍</p><p>FeehiCMS是基于yii2的CMS系统、运行环境与yii2(php&gt;=5.4)一致。FeehiCMS旨在为yii2爱好者提供一个基础功能完善的CMS系统、使开发者更专注于业务功能开发。 FeehiCMS没有对yii2做任何的修改、封装、但是把yii2的一些优秀特性几乎都用在了FeehiCMS上，对于学习yii2框架提供了良好的实例。</p><p><strong>功能</strong></p><ul><li><p>网站设置</p></li><li><p>前后台菜单</p></li><li><p>文章管理</p></li><li><p>权限管理</p></li><li><p>多语言</p></li><li><p>记录管理员操作日志</p></li><li><p>缓存管理</p></li><li><p>前后台用户</p></li><li><p>restful api</p></li><li><p>单元测试、功能测试、验收测试</p></li></ul><p><strong>快速体验</strong></p><p>使用演示站点 演示站点后台 用户名:feehicms 密码123456</p><ul><li><p>备用演示前台2 <a href="http://php54.demo.cms.qq.feehi.com/" target="_blank" rel="noopener">http://php54.demo.cms.qq.feehi.com</a></p></li><li><p>备用演示后台2 <a href="http://php54.demo.cms.qq.feehi.com/admin" target="_blank" rel="noopener">http://php54.demo.cms.qq.feehi.com/admin</a></p></li><li><p>备用演示api2 <a href="http://php54.demo.cms.qq.feehi.com/api" target="_blank" rel="noopener">http://php54.demo.cms.qq.feehi.com/api</a></p></li><li><p>备用演示前台1 <a href="http://demo.cms.qq.feehi.com/" target="_blank" rel="noopener">http://demo.cms.qq.feehi.com</a></p></li><li><p>备用演示api1 <a href="http://demo.cms.qq.feehi.com/admin" target="_blank" rel="noopener">http://demo.cms.qq.feehi.com/admin</a></p></li><li><p>备用演示后台1 <a href="http://demo.cms.qq.feehi.com/api" target="_blank" rel="noopener">http://demo.cms.qq.feehi.com/api</a></p></li><li><p>swoole演示前台 <a href="http://swoole.demo.cms.qq.feehi.com/" target="_blank" rel="noopener">http://swoole.demo.cms.qq.feehi.com</a></p></li><li><p>swoole演示后台 <a href="http://swoole-admin.demo.cms.qq.feehi.com/" target="_blank" rel="noopener">http://swoole-admin.demo.cms.qq.feehi.com</a></p></li><li><p>后台 <a href="http://demo.cms.feehi.com/admin" target="_blank" rel="noopener">http://demo.cms.feehi.com/admin</a></p></li><li><p>前台 <a href="http://demo.cms.feehi.com/" target="_blank" rel="noopener">http://demo.cms.feehi.com</a></p></li><li><p>api <a href="http://demo.cms.feehi.com/api/articles" target="_blank" rel="noopener">http://demo.cms.feehi.com/api/articles</a></p></li></ul><p>使用Docker容器</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ docker pull registry.cn-hangzhou.aliyuncs.com/liufee/cms</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ docker run --name feehicms -h feehicms -itd -p 80:80 -p 22:22 liufee/cms</span><br></pre></td></tr></table></figure><h2 id="3、基于-ThinkPHP5-Bootstrap-的后台开发框架-FastAdmin"><a href="#3、基于-ThinkPHP5-Bootstrap-的后台开发框架-FastAdmin" class="headerlink" title="3、基于 ThinkPHP5 + Bootstrap 的后台开发框架 FastAdmin"></a><a href="https://www.lazyman.vip/2018/08/26/%E5%85%8D%E8%B4%B9%E5%BC%80%E6%BA%90%E7%BD%91%E7%AB%99%E7%B3%BB%E7%BB%9F%E6%8E%A8%E8%8D%90/#3%E3%80%81%E5%9F%BA%E4%BA%8E-ThinkPHP5-Bootstrap-%E7%9A%84%E5%90%8E%E5%8F%B0%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6-FastAdmin" title="3、基于 ThinkPHP5 + Bootstrap 的后台开发框架 FastAdmin" target="_blank" rel="noopener"></a>3、基于 ThinkPHP5 + Bootstrap 的后台开发框架 FastAdmin</h2><p>授权协议:Apache</p><p>开发语言:PHP JavaScript</p><p>操作系统:跨平台</p><hr><p><a href="https://www.fastadmin.net/" target="_blank" rel="noopener">官网首页</a>|<a href="https://gitee.com/karson/fastadmin" target="_blank" rel="noopener">源码下载</a>|<a href="http://doc.fastadmin.net/" target="_blank" rel="noopener">官方文档</a>|</p><p><img src="https://i.imgur.com/Ke5AtXO.png" alt></p><p><strong>FastAdmin 详细介绍</strong></p><p>FastAdmin是一款基于 ThinkPHP5 + Bootstrap 的极速后台开发框架。<br>主要特性</p><p>基于Auth验证的权限管理系统</p><p>支持无限级父子级权限继承，父级的管理员可任意增删改子级管理员及权限设置</p><p>支持单管理员多角色</p><p>支持目录和控制器结构一键生成权限节点</p><p>完善的前端功能组件开发</p><p>基于AdminLTE二次开发</p><p>基于Bootstrap开发，自适应手机、平板、PC</p><p>基于RequireJS进行JS模块管理，按需加载</p><p>基于Less进行样式开发</p><p>基于Bower进行前端组件包管理</p><p>数据库表一键生成CRUD,包括控制器、模型、视图、JS、语言包</p><p>一键压缩打包JS和CSS文件</p><p>多语言支持，服务端及客户端支持</p><p>无缝整合又拍云上传功能</p><p>第三方登录(QQ、微信、微博)整合</p><p>Ucenter整合</p><p>官网主页</p><p><a href="https://www.fastadmin.net/" target="_blank" rel="noopener">https://www.fastadmin.net</a></p><p>安装使用</p><p><a href="https://doc.fastadmin.net/" target="_blank" rel="noopener">https://doc.fastadmin.net</a></p><p>在线演示<br><a href="https://demo.fastadmin.net/" target="_blank" rel="noopener">https://demo.fastadmin.net</a></p><p>用户名：admin</p><p>密　码：123456</p><p>提　示：演示站数据无法进行删除和修改、只能新增、完整体验请下载源码安装体验</p><p>Copyright © 2019 lazyman</p><ul><li><a href="https://www.lazyman.vip/" target="_blank" rel="noopener">返回主页</a><ul><li><a href="https://lazymanl.github.io/2016/10/17/%E6%A0%87%E7%AD%BE%E3%80%81%E5%88%86%E7%B1%BB%E3%80%81%E6%89%80%E6%9C%89%E4%BD%9C%E5%93%81%E5%90%88%E9%9B%86/" target="_blank" rel="noopener">福利合集</a></li><li><a href="https://www.lazyman.vip/2018/01/20/%E4%BD%A0%E5%A5%BD%E3%80%81%E9%99%8C%E7%94%9F%E4%BA%BA/" target="_blank" rel="noopener">关于博主</a></li><li><a href="https://www.lazyman.vip/2018/01/20/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91%E9%95%BF%E6%9C%9F%E6%9B%B4%E6%96%B0/" target="_blank" rel="noopener">科学上网</a></li><li><a href="http://lackar.com/aa/?utm_source=mindstore.io" target="_blank" rel="noopener">上网导航</a></li><li><a href="https://www.lazyman.vip/2018/08/13/%E5%8F%8B%E9%93%BE%E6%8E%A8%E8%8D%90/" target="_blank" rel="noopener">友链推荐</a></li><li><a href="https://www.lazyman.vip/2018/06/15/%E7%9F%A5%E8%AF%86%E7%A4%BE%E7%BE%A4/" target="_blank" rel="noopener">知识社群</a></li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://www.lazyman.vip/2018/08/26/%E5%85%8D%E8%B4%B9%E5%BC%80%E6%BA%90%E7%BD%91%E7%AB%99%E7%B3%BB%E7%BB%9F%E6%8E%A8%E8%8D%90/#&quot;
      
    
    </summary>
    
    
      <category term="博客系统" scheme="https://xiliangsong.github.io/tags/%E5%8D%9A%E5%AE%A2%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>个人博客网站常用的6个免费开源博客程序CMS系统</title>
    <link href="https://xiliangsong.github.io/2019/08/04//articles/2019/08/04/1564908052933.html/"/>
    <id>https://xiliangsong.github.io/2019/08/04//articles/2019/08/04/1564908052933.html/</id>
    <published>2019-08-04T08:40:53.000Z</published>
    <updated>2019-08-04T08:40:53.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="个人博客网站常用的6个免费开源博客程序CMS系统"><a href="#个人博客网站常用的6个免费开源博客程序CMS系统" class="headerlink" title="个人博客网站常用的6个免费开源博客程序CMS系统"></a>个人博客网站常用的6个免费开源博客程序CMS系统</h1><p>文章分类：<a href="https://www.cnbanwagong.com/yingyong.html" target="_blank" rel="noopener">搬瓦工应用</a> 发布时间：2019年07月05日</p><p>便宜VPS主机活动推送QQ群：<strong><a href="https://jq.qq.com/?_wv=1027&k=531SS8p" target="_blank" rel="noopener">190252490</a></strong> 国内主机推荐：<strong><a href="http://t.cn/AilvJQf8" target="_blank" rel="noopener">腾讯云新人特价活动198/年</a></strong></p><p>早年我们做网站的时候得需要点技术含量的，程序都需要我们自己撰写的。或者我们就老老实实在新浪博客、搜狐、网易博客开通账号直接在上面写博客。不过，如今随着网络的发展，越来越多的高手会开源分享自己撰写的程序。如今我们需要做网站基本上都可以找到免费的程序。比如如果我们需要做个人博客网站的时候，有很多的开源博客程序可以选择，比如WORDPRESS、ZBLOG等等。但是，在这些博客程序中都有什么优缺点呢？</p><p>通过这篇文章，我们<a href="https://www.cnbanwagong.com/" target="_blank" rel="noopener">搬瓦工中文网</a>准备介绍当前市面上主流的一些开源博客程序，可以告诉大家的是每个程序都有各自的用户群，虽然我们知道WordPress前一段时间数据统计他们拥有足够多的用户，但是他也是有缺陷的，为什么不是100%用户选择呢？</p><p><strong>第一、WordPress</strong></p><p><img src="https://www.cnbanwagong.com/zb_users/upload/2019/06/201906291561790721345814.jpg" alt="WordPress"></p><p>目前，WordPress程序是用户量最大的独立博客程序系统，采用PHP+MYSQL架构的，至少需要PHP5.6+支持。大部分网友肯定是使用或者解除过这款程序。有提供丰富的免费主题模板、插件支持，而且基于用户很多，基本上我们需要的功能和问题都可以找到解决方案。</p><p>不过WordPress商家程序还是有缺点的，比如占用系统资源多。而且随着网站的发展如果我们不去加以维护和升级配置，可能会使得网站速度变慢。如果我们需要更好的使用到WP程序，则需要有一定的技术含量的技术支持的。</p><p><strong>第二、ZBLOG</strong></p><p><img src="https://www.cnbanwagong.com/zb_users/upload/2019/06/201906291561791059896831.jpg" alt="ZBLOG"></p><p>早年我们国内比较流行WINDOWS系统主机和服务器的时候，且那时候个人博客也比较流行期间，使用最多的是ZBLOG程序，当然那时候还是ASP+ACCESS数据库架构的。而且那时间有很多知名的个人博主都有使用，可以说ZBLOG程序那ASP时代非常的流行，虽然那时候也有WORDPRESS，但是基本国内很少有人使用。</p><p>只是随着国内主机、服务器，以及国外服务器的盛行。商家提供的WIN服务器比较少，而且成本高，占用资源大，所以大家都相继转型PHP程序。ZBLOG PHP版本目前也有开发出来，使用用户还是比较多的。没有得到较好的发展原因是我们可以看到ZBLOG商家也有提供云平台发布主题和插件，但是大部分都是付费的，所以限制很多用户。</p><p><strong>第三、TYPECHO</strong></p><p><img src="https://www.cnbanwagong.com/zb_users/upload/2019/06/201906291561791274753686.jpg" alt="TYPECHO"></p><p>当初TYPECHO程序开发的背景就是因为很多用户反馈WORDPRESS程序臃肿，而且占用资源大特别不方便。所以那时候才开发出TYPECHO程序，结构目录看似与WP相似，但是可以说非常的轻便。官方虽然更新速度不快，而且商家也有很多计划比如搭建云平台的计划不清楚在实时没有。</p><p>虽然目前TYPECHO程序目前很少有新增功能和升级，但是这也许是这个程序的初衷，有基础的功能就可以。而且我们在论坛可以看到网友热情分享的主题模板和插件。TYPEChp程序适合个人日志博客实用，对于有需要丰富功能或者支持插件的，那不是特别适合，当然我们也可以看到有不少优秀的个人博客实用TYPECHO程序。</p><p>*<em>第四、emlog *</em>  </p><p><img src="https://www.cnbanwagong.com/zb_users/upload/2019/06/201906291561791425172025.jpg" alt="emlog "></p><p>emlog 是 every memory log 的简称，意即：点滴记忆。是一款基于PHP和MySQL的功能强大的博客及CMS建站系统。致力于为您提供快速、稳定，且在使用上又极其简单、舒适的内容创作及站点搭建服务。这个是官方的介绍，实际上这款CMS博客程序使用用户还是蛮多的。官方也有提供不错的主题模板和插件支持，可以看出来用户是比ZBLOG多的，主要是ZBLOG因为付费的主题和插件限制了用户发展。</p><p><strong>第五、Catfish鮸鱼CMS</strong></p><p><img src="https://www.cnbanwagong.com/zb_users/upload/2019/06/201906291561791947621554.jpg" alt="Catfish鮸鱼CMS"></p><p>Catfish鮸鱼CMS程序是一款免费开源的PHP内容管理系统，只是看到版本更新也是比较频繁，而且只需要更换适合个人博客的主题就可以成为一个博客网站，所以也就列举为博客程序之一。官方也有提供免费主题和插件支持。但是估计在博客程序中使用这款软件的不是很多。</p><p><strong>第六、Ghost</strong></p><p><img src="https://www.cnbanwagong.com/zb_users/upload/2019/06/201906291561792130807734.jpg" alt="1.jpg"></p><p>这款轻博客系统在国内有些技术博客中使用还是蛮多的。如果我们实际上是需要运营网站的使用GHOST是不合适的，因为内容撰写和分发是有点问题的，感觉不是特别适合内容型管理。但是如果是用来记录日志技术内容的，是可以使用的，可以显得你的技术很厉害，同类的也有其他。</p><p>总结，如果我们是希望用到个人网站，希望以后运营盈利的，那就需要用到更新频繁的，这样确保程序的稳定。如果我们是用于自己玩玩，那可以选择一些偏门的程序，其他还有很多我们也没有整理的适合个人博客功能的程序。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;个人博客网站常用的6个免费开源博客程序CMS系统&quot;&gt;&lt;a href=&quot;#个人博客网站常用的6个免费开源博客程序CMS系统&quot; class=&quot;headerlink&quot; title=&quot;个人博客网站常用的6个免费开源博客程序CMS系统&quot;&gt;&lt;/a&gt;个人博客网站常用的6个免费开
      
    
    </summary>
    
    
      <category term="免费开源博客程序CMS系统" scheme="https://xiliangsong.github.io/tags/%E5%85%8D%E8%B4%B9%E5%BC%80%E6%BA%90%E5%8D%9A%E5%AE%A2%E7%A8%8B%E5%BA%8FCMS%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>推荐几款优秀的开源博客系统</title>
    <link href="https://xiliangsong.github.io/2019/08/04//articles/2019/08/04/1564907987882.html/"/>
    <id>https://xiliangsong.github.io/2019/08/04//articles/2019/08/04/1564907987882.html/</id>
    <published>2019-08-04T08:39:47.000Z</published>
    <updated>2019-08-04T08:39:47.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="推荐几款优秀的开源博客系统"><a href="#推荐几款优秀的开源博客系统" class="headerlink" title="推荐几款优秀的开源博客系统"></a>推荐几款优秀的开源博客系统</h1><p><a href="http://mhtclub.com/users/1" target="_blank" rel="noopener">不安分的猿人 </a>2月前 ⋅ 134 阅读</p><h2 id="1-OneBlog"><a href="#1-OneBlog" class="headerlink" title="1.OneBlog"></a>1.OneBlog</h2><p>一个简洁美观、功能强大并且自适应的Java博客。</p><p><img src="https://img-blog.csdnimg.cn/20190320163117422.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2h1YWFpcmVu,size_16,color_FFFFFF,t_70" alt><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="null">​</p><p>项目地址：<a href="https://gitee.com/yadong.zhang/DBlog" target="_blank" rel="noopener">https://gitee.com/yadong.zhang/DBlog</a></p><h2 id="2-halo"><a href="#2-halo" class="headerlink" title="2.halo"></a>2.halo</h2><p>Halo 可能是最好的 Java 博客系统。</p><p><img src="https://img-blog.csdnimg.cn/20190314231140301.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2h1YWFpcmVu,size_16,color_FFFFFF,t_70" alt><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="null">​</p><p>项目路径：<a href="https://github.com/halo-dev/halo" target="_blank" rel="noopener">https://github.com/halo-dev/halo</a></p><h2 id="3-mblog开源免费的博客系统"><a href="#3-mblog开源免费的博客系统" class="headerlink" title="3.mblog开源免费的博客系统"></a>3.mblog开源免费的博客系统</h2><p>mblog开源免费的博客系统, Java语言开发, 支持mysql/h2数据库, 采用spring-boot、jpa、shiro、bootstrap等流行框架开发。</p><p><img src="https://img-blog.csdnimg.cn/20190320163204293.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2h1YWFpcmVu,size_16,color_FFFFFF,t_70" alt><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="null">​</p><p>项目地址：<a href="https://gitee.com/mtons/mblog" target="_blank" rel="noopener">https://gitee.com/mtons/mblog</a></p><h2 id="4-solo"><a href="#4-solo" class="headerlink" title="4.solo"></a>4.solo</h2><p>一款小而美的 Java 博客系统，多种皮肤自由切换。</p><p><img src="https://user-images.githubusercontent.com/873584/52255444-85788700-294d-11e9-9c21-8758bad2c3b4.png" alt><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="null">​</p><p>项目地址：<a href="https://gitee.com/dl88250/solo" target="_blank" rel="noopener">https://gitee.com/dl88250/solo</a></p><h2 id="5-Tale"><a href="#5-Tale" class="headerlink" title="5.Tale"></a>5.Tale</h2><p>一款简洁美观的Java博客系统，让每一个有故事的人更好的表达想法！</p><p><img src="http://mhtclub.com/storage/thumbnails/2019/0511/11221418xpye.png" alt="null"></p><p>项目地址：<a href="https://gitee.com/biezhi/tale" target="_blank" rel="noopener">https://gitee.com/biezhi/tale</a> </p><p>做一个愿意分享的程序员，我们一讨论：</p><h3 id><a href="#" class="headerlink" title></a><img src="http://www.mhtclub.com/storage/thumbnails/2019/0425/25223129tnjo.png" alt="null"></h3><p><strong>还有更多的开源博客系统，任你挑选(本篇列的博客系统都是java语言的)</strong>：</p><p><a href="https://gitee.com/smiledog/SuprBlog" target="_blank" rel="noopener">一个基于Spring+SpringMVC+Mybatis+Ehcache+Oscache开发的博客系统</a></p><p><a href="https://github.com/saysky/ForestBlog" target="_blank" rel="noopener">一个简单漂亮的SSM(Spring+SpringMVC+Mybatis)博客系统</a></p><p><a href="https://gitee.com/zhenfeng13/My-Blog" target="_blank" rel="noopener">Tale+Docker+SpringBoot+Mybatis+thymeleaf的开源Java博客系统</a></p><p><a href="https://github.com/LiuJishuai/ssm" target="_blank" rel="noopener">springMVC+Spring+Mybatis框架 ： 简易博客系统demo</a></p><p><a href="https://gitee.com/coodyer/ezone" target="_blank" rel="noopener">Ezone</a></p><p>…..</p><p><strong>推荐</strong></p><p>自己搭建了一套logoly环境，欢迎搭建来体验。</p><p><a href="http://www.mhtclub.com/logoDesign/" target="_blank" rel="noopener">http://www.mhtclub.com/logoDesign/</a></p><p>也欢迎朋友们来我的博客逛逛！</p><p><a href="http://www.mhtclub.com/" target="_blank" rel="noopener">http://www.mhtclub.com</a></p><p><a href="http://www.captainbed.net/blog-mhtclub/" target="_blank" rel="noopener">一位朋友的人工智能教程。零基础，通俗易懂！</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;推荐几款优秀的开源博客系统&quot;&gt;&lt;a href=&quot;#推荐几款优秀的开源博客系统&quot; class=&quot;headerlink&quot; title=&quot;推荐几款优秀的开源博客系统&quot;&gt;&lt;/a&gt;推荐几款优秀的开源博客系统&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;http://mhtclub.co
      
    
    </summary>
    
    
      <category term="开源博客" scheme="https://xiliangsong.github.io/tags/%E5%BC%80%E6%BA%90%E5%8D%9A%E5%AE%A2/"/>
    
  </entry>
  
  <entry>
    <title>接地气又好用，8 款优秀的国产开源博客系统推荐</title>
    <link href="https://xiliangsong.github.io/2019/08/04//articles/2019/08/04/1564907928347.html/"/>
    <id>https://xiliangsong.github.io/2019/08/04//articles/2019/08/04/1564907928347.html/</id>
    <published>2019-08-04T08:38:48.000Z</published>
    <updated>2019-08-04T08:38:48.000Z</updated>
    
    <content type="html"><![CDATA[<p>转自<a href="https://yq.aliyun.com/articles/188016" target="_blank" rel="noopener"><a href="https://yq.aliyun.com/users/xlyqrd2zxlspg" target="_blank" rel="noopener">玄学酱</a></a></p><p>对于程序员来说，除了苦修技术，写博客将开发过程和开发经验记录下来，也是非常有意义的事情。既能帮助自己梳理思绪，也能让其他人避免重复踩坑，还能抛砖引玉，得到更多同行的指点和建议。</p><p>开源的博客系统非常多，其中不乏优秀之作，但最符合本地化需求的，当属国产。接下来，推荐几款优秀的且保持更新的国产开源博客系统。</p><p><strong>1、Solo</strong></p><p>Solo 是一款一个命令就能搭建好的 Java 开源博客系统，包括 Markdown / TinyMCE / KindEditor、自定义导航(页面、链接)、草稿夹、评论/回复邮件提醒、随机文章 / 相关文章 / 置顶 / 更新提醒、多语言、代码高亮等多项实用功能。它还内置了 15+ 套精心制作的皮肤，有自己的活跃社区。</p><p><a href="https://yq.aliyun.com/go/articleRenderRedirect?url=http%3A%2F%2Fs3.51cto.com%2Fwyfs02%2FM00%2F8F%2F2F%2FwKiom1jWV9LRlUgvAAEyRMEEAdM674.jpg-wh_651x-s_181720403.jpg" target="_blank" rel="noopener"><img src="http://s3.51cto.com/wyfs02/M00/8F/2F/wKiom1jWV9LRlUgvAAEyRMEEAdM674.jpg-wh_651x-s_181720403.jpg" alt="接地气又好用，8 款优秀的国产开源博客系统推荐"></a></p><p><strong>2、Tale</strong></p><p>Tale 使用了轻量级mvc框架 Blade 开发，默认主题使用了漂亮的 pinghsu，设计简洁，界面美观，支持多主题和 Emoji 表情，支持网易云音乐播放和数据库备份，以及 Markdown 文章发布，且部署发布简单，不依赖 Tomcat。</p><p><a href="https://yq.aliyun.com/go/articleRenderRedirect?url=http%3A%2F%2Fs2.51cto.com%2Fwyfs02%2FM00%2F8F%2F2D%2FwKioL1jWV-GAe-OOAAHk1TfQX4I407.jpg" target="_blank" rel="noopener"><img src="http://s2.51cto.com/wyfs02/M00/8F/2D/wKioL1jWV-GAe-OOAAHk1TfQX4I407.jpg" alt="接地气又好用，8 款优秀的国产开源博客系统推荐"></a></p><p><strong>3、NiceFish</strong></p><p>NiceFish(美人鱼)是一个微型博客系统，前端基于 Angular 2 + ng2-Bootstrap，后端可以是任意技术。</p><p>NiceFish 的系统管理界面 NiceFish-Admin 和 Java 版后台 NiceFish-SpringMybatis 也在制作当中，NiceFish 用来展示 Angular2 在典型的门户型项目中的用法，NiceFish-Admin 用来展示 Angular2 在后台管理型项目里面的用法，NiceFish-SpringMybatis 用来展示 Angular2 如何与 Java 版的 Server 端进行对接。</p><p><a href="https://yq.aliyun.com/go/articleRenderRedirect?url=http%3A%2F%2Fs3.51cto.com%2Fwyfs02%2FM02%2F8F%2F2D%2FwKioL1jWV-2wyFLKAAHJJDCyNIE767.jpg" target="_blank" rel="noopener"><img src="http://s3.51cto.com/wyfs02/M02/8F/2D/wKioL1jWV-2wyFLKAAHJJDCyNIE767.jpg" alt="接地气又好用，8 款优秀的国产开源博客系统推荐"></a></p><p><strong>4、DUZHI_BLOG</strong></p><p>DUZHI_BLOG 是基于 Jpress 进行更新而来的，在上面做了一系列升级、Bug 修复等等。在基础上增加了用户中心、lucene search 全文搜索引擎等功能，优化了微信渠道内容，避免无法搜索的场景，解决应用型问题，并自带一套与官网一致的主题。</p><p><a href="https://yq.aliyun.com/go/articleRenderRedirect?url=http%3A%2F%2Fs2.51cto.com%2Fwyfs02%2FM01%2F8F%2F2F%2FwKiom1jWV_nxCCmtAADKPBn8ZNs759.jpg" target="_blank" rel="noopener"><img src="http://s2.51cto.com/wyfs02/M01/8F/2F/wKiom1jWV_nxCCmtAADKPBn8ZNs759.jpg" alt="接地气又好用，8 款优秀的国产开源博客系统推荐"></a></p><p><strong>5、PJ Blog</strong></p><p>PJ Blog 是一个使用 Laravel 和 Vue.js 构建的博客系统，支持 Markdown 编辑器、用户管理、文章管理、讨论管理以及文件管理等功能，包含内容审核和评论系统，支持多标签。</p><p><a href="https://yq.aliyun.com/go/articleRenderRedirect?url=http%3A%2F%2Fs5.51cto.com%2Fwyfs02%2FM01%2F8F%2F2D%2FwKioL1jWWATQapg9AAD3zCzp2l4195.jpg" target="_blank" rel="noopener"><img src="http://s5.51cto.com/wyfs02/M01/8F/2D/wKioL1jWWATQapg9AAD3zCzp2l4195.jpg" alt="接地气又好用，8 款优秀的国产开源博客系统推荐"></a></p><p><strong>6、Firekylin</strong></p><p>Firekylin 是一个高效简洁的动态博客系统，整体基于 ThinkJS 框架，后台采用了 React 技术栈。</p><p>Firekylin 提供了丰富的设置，可以尽情个性化自己的博客，比如基本的描述、名称、LOGO设置，阅读设置、评论设置等等。它还将博客模板统一到主题文件夹中，能够自由的切换主题达到修改博客外观的目的。</p><p><a href="https://yq.aliyun.com/go/articleRenderRedirect?url=http%3A%2F%2Fs2.51cto.com%2Fwyfs02%2FM00%2F8F%2F2F%2FwKiom1jWWA_Q8qlzAAFJlFOSrXQ197.jpg" target="_blank" rel="noopener"><img src="http://s2.51cto.com/wyfs02/M00/8F/2F/wKiom1jWWA_Q8qlzAAFJlFOSrXQ197.jpg" alt="接地气又好用，8 款优秀的国产开源博客系统推荐"></a></p><p><strong>7、ZrLog</strong></p><p>ZrLog 是使用 Java 开发的博客系统，具有简约、易用、组件化、内存占用低等特点。自带 Markdown 编辑器，让更多的精力放在写作上，而不是花费大量时间在学习程序的使用上。</p><p>ZrLog 提供日志、分类、标签、评论的管理，支持插件模式，主题高度可定制，还可发表私有文章。</p><p><a href="https://yq.aliyun.com/go/articleRenderRedirect?url=http%3A%2F%2Fs5.51cto.com%2Fwyfs02%2FM02%2F8F%2F2F%2FwKiom1jWWBmzpJFeAAFBYQN8_Ow129.jpg" target="_blank" rel="noopener"><img src="http://s5.51cto.com/wyfs02/M02/8F/2F/wKiom1jWWBmzpJFeAAFBYQN8_Ow129.jpg" alt="接地气又好用，8 款优秀的国产开源博客系统推荐"></a></p><p><strong>8、mblog</strong></p><p>mblog (mtons blog) 是一个简单、大气、美观、支持多端(PC&amp;Mobile&amp;Pad)访问的的多人博客系统，采用 Java 语言开发，基于 MySQL 数据库;具有性能优异、简单实用、安全稳定、支持全文检索的特点。</p><p>mblog 包含标签分类、统计阅读次数、喜爱文章收藏、文章评论、表情回复、第三方(微博、QQ)登录、站内搜索、用户订阅等功能，支持 ueditor/markdown 编辑器切换。</p><p><a href="https://yq.aliyun.com/go/articleRenderRedirect?url=http%3A%2F%2Fs3.51cto.com%2Fwyfs02%2FM02%2F8F%2F2D%2FwKioL1jWWCfAnaKWAAMVRmiLAcg221.jpg" target="_blank" rel="noopener"><img src="http://s3.51cto.com/wyfs02/M02/8F/2D/wKioL1jWWCfAnaKWAAMVRmiLAcg221.jpg" alt="接地气又好用，8 款优秀的国产开源博客系统推荐"></a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;转自&lt;a href=&quot;https://yq.aliyun.com/articles/188016&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;a href=&quot;https://yq.aliyun.com/users/xlyqrd2zxlspg&quot; targ
      
    
    </summary>
    
    
      <category term="开源博客系统" scheme="https://xiliangsong.github.io/tags/%E5%BC%80%E6%BA%90%E5%8D%9A%E5%AE%A2%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>搭建属于自己的ngrok服务器，实现内网穿透，外网访问内网，可本地开发微信不需要上传服务器</title>
    <link href="https://xiliangsong.github.io/2019/08/04//articles/2019/08/04/1564907835669.html/"/>
    <id>https://xiliangsong.github.io/2019/08/04//articles/2019/08/04/1564907835669.html/</id>
    <published>2019-08-04T08:37:15.000Z</published>
    <updated>2019-08-04T08:37:15.000Z</updated>
    
    <content type="html"><![CDATA[<p>转自<a href="https://www.sunnyos.com/article-show-48.html" target="_blank" rel="noopener">Sunny博客</a></p><h1 id="搭建属于自己的ngrok服务器，实现内网穿透，外网访问内网，可本地开发微信不需要上传服务器"><a href="#搭建属于自己的ngrok服务器，实现内网穿透，外网访问内网，可本地开发微信不需要上传服务器" class="headerlink" title="搭建属于自己的ngrok服务器，实现内网穿透，外网访问内网，可本地开发微信不需要上传服务器"></a>搭建属于自己的ngrok服务器，实现内网穿透，外网访问内网，可本地开发微信不需要上传服务器</h1><p><strong>以下为本篇文章全部内容：</strong></p><p>视频教程：<a href="http://video.tudou.com/v/XMTc4ODY3MTg4MA==.html" title="搭建属于自己的ngrok服务器，实现内网穿透，外网访问内网，可本地开发微信不需要上传服务器" target="_blank" rel="noopener">http://video.tudou.com/v/XMTc4ODY3MTg4MA==.html</a></p><pre><code>    ngrok 是一个使用go语言编写的反向代理软件，通过在公共的端点和本地运行的 Web 服务器之间建立一个安全的通道。ngrok 可捕获和分析所有通道上的流量，便于后期分析和重放。在官方网站上面可以注册一个账号自己使用，不需要自己搭建也行，但是缺点就是速度慢，还有经常会连不上，所以我们可以通过自己搭建来解决这些问题。对于想本地开发或者想做内网穿透的话ngrok可以帮你这个忙，我们都知道在微信开发的时候，微信服务器只认80端口，这样导致我们哪怕修改一行代码都得把代码上传到服务器上面，就在传文件的时候就已经浪费了特别的时间了，而如果我们把ngrok用上的话就可以节省很多时间，因为外网完全可以访问到内网的web服务器上，哪怕是你自己的电脑。我之前也做过《[如何通过SocketLog进行web和微信开发调试](http://www.sunnyos.com/article-show-35.html &quot;如何通过SocketLog进行web和微信开发调试&quot;)》的教程，如果把ngrok和SocketLog搭配起来用的话，我们调试起来就更方便了，除了做微信之外，我们在做支付功能的时候，处理异步回调也很麻烦，也得把文件上传到服务器上面去，可我们同样的使用ngrok和SocketLog结合起来用，我们可以不上传代码，也还可以通过浏览器console来查看处理的过程，快速的帮助我们排查错误。准备工作：    1、一台拥有公网ip的服务器或者vps      2、把需要做的主域名解析到服务器上面软件下载地址：go的下载地址：http://www.golangtc.com/downloadgit的下载地址：http://git-scm.com/downloads 绝对下载地址：https://www.kernel.org/pub/software/scm/git/git-2.6.0.tar.gzngrok克隆地址：https://github.com/inconshreveable/ngrok.git准备映射的域名：ngrok.sunnyos.com</code></pre><p> 安装git  </p><p>1、安装git，我安装的是2.6版本，防止会出现另一个错误，安装git所需要的依赖包</p><ol><li>yum -y install zlib-devel openssl-devel perl hg cpio expat-devel gettext-devel curl curl-devel perl-ExtUtils-MakeMaker hg wget gcc gcc-c++</li></ol><p>2、下载git</p><ol><li>wget <a href="https://www.kernel.org/pub/software/scm/git/git-2.6.0.tar.gz" target="_blank" rel="noopener">https://www.kernel.org/pub/software/scm/git/git-2.6.0.tar.gz</a></li></ol><p>3、解压git</p><ol><li>tar zxvf git-2.6.0.tar.gz</li></ol><p>4、编译git</p><ol><li>cd git-2.6.0</li><li>./configure –prefix=/usr/local/git</li><li>make</li><li>make install</li></ol><p>5、创建git的软连接</p><ol><li><p>ln -s /usr/local/git/bin/* /usr/bin/</p><p>安装go环境  </p></li></ol><p>准备go环境，我的系统是32位的centos所以我下载386的包</p><p>1、下载go的软件包</p><ol><li>wget <a href="http://www.golangtc.com/static/go/1.4.2/go1.4.2.linux-386.tar.gz" target="_blank" rel="noopener">http://www.golangtc.com/static/go/1.4.2/go1.4.2.linux-386.tar.gz</a></li></ol><p>2、解压出来可以随便指定位置</p><ol><li>tar -zxvf go1.4.2.linux-386.tar.gz</li><li>mv go /usr/local/</li></ol><p>3、go的命令需要做软连接到/usr/bin</p><ol><li>ln -s /usr/local/go/bin/* /usr/bin/</li></ol><p>编译ngrok</p><ol><li>cd /usr/local/</li><li>git clone <a href="https://github.com/inconshreveable/ngrok.git" target="_blank" rel="noopener">https://github.com/inconshreveable/ngrok.git</a></li><li>export GOPATH=/usr/local/ngrok/</li><li>export NGROK_DOMAIN=”ngrok.sunnyos.com”</li><li>cd ngrok</li></ol><p>为域名生成证书</p><ol><li>openssl genrsa -out rootCA.key 2048</li><li>openssl req -x509 -new -nodes -key rootCA.key -subj “/CN=$NGROK_DOMAIN” -days 5000 -out rootCA.pem</li><li>openssl genrsa -out server.key 2048</li><li>openssl req -new -key server.key -subj “/CN=$NGROK_DOMAIN” -out server.csr</li><li>openssl x509 -req -in server.csr -CA rootCA.pem -CAkey rootCA.key -CAcreateserial -out server.crt -days 5000</li></ol><p>在软件源代码目录下面会生成一些证书文件，我们需要把这些文件拷贝到指定位置</p><ol><li>cp rootCA.pem assets/client/tls/ngrokroot.crt</li><li>cp server.crt assets/server/tls/snakeoil.crt</li><li>cp server.key assets/server/tls/snakeoil.key</li></ol><p>如果是在天朝的服务器需要改，香港或者国外的服务器不需要</p><ol><li>vim /usr/local/ngrok/src/ngrok/log/logger.go</li><li>log “github.com/keepeye/log4go”</li></ol><p>指定编译环境变量，如何确认GOOS和GOARCH，可以通过go env来查看</p><p>编译服务端</p><ol><li>cd /usr/local/go/src</li><li>GOOS=linux GOARCH=386 ./make.bash</li><li>cd /usr/local/ngrok/</li><li>GOOS=linux GOARCH=386 make release-server</li></ol><p>编译客户端，我的是mac os 64位操作系统，所以我的是下面的命令</p><ol><li>cd /usr/local/go/src</li><li>GOOS=darwin GOARCH=amd64 ./make.bash</li><li>cd /usr/local/ngrok/</li><li>GOOS=darwin GOARCH=amd64 make release-client</li></ol><p>Windows的客户端编译</p><ol><li>cd /usr/local/go/src</li><li>GOOS=windows GOARCH=amd64 ./make.bash</li><li>cd /usr/local/ngrok/</li><li>GOOS=windows GOARCH=amd64 make release-client</li></ol><p>客户端配置文件</p><ol><li>server_addr: “ngrok.sunnyos.com:4443”</li><li>trust_host_root_certs: false</li></ol><p>服务端启动</p><ol><li>/usr/local/ngrok/bin/ngrokd -domain=”$NGROK_DOMAIN” -httpAddr=”:80”</li></ol><p>客户端使用</p><ol><li>./ngrok -config=./ngrok.cfg -subdomain=blog 80</li><li>setsid ./ngrok -config=./ngrok.cfg -subdomain=test 80 #在linux下如果想后台运行</li></ol><p>启动成功如下效果</p><p><img src="https://www.sunnyos.com/upfiles/images/201510/0614440669181017.png" alt="搭建属于自己的ngrok服务器，实现内网穿透，外网访问内网，可本地开发微信不需要上传服务器"></p><p>—————————问题总汇，以下非重点，出现问题再看————————–</p><p>出现这个错误说明我们需要安装hg</p><p>package code.google.com/p/log4go: exec: “hg”: executable file not found in $PATH</p><p>解决办法</p><ol><li>yum install hg -y</li></ol><p>编译到 go get gopkg.in/yaml.v1 的时候卡住不走了，说明是git比较低，版本需要大于1.7.9.5以上</p><p>fatal: Unable to find remote helper for ‘https’ 出现这个问题，可以重新安装 curl curl-devel 然后再重装git</p><p>安装git-core</p><ol><li>wget <a href="https://www.kernel.org/pub/software/scm/git/git-core-0.99.6.tar.gz" target="_blank" rel="noopener">https://www.kernel.org/pub/software/scm/git/git-core-0.99.6.tar.gz</a></li><li>tar zxvf git-core-0.99.6.tar.gz</li><li>cd git-core-0.99.6</li><li>make prefix=/usr/libexec/git-core install</li><li>export PATH=$PATH:/usr/libexec/git-core/</li></ol><p>谢谢大家对本博客的支持，本站专注原创技术文章，请尊重原创，杜绝百度上面出现的各种一模一样的帖子，让我们一起努力做更优质的文章。且看且珍惜博主的心得。请转载带上本文链接注明出处。</p><p>如果大家有什么疑问可以加我QQ327388905进行解答，也可以加入交流群</p><p>群二维码</p><p>Sunny博客技术交流群：</p><p><img src="http://www.sunnyos.com/public/home/images/SunnyBlog.png" alt></p><p>ThinkPHP交流群：</p><p><img src="http://www.sunnyos.com/public/home/images/ThinkPHP.png" alt></p><p>Sunny博客技术交流群：57914191 <a href="http://shang.qq.com/wpa/qunwpa?idkey=0fb7a9bf017e8b2c44d0898f99b9b8eb00a03b1af94ffb4bd800495bd3ca40ee" target="_blank" rel="noopener"><img src="http://pub.idqqimg.com/wpa/images/group.png" alt="Sunny博客技术交流群"></a></p><p>ThinkPHP交流群：57914282 <a href="http://shang.qq.com/wpa/qunwpa?idkey=abec7b437ed32fc847b71a4490259e3ac8e92cd8484929191d115bb9ec1e12d4" target="_blank" rel="noopener"><img src="http://pub.idqqimg.com/wpa/images/group.png" alt="ThinkPHP技术交流"></a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;转自&lt;a href=&quot;https://www.sunnyos.com/article-show-48.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Sunny博客&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;搭建属于自己的ngrok服务器，实现内网穿透，外网
      
    
    </summary>
    
    
      <category term="ngrok" scheme="https://xiliangsong.github.io/tags/ngrok/"/>
    
  </entry>
  
  <entry>
    <title>十个你可能不知道的CloudFlare免费CDN加速技巧-SSL\DDOS\Cache</title>
    <link href="https://xiliangsong.github.io/2019/08/04//articles/2019/08/04/1564907257995.html/"/>
    <id>https://xiliangsong.github.io/2019/08/04//articles/2019/08/04/1564907257995.html/</id>
    <published>2019-08-04T08:27:38.000Z</published>
    <updated>2019-08-04T08:27:38.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="十个你可能不知道的CloudFlare免费CDN加速技巧-SSL-DDOS-Cache"><a href="#十个你可能不知道的CloudFlare免费CDN加速技巧-SSL-DDOS-Cache" class="headerlink" title="十个你可能不知道的CloudFlare免费CDN加速技巧-SSL\DDOS\Cache"></a>十个你可能不知道的CloudFlare免费CDN加速技巧-SSL\DDOS\Cache</h1><ul><li>2018年2月28日<ul><li>by <a href="https://wzfou.com/author/wzfou/" title="由Qi发布" target="_blank" rel="noopener">Qi</a></li><li><a href="https://wzfou.com/cloudflare/#comments" target="_blank" rel="noopener">29</a></li><li>12,259</li></ul></li></ul><p>文章目录</p><ul><li><a href="https://wzfou.com/cloudflare/#CloudFlareNSCDN" title="一、CloudFlare无须修改NS接入CDN" target="_blank" rel="noopener">一、CloudFlare无须修改NS接入CDN</a><ul><li><a href="https://wzfou.com/cloudflare/#11_-NS" title="1.1  普通模式-修改NS服务器" target="_blank" rel="noopener">1.1  普通模式-修改NS服务器</a></li><li><a href="https://wzfou.com/cloudflare/#12_-CNAME" title="1.2  专家模式-修改CNAME接入" target="_blank" rel="noopener">1.2  专家模式-修改CNAME接入</a></li></ul></li><li><a href="https://wzfou.com/cloudflare/#CloudFlare_Anycast" title="二、CloudFlare Anycast加速效果明显" target="_blank" rel="noopener">二、CloudFlare Anycast加速效果明显</a></li><li><a href="https://wzfou.com/cloudflare/#CloudFlareDNS" title="三、CloudFlare可作免费DNS域名解析" target="_blank" rel="noopener">三、CloudFlare可作免费DNS域名解析</a></li><li><a href="https://wzfou.com/cloudflare/#CloudFlare_DNSSEC" title="四、CloudFlare DNSSEC确保解析正确" target="_blank" rel="noopener">四、CloudFlare DNSSEC确保解析正确</a></li><li><a href="https://wzfou.com/cloudflare/#CloudFlareSSL" title="五、CloudFlare提供免费SSL证书服务" target="_blank" rel="noopener">五、CloudFlare提供免费SSL证书服务</a></li><li><a href="https://wzfou.com/cloudflare/#CloudFlareHSTS" title="六、CloudFlare一键开启HSTS模式" target="_blank" rel="noopener">六、CloudFlare一键开启HSTS模式</a></li><li><a href="https://wzfou.com/cloudflare/#CloudFlareAMP" title="七、CloudFlare自动开启AMP加速" target="_blank" rel="noopener">七、CloudFlare自动开启AMP加速</a></li><li><a href="https://wzfou.com/cloudflare/#CloudFlare_Page_Rules" title="八、CloudFlare Page Rules自定义功能" target="_blank" rel="noopener">八、CloudFlare Page Rules自定义功能</a></li><li><a href="https://wzfou.com/cloudflare/#CloudFlare" title="九、CloudFlare丰富的第三方应用" target="_blank" rel="noopener">九、CloudFlare丰富的第三方应用</a></li><li><a href="https://wzfou.com/cloudflare/#CloudFlare-2" title="十、CloudFlare有免费网页防火墙" target="_blank" rel="noopener">十、CloudFlare有免费网页防火墙</a></li><li><a href="https://wzfou.com/cloudflare/#i" title="总  结" target="_blank" rel="noopener">总  结</a></li></ul><p>要说<a href="https://wzfou.com/tag/free-cdn/" target="_blank" rel="noopener">免费CDN</a>服务的“大牛”恐怕就只能当数CloudFlare了。CloudFlare是一家美国的以提供CDN加速和网站安全防护为主的网络公司，经过不断的发展，目前CloudFlare CDN受到世界各地的欢迎，同时CloudFlare还与Google、微软等大公司有深度合作。</p><p><a href="https://wzfou.com/tag/cloudflare/" target="_blank" rel="noopener">Cloudflare</a>提供DNS服务给六百万个网站，其中著名的网站包括Uber、OKCupid与Fitbit，截止目前Cloudflare已拥有77个位于全球各地的数据中心，其中包括亚太地区的韩国、日本、香港、台北、新加坡等。国内的话CloudFlare据说是与百度合作，也就是百度云加速。</p><p>CDN加速仅仅是CloudFlare的一项业务，DDoS保护才是Cloudflare最大的吸引力，如果你的网站正在遭受DDOS攻击接入到CloudFlare即可享受免费的防护。当然如果你的攻击者足够“强大”你可以升级CloudFlare的付费用户。CloudFlare防护DDOS的能力有目共睹。</p><p>历史上CloudFlare就成功防护了每秒500Gbit的流量攻击，Cloudflare 为所有客户提供“我正遭受攻击模式”设置，一旦开启此模式Cloudflare 要求用户必须先通过 JavaScript 计算式查问的验证才能访问网站，进而减轻高级第 7 层攻击的影响，从而达到阻止DDOS攻击的目的。</p><p>本篇文章就来分享一下CloudFlare十个可能还不被广为人知的使用技巧，涉及到<a href="https://wzfou.com/tag/free-ssl/" target="_blank" rel="noopener">免费SSL证书</a>、DDOS保护、DNS解析、网页防火墙、Cache缓存加速等。</p><p><a href="https://wzfou.com/wp-content/uploads/2017/12/cloudflare_00.jpg" target="_blank" rel="noopener"><img src="https://img.qiyunfou.com/wp-content/uploads/2017/12/xcloudflare_00.jpg.pagespeed.ic.DRrl2Lbb06.webp" alt="十个你可能不知道的CloudFlare免费CDN网站加速技巧-SSL\DDOS\Cache"></a></p><p>更多的<a href="https://wzfou.com/tag/zhanzhang-gongju/" target="_blank" rel="noopener">站长工具</a>你可能还会需要：</p><ol><li><a href="https://wzfou.com/mianfei-dns/" target="_blank" rel="noopener">国内外免费DNS域名解析服务汇总列表-寻找更多免费DNS域名解析</a></li><li><a href="https://wzfou.com/qiye-youxiang/" target="_blank" rel="noopener">三大原因让我放弃腾讯阿里云企业邮箱-附国内外企业(域名)邮箱汇总</a></li><li><a href="https://wzfou.com/cn2-vps-list/" target="_blank" rel="noopener">接入CN2线路VPS主机商和机房汇总-鉴别真假CN2线路主机参考手册</a></li></ol><p><strong>PS：2018年3月1日更新，</strong>CloudFlare还有一个合作伙伴的计划，免费加入到Cloudflare Partner计划中，就可以利用Cloudflare提供的API为别人提供CDN加速服务了，详情：<a href="https://wzfou.com/cloudflare-partner/" target="_blank" rel="noopener">加入Cloudflare Partner免费提供CloudFlare CDN加速服务-无需修改NS支持SSL</a>。</p><p><strong>PS：2018年3月6日更新，</strong>如果自己有服务器，完全可以自建CDN加速，自由控制加速设置：<a href="https://wzfou.com/nginx-cdn/" target="_blank" rel="noopener">自建CDN加速-Nginx反向绑定,缓存加速,自动更新缓存和获取真实IP</a>。</p><p><strong>PS：2018年12月2日更新，</strong>关于使用cloudflare Railgun加速的方法可参考这里：<a href="https://wzfou.com/cloudflare-railgun/" target="_blank" rel="noopener">Cloudflare Partner接入管理Cloudflare CDN-启用Railgun动态加速</a>。</p><h2 id="一、CloudFlare无须修改NS接入CDN"><a href="#一、CloudFlare无须修改NS接入CDN" class="headerlink" title="一、CloudFlare无须修改NS接入CDN"></a>一、CloudFlare无须修改NS接入CDN</h2><p>CloudFlare官网：</p><ol><li><a href="https://www.cloudflare.com/" target="_blank" rel="noopener">https://www.cloudflare.com/</a></li></ol><h3 id="1-1-普通模式-修改NS服务器"><a href="#1-1-普通模式-修改NS服务器" class="headerlink" title="1.1  普通模式-修改NS服务器"></a>1.1  普通模式-修改NS服务器</h3><p>登录到CloudFlare，添加你想要接入<a href="https://wzfou.com/tag/cloudflare-cdn/" target="_blank" rel="noopener">CloudFlare CDN</a>的网站域名。</p><p><a href="https://wzfou.com/wp-content/uploads/2017/12/cloudflare_01.gif" target="_blank" rel="noopener"><img src="https://img.qiyunfou.com/wp-content/uploads/2017/12/xcloudflare_01.gif.pagespeed.ic.Rbkk7dK6-a.webp" alt="CloudFlare添加网站"></a></p><p>接着CloudFlare就会扫描域名的DNS解析，没有问题的点击继续。</p><p><a href="https://wzfou.com/wp-content/uploads/2017/12/cloudflare_02.gif" target="_blank" rel="noopener"><img src="https://wzfou.com/wp-content/uploads/2017/12/cloudflare_02.gif" alt="CloudFlare扫描DNS"></a></p><p>然后CloudFlare就会给出你要修改的NS服务器了。</p><p><a href="https://wzfou.com/wp-content/uploads/2017/12/cloudflare_04.gif" target="_blank" rel="noopener"><img src="https://img.qiyunfou.com/wp-content/uploads/2017/12/xcloudflare_04.gif.pagespeed.ic.fULRejE2rk.webp" alt="CloudFlare修改NS"></a></p><p>修改好了NS服务器待DNS生效后，你就可以在CloudFlare控制面板中看到已经激活，这时你的网站就成功接入到了CloudFlare的CDN了。</p><p><a href="https://wzfou.com/wp-content/uploads/2017/12/cloudflare_05.gif" target="_blank" rel="noopener"><img src="https://wzfou.com/wp-content/uploads/2017/12/cloudflare_05.gif" alt="CloudFlare激活成功"></a></p><h3 id="1-2-专家模式-修改CNAME接入"><a href="#1-2-专家模式-修改CNAME接入" class="headerlink" title="1.2  专家模式-修改CNAME接入"></a>1.2  专家模式-修改CNAME接入</h3><p>看过我之前写的<a href="https://wzfou.com/cloudflare-partner/" target="_blank" rel="noopener">加入Cloudflare Partner免费提供CloudFlare CDN加速服务</a>，就知道用户不需要进入到Cloudflare，就可以使用Cloudflare Partner管理CDN加速，不需要修改域名的NS服务器修改CNAME接入即可，使用效果和Cloudflare官网一样。</p><p><a href="https://wzfou.com/wp-content/uploads/2017/12/cloudflare_05_1.gif" target="_blank" rel="noopener"><img src="https://img.qiyunfou.com/wp-content/uploads/2017/12/xcloudflare_05_1.gif.pagespeed.ic.LWCtW5nAOd.webp" alt="CloudFlare修改CNAME"></a></p><p>这里有几个Cloudflare Partner接入平台，如果有自己的服务器你可以申请加入到Cloudflare Partner平台。</p><ol><li><a href="https://cdn.wzfou.com/" target="_blank" rel="noopener">https://cdn.wzfou.com/</a></li><li><a href="https://su.geekzu.org/" target="_blank" rel="noopener">https://su.geekzu.org/</a></li><li><a href="https://cdn.kevsrv.com/" target="_blank" rel="noopener">https://cdn.kevsrv.com/</a></li></ol><h2 id="二、CloudFlare-Anycast加速效果明显"><a href="#二、CloudFlare-Anycast加速效果明显" class="headerlink" title="二、CloudFlare Anycast加速效果明显"></a>二、CloudFlare Anycast加速效果明显</h2><p>CloudFlare采用Anycast技术进行加速，这样做的好处就是当攻击者发起攻击时，CloudFlare Anycast可以将“内力”化解到不同的“受众”上，从而最大限度地抵御攻击。下面一张图可以看出采用与没有采用Anycast技术的区别。（点击放大）</p><p><a href="https://wzfou.com/wp-content/uploads/2017/12/cloudflare_11_1.gif" target="_blank" rel="noopener"><img src="https://wzfou.com/wp-content/uploads/2017/12/cloudflare_11_1.gif" alt="CloudFlare采用AnyCast技术"></a></p><p><a href="https://wzfou.com/tag/cloudflare-anycast/" target="_blank" rel="noopener">CloudFlare Anycast</a>有一个问题就是用户访问的都是一个IP地址，目前从国内访问CloudFlare CDN加速后的网站显示的是美国西海岸的节点，速度还是比较快的，国内的Ping值基本上在200左右。</p><p><a href="https://wzfou.com/wp-content/uploads/2017/12/cloudflare_13.gif" target="_blank" rel="noopener"><img src="https://img.qiyunfou.com/wp-content/uploads/2017/12/xcloudflare_13.gif.pagespeed.ic.uxT2UDn5u_.webp" alt="CloudFlare国内的Ping值"></a></p><p>这是世界各地访问CloudFlare CDN节点的响应时间，可以看出使用了<a href="https://wzfou.com/tag/cloudflare-cdn/" target="_blank" rel="noopener">CloudFlare CDN</a>后国外加速效果也是非常明显的。</p><p><a href="https://wzfou.com/wp-content/uploads/2017/12/cloudflare_12.gif" target="_blank" rel="noopener"><img src="https://img.qiyunfou.com/wp-content/uploads/2017/12/xcloudflare_12.gif.pagespeed.ic.f5vvMLvz0s.webp" alt="CloudFlare不同的地方速度"></a></p><p>以前CloudFlare CDN不少的节点在国内无法使用，不过我在测试过程中发现采用了CloudFlare CDN后国内加速明显，用站长工具测试下载速度都非常不错。</p><p><a href="https://wzfou.com/wp-content/uploads/2017/12/cloudflare_14.gif" target="_blank" rel="noopener"><img src="https://img.qiyunfou.com/wp-content/uploads/2017/12/xcloudflare_14.gif.pagespeed.ic.O8-VKWDd9A.webp" alt="CloudFlare访问速度快"></a></p><p>这是测试网站的下载速度。（点击放大）</p><p><a href="https://wzfou.com/wp-content/uploads/2017/12/cloudflare_15.gif" target="_blank" rel="noopener"><img src="https://img.qiyunfou.com/wp-content/uploads/2017/12/xcloudflare_15.gif.pagespeed.ic.8rXinWaY4h.webp" alt="CloudFlare国内下载速度"></a></p><h2 id="三、CloudFlare可作免费DNS域名解析"><a href="#三、CloudFlare可作免费DNS域名解析" class="headerlink" title="三、CloudFlare可作免费DNS域名解析"></a>三、CloudFlare可作免费DNS域名解析</h2><p>很多人印象当中CloudFlare是一个CDN加速的网站，实际上CloudFlare提供的DNS域名解析服务不亚于专业的第三方DNS解析服务商，你只需要在DNS设置中关闭CDN加速即可。</p><p><a href="https://wzfou.com/wp-content/uploads/2017/12/cloudflare_16.gif" target="_blank" rel="noopener"><img src="https://img.qiyunfou.com/wp-content/uploads/2017/12/xcloudflare_16.gif.pagespeed.ic.qtpfDLVFXA.webp" alt="CloudFlare当成DNS服务器"></a></p><h2 id="四、CloudFlare-DNSSEC确保解析正确"><a href="#四、CloudFlare-DNSSEC确保解析正确" class="headerlink" title="四、CloudFlare DNSSEC确保解析正确"></a>四、CloudFlare DNSSEC确保解析正确</h2><p>DNSSEC全称是Domain Name System Security Extensions，也就是DNS安全扩展，主要目的就是确保DNS能够解析到正确的IP地址上。<strong>通俗地说，给DNS解析做像访问Https那样的加密，避免DNS出现干扰。</strong></p><p>目前DNSSEC在国内暂未发现有支持他们的DNS第三方服务商，CloudFlare 也是国外少数几个提供免费DNSSEC的服务之一。在CloudFlare可以一键开启DNSSEC。</p><p><a href="https://wzfou.com/wp-content/uploads/2017/12/cloudflare_17.gif" target="_blank" rel="noopener"><img src="https://img.qiyunfou.com/wp-content/uploads/2017/12/xcloudflare_17.gif.pagespeed.ic.vZN5lt5j3U.webp" alt="CloudFlare启用DNSSEC"></a></p><p>然后，你只需要将<a href="https://wzfou.com/tag/cloudflare-dnssec/" target="_blank" rel="noopener">CloudFlare DNSSEC</a>生成的密钥等文件填入到域名注册商那里，这样你就可以成功用上DNSSEC了。</p><p><a href="https://wzfou.com/wp-content/uploads/2017/12/cloudflare_18.gif" target="_blank" rel="noopener"><img src="https://img.qiyunfou.com/wp-content/uploads/2017/12/xcloudflare_18.gif.pagespeed.ic.5sNM8Ki_eA.webp" alt="CloudFlare域名设置"></a></p><h2 id="五、CloudFlare提供免费SSL证书服务"><a href="#五、CloudFlare提供免费SSL证书服务" class="headerlink" title="五、CloudFlare提供免费SSL证书服务"></a>五、CloudFlare提供免费SSL证书服务</h2><p>无论你的网站服务器是否有SSL，你都可以在CloudFlare中一键开启SSL证书。</p><p><a href="https://wzfou.com/wp-content/uploads/2017/12/cloudflare_19.gif" target="_blank" rel="noopener"><img src="https://img.qiyunfou.com/wp-content/uploads/2017/12/xcloudflare_19.gif.pagespeed.ic.m_yBEvD5Sm.webp" alt="CloudFlare开启SSL证书"></a></p><p>CloudFlare的<a href="https://wzfou.com/tag/free-ssl/" target="_blank" rel="noopener">免费SSL</a>证书分为三种模式。如果你的服务器没有SSL，你可以选择Flexible模式。如果你的服务器已经安装了SSL证书或者有自签名SSL，则可以选择Full模式。最后，如果你的服务器的SSL证书是购买的付费SSL，则可以选择Full（严格）模式。（点击放大）</p><p><a href="https://wzfou.com/wp-content/uploads/2017/12/cloudflare_07.gif" target="_blank" rel="noopener"><img src="https://wzfou.com/wp-content/uploads/2017/12/cloudflare_07.gif" alt="CloudFlare选择SSL模式"></a></p><h2 id="六、CloudFlare一键开启HSTS模式"><a href="#六、CloudFlare一键开启HSTS模式" class="headerlink" title="六、CloudFlare一键开启HSTS模式"></a>六、CloudFlare一键开启HSTS模式</h2><p>HSTS即HTTP Strict Transport Security，主要目的就是为了解决SSL剥离攻击，只要浏览器曾经与服务器创建过一次安全连接，之后浏览器会强制使用HTTPS，即使链接被换成了HTTP。</p><p><a href="https://wzfou.com/wp-content/uploads/2017/12/cloudflare_20.gif" target="_blank" rel="noopener"><img src="https://img.qiyunfou.com/wp-content/uploads/2017/12/xcloudflare_20.gif.pagespeed.ic.Iuu3CC0JdK.webp" alt="CloudFlare开启HSTS"></a></p><p>CloudFlare可以一键开启HSTS，你可以设置HSTS Header过期时间，这样可以强制浏览器使用Https来访问你的网站。不过，在开启之间需要谨慎些。</p><p><a href="https://wzfou.com/wp-content/uploads/2017/12/cloudflare_21.gif" target="_blank" rel="noopener"><img src="https://img.qiyunfou.com/wp-content/uploads/2017/12/xcloudflare_21.gif.pagespeed.ic.5s4CRXSYx5.webp" alt="CloudFlare设置HSTS过期时间"></a></p><h2 id="七、CloudFlare自动开启AMP加速"><a href="#七、CloudFlare自动开启AMP加速" class="headerlink" title="七、CloudFlare自动开启AMP加速"></a>七、CloudFlare自动开启AMP加速</h2><p>AMP即Accelerated Mobile Pages Project，这是Google提出的移动设备加速项目，百度的MIP就是模仿谷歌的AMP建立的。很多的站长为了得到搜索引擎的信赖，都想加入到AMP中，例如挖站否的AMP：<a href="https://wzfou.com/qiye-youxiang/amp/" target="_blank" rel="noopener">https://wzfou.com/qiye-youxiang/amp/</a></p><p><a href="https://wzfou.com/wp-content/uploads/2017/12/cloudflare_23.gif" target="_blank" rel="noopener"><img src="https://img.qiyunfou.com/wp-content/uploads/2017/12/xcloudflare_23.gif.pagespeed.ic.KRMPsettt5.webp" alt="CloudFlare开启AMP"></a></p><p>CloudFlare提供了一键开启AMP模式，这样当你的移动用户访问你的网站时就会自动进入到<a href="https://wzfou.com/tag/cloudflare-amp/" target="_blank" rel="noopener">CloudFlare AMP</a>模式，从而达到加速的目的。</p><p><a href="https://wzfou.com/wp-content/uploads/2017/12/cloudflare_22.gif" target="_blank" rel="noopener"><img src="https://img.qiyunfou.com/wp-content/uploads/2017/12/xcloudflare_22.gif.pagespeed.ic.P3B4HQ9neM.webp" alt="CloudFlare使用AMP加速"></a></p><h2 id="八、CloudFlare-Page-Rules自定义功能"><a href="#八、CloudFlare-Page-Rules自定义功能" class="headerlink" title="八、CloudFlare Page Rules自定义功能"></a>八、CloudFlare Page Rules自定义功能</h2><p>CloudFlare Page Rules，是CloudFlare一个非常有用的工具。很多朋友之所以不想上CDN，主要就是自己的网站或者服务还有不少的动态内容，而一旦上了CDN上容易造成网页出错或者数据请求出错。</p><p><a href="https://wzfou.com/wp-content/uploads/2017/12/cloudflare_25.gif" target="_blank" rel="noopener"><img src="https://img.qiyunfou.com/wp-content/uploads/2017/12/xcloudflare_25.gif.pagespeed.ic.IpY2lznMd3.webp" alt="CloudFlare网页规则"></a></p><p>CloudFlare Page Rules允许你自定义页面规则，例如你可以自定义不同的页面采用不同的策略，包括强制Https、301重定向、安全等级、缓存等级、浏览器缓存时间、永久在线等。这样你可以手动将自己的网站实现“动静分离”了。</p><p><a href="https://wzfou.com/wp-content/uploads/2017/12/cloudflare_26.gif" target="_blank" rel="noopener"><img src="https://img.qiyunfou.com/wp-content/uploads/2017/12/xcloudflare_26.gif.pagespeed.ic.cOBmDvSYZC.webp" alt="CloudFlare设置不同的页面规则"></a></p><p>CloudFlare 支持通配符，最简单的就是域名重定向了，你无须在自己的服务器编写复杂的规则，只要在CloudFlare Page Rules开启即可。</p><h2 id="九、CloudFlare丰富的第三方应用"><a href="#九、CloudFlare丰富的第三方应用" class="headerlink" title="九、CloudFlare丰富的第三方应用"></a>九、CloudFlare丰富的第三方应用</h2><p>CloudFlare提供了Google Analytics、PACE、Hardenize等第三方应用，你可以在开启CloudFlare CDN的同时无需修改代码直接在CDN启用即可。</p><p><a href="https://wzfou.com/wp-content/uploads/2017/12/cloudflare_27.gif" target="_blank" rel="noopener"><img src="https://img.qiyunfou.com/wp-content/uploads/2017/12/xcloudflare_27.gif.pagespeed.ic.C7HF_yx8D5.webp" alt="CloudFlare第三方应用"></a></p><p>例如想要安装Google Analytics，你直接在CloudFlare中开启谷歌统计服务，相当地方便。</p><p><a href="https://wzfou.com/wp-content/uploads/2017/12/cloudflare_28.gif" target="_blank" rel="noopener"><img src="https://img.qiyunfou.com/wp-content/uploads/2017/12/xcloudflare_28.gif.pagespeed.ic.ZJuUfyygOH.webp" alt="CloudFlare安装统计"></a></p><h2 id="十、CloudFlare有免费网页防火墙"><a href="#十、CloudFlare有免费网页防火墙" class="headerlink" title="十、CloudFlare有免费网页防火墙"></a>十、CloudFlare有免费网页防火墙</h2><p>一旦你的网站受到了攻击，可以根据攻击的强烈程度在CloudFlare中开启不同级别的网页防火墙，你也可以直接在CloudFlare看到攻击者的IP地址，一键将它们列入黑名单中。</p><p><a href="https://wzfou.com/wp-content/uploads/2017/12/cloudflare_08.gif" target="_blank" rel="noopener"><img src="https://wzfou.com/wp-content/uploads/2017/12/cloudflare_08.gif" alt="CloudFlare网页防火墙"></a></p><h2 id="总-结"><a href="#总-结" class="headerlink" title="总  结"></a>总  结</h2><p>CloudFlare可以说是一个非常优秀的CDN服务商，不仅提供了免费的CDN加速服务，同时可以免费开启SSL证书、<a href="https://wzfou.com/tag/amp-jiasu/" target="_blank" rel="noopener">AMP加速</a>、支持DNSSEC解析、Google Analytics等相应的服务，相当于给自己的网站做了全方位的加速与保护。</p><p>CloudFlare不足的地方也有不少，例如只能通过修改NS的方式才能使用CloudFlare服务。由于CloudFlare CDN节点基本上在国外，所以国内的网站想要使用CloudFlare CDN加速基本上没有什么价值，而不少的节点还可能无法访问。</p><p>文章出自：<a href="https://wzfou.com/" target="_blank" rel="noopener">挖站否</a> <a href="https://wzfou.com/cloudflare/" target="_blank" rel="noopener">https://wzfou.com/cloudflare/</a>，版权所有。本站文章除注明出处外，皆为作者原创文章，可自由引用，但请注明来源。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;十个你可能不知道的CloudFlare免费CDN加速技巧-SSL-DDOS-Cache&quot;&gt;&lt;a href=&quot;#十个你可能不知道的CloudFlare免费CDN加速技巧-SSL-DDOS-Cache&quot; class=&quot;headerlink&quot; title=&quot;十个你可能不
      
    
    </summary>
    
    
      <category term="CloudFlare" scheme="https://xiliangsong.github.io/tags/CloudFlare/"/>
    
      <category term="CDN" scheme="https://xiliangsong.github.io/tags/CDN/"/>
    
  </entry>
  
  <entry>
    <title>CloudFlare免费CDN加速使用方法 【转自知乎】</title>
    <link href="https://xiliangsong.github.io/2019/08/04//articles/2019/08/04/1564907160971.html/"/>
    <id>https://xiliangsong.github.io/2019/08/04//articles/2019/08/04/1564907160971.html/</id>
    <published>2019-08-04T08:26:01.000Z</published>
    <updated>2019-08-04T08:26:01.000Z</updated>
    
    <content type="html"><![CDATA[<p>转自<a href="https://zhuanlan.zhihu.com/p/29891330" target="_blank" rel="noopener">公众号JustThink</a></p><h1 id="CloudFlare免费CDN加速使用方法"><a href="#CloudFlare免费CDN加速使用方法" class="headerlink" title="CloudFlare免费CDN加速使用方法"></a>CloudFlare免费CDN加速使用方法</h1><p><a href="https://www.zhihu.com/people/crystal-33-50" target="_blank" rel="noopener"><img src="https://pic2.zhimg.com/v2-ddf3c47644330f3a1f84c2481a056c38_xs.jpg" alt="crystal"></a></p><p><a href="https://www.zhihu.com/people/crystal-33-50" target="_blank" rel="noopener">crystal</a></p><p>公众号JustThink | 分享高效、实用、有趣的工具教程</p><p>​关注他</p><p>8 人赞同了该文章</p><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>cloudflare 是一家国外的 CDN 加速服务商，还是很有名气的。提供免费和付费的加速和网站保护服务。百度云加速的国外节点就是和 cloudflare 合作使用的 cloudflare 的节点。</p><p>cloudflare 提供了不同类型的套餐，即使是免费用户，cloudflare 提供的功能也是很全面的。</p><p>对于访客来自于国外的网站很不错；对于访客来自于国内的网站加速效果有限，有些甚至会变慢，不过其安全防护功能也很不错。</p><h2 id="添加网站"><a href="#添加网站" class="headerlink" title="添加网站"></a>添加网站</h2><p>官网： <a href="https://link.zhihu.com/?target=https%3A//www.cloudflare.com/" target="_blank" rel="noopener">www.cloudflare.com</a></p><p>使用邮箱注册，注册完后自动进入添加网站界面。添加网站分为四步：添加网站域名、添加DNS记录、选择方案、更新域名服务器。</p><p><img src="https://pic1.zhimg.com/80/v2-ebeaa66f209db0afa00a8546cb98de80_hd.jpg" alt="null"></p><h2 id="1-添加网站"><a href="#1-添加网站" class="headerlink" title="1.添加网站"></a>1.添加网站</h2><p>填入自己的主域名（不带 www 的），“Scan DNS Records”。</p><h2 id="2-添加DNS记录"><a href="#2-添加DNS记录" class="headerlink" title="2.添加DNS记录"></a>2.添加DNS记录</h2><p>添加完成后会自动扫描 DNS 记录，等待完成，“Continue”。</p><p>下面会列出所有扫描到的 DNS 记录。黄色云朵表示该解析通过 CDN 访问，灰色云朵表示不通过 CDN 访问，点击云朵可以切换状态。<strong>这里如果选择不走 CDN 的话，相当于只使用 cloudflare 的 DNS 功能。</strong></p><p>这里建议全部调为黄色云朵走 CDN 访问，隐藏网站真实 IP 地址。全站通过 CDN 访问可以有效防止网站真实IP泄漏，保护原站安全。</p><p>记录简单的话可以直接按默认条目；如果没有扫描出来原记录或要手动添加，建议至少添加 @ 和 www 两条指向原网站 IP 的 A 记录，TTL 默认。</p><p><img src="https://pic1.zhimg.com/80/v2-f8804ee5469503437d739446995805ec_hd.jpg" alt="null"></p><h2 id="3-选择方案"><a href="#3-选择方案" class="headerlink" title="3.选择方案"></a>3.选择方案</h2><p>选择适合自己的方案，一般小站博客免费方案就够了。当然，有更高需求的可按需选择付费方案。</p><p><img src="https://pic1.zhimg.com/80/v2-05b79fdeaf3bbfaaf1eca5dcfc650f50_hd.jpg" alt="null"></p><h2 id="4-更新域名服务器"><a href="#4-更新域名服务器" class="headerlink" title="4.更新域名服务器"></a>4.更新域名服务器</h2><p>右侧是新的域名服务器。进入域名管理面板，更改域名服务器为新的。</p><p><img src="https://pic2.zhimg.com/80/v2-9c2f5f20803243e9ca7ce5211971563d_hd.jpg" alt="null"></p><p>域名服务器更改成功后会收到邮件提示。“Continue”，完成。</p><p><img src="https://pic2.zhimg.com/80/v2-948ac1bd2f9a812ce7f559a1c2262c01_hd.jpg" alt="null"></p><h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><p>DNS 刷新生效需要时间，可耐心等待。</p><ul><li><p>刷新本地 DNS</p></li><li><p>cmd 运行 ipconfig /flushdns</p></li><li><p>查看域名服务器</p></li><li><p>cmd 运行 nslookup —&gt; 回车 —&gt; set type=ns —&gt; 回车 —&gt; 域名</p></li><li><p>等生效后，再 ping 自己的域名，显示出来的就应该是 cloudflare 节点的 IP 地址了。</p></li></ul><p><img src="https://pic4.zhimg.com/80/v2-ef9b6e80bcef18efd83efa6605fe60ff_hd.jpg" alt="null"></p><h2 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h2><p>我的博客用的 Godaddy 的虚拟主机，国内访问速度比较慢 ╮（╯＿╰）╭，延迟 480ms。可以看到，使用 cloudflare 后本地测试延迟 251ms。还是可以的，比起我原来的速度好多了 o(￣▽￣)ｄ。</p><p><img src="https://pic4.zhimg.com/80/v2-bedd9dcbfbab65c4b3a2adbc76d6ec8b_hd.jpg" alt="null"></p><p><img src="https://pic1.zhimg.com/80/v2-2183dda69ef4a6222422d5f79247c2e8_hd.jpg" alt="null"></p><p>国内部分，Ping 结果比原来好多了。<em>（额，没用 CDN 时更惨）</em></p><p><img src="https://pic1.zhimg.com/80/v2-29f7cab1c599155cfaecc7b5ae185258_hd.jpg" alt="null"></p><p>国外部分，可以看到 cloudflare 在国外还是很厉害的。</p><p><img src="https://pic1.zhimg.com/80/v2-08ee33a2c9f791b2d43a5d093074b440_hd.jpg" alt="null"></p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul><li>网站对国外访客的效果很好，推荐使用；</li><li>对国内访客的效果说不上优秀，但也中规中矩吧，毕竟国外节点，个别时间、地区连接超时也是有的。</li></ul><h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>本篇只介绍如何添加网站使用 cloudflare 的 CDN 加速和网站防护服务。至于其他深入配置下一篇再单独讲。不想配置的按默认选项也可以。</p><p>cloudflare 对于主机在国外、访客在国内的网站加速效果有限，安全防护还不错。不过对于没有备案的朋友来说国内的 CDN 服务是用不了了，相对而言使用 cloudflare 还是一个可选的途径。</p><p>当然，如果原站本身访问速度不错，使用了 cloudflare 可能变慢了；如果网站经常遭受恶意攻击什么的话，倒是可以用 cloudflare 来加强防护保护原站。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;转自&lt;a href=&quot;https://zhuanlan.zhihu.com/p/29891330&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;公众号JustThink&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;CloudFlare免费CDN加速使用方法&quot;&gt;&lt;a h
      
    
    </summary>
    
    
      <category term="CloudFlare" scheme="https://xiliangsong.github.io/tags/CloudFlare/"/>
    
      <category term="CDN" scheme="https://xiliangsong.github.io/tags/CDN/"/>
    
  </entry>
  
  <entry>
    <title>mysql创建数据库指定字符编码和排序规则</title>
    <link href="https://xiliangsong.github.io/2019/08/04//articles/2019/08/04/1564907014451.html/"/>
    <id>https://xiliangsong.github.io/2019/08/04//articles/2019/08/04/1564907014451.html/</id>
    <published>2019-08-04T08:23:34.000Z</published>
    <updated>2019-08-04T12:19:35.000Z</updated>
    
    <content type="html"><![CDATA[<p>字符编码: utf8mb4<br>排序规则: utf8mb4_general_ci   </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">**create database b3log_symphony default character set utf8mb4 collate utf8mb4_general_ci;**</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;字符编码: utf8mb4&lt;br&gt;排序规则: utf8mb4_general_ci   &lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;
      
    
    </summary>
    
    
      <category term="MySQL" scheme="https://xiliangsong.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>Debian 9 默认安装MariaDB  修改成 MySQL原生认证</title>
    <link href="https://xiliangsong.github.io/2019/08/04//articles/2019/08/04/1564906392799.html/"/>
    <id>https://xiliangsong.github.io/2019/08/04//articles/2019/08/04/1564906392799.html/</id>
    <published>2019-08-04T08:13:12.000Z</published>
    <updated>2019-08-04T12:20:03.000Z</updated>
    
    <content type="html"><![CDATA[<p>Debian 9 使用 MariaDB 彻底代替了 MySQL。因此在配置方面，相比之前版本有很多的不同。</p><h2 id="安装MariaDB"><a href="#安装MariaDB" class="headerlink" title="安装MariaDB"></a>安装MariaDB</h2><p>安装 MariaDB 仍旧可以使用下面的命令，相比使用 mariadb-server，使用 mysql-server 能够保证对 MySQL 的兼容性。</p><h2 id="使用原生-MySQL-认证"><a href="#使用原生-MySQL-认证" class="headerlink" title="使用原生 MySQL 认证"></a>使用原生 MySQL 认证</h2><p>使用原生 MySQL 认证因为默认使用了 UNIX SOCKET 认证，有些 phpMyAdmin 在登入时会发生 “Access Denied” 错误。我们可以更改 UNIX SOCKET 认证为原生 MySQL 认证.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1 update mysql.user set plugin = &apos;mysql_native_password&apos; where User=&apos;root&apos;;   </span><br><span class="line">2 flush privileges;  </span><br><span class="line">3 quit;</span><br></pre></td></tr></table></figure><p>最后，重启一下数据库即可</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart mariadb.service</span><br></pre></td></tr></table></figure><p>如果重启失败，可以直接在控制面板里面重启服务器，终极武器.</p><hr><p>作者：Machanical-Thinking<br>来源：CSDN<br>原文：<a href="https://blog.csdn.net/qq_34302921/article/details/87111574" target="_blank" rel="noopener">https://blog.csdn.net/qq_34302921/article/details/87111574</a><br>版权声明：本文为博主原创文章，转载请附上博文链接！</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Debian 9 使用 MariaDB 彻底代替了 MySQL。因此在配置方面，相比之前版本有很多的不同。&lt;/p&gt;
&lt;h2 id=&quot;安装MariaDB&quot;&gt;&lt;a href=&quot;#安装MariaDB&quot; class=&quot;headerlink&quot; title=&quot;安装MariaDB&quot;&gt;&lt;/
      
    
    </summary>
    
    
      <category term="数据库" scheme="https://xiliangsong.github.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
      <category term="MySQL" scheme="https://xiliangsong.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>快速重置MariaDB或是MySQL的root密码</title>
    <link href="https://xiliangsong.github.io/2019/08/04//articles/2019/08/04/1564905934651.html/"/>
    <id>https://xiliangsong.github.io/2019/08/04//articles/2019/08/04/1564905934651.html/</id>
    <published>2019-08-04T08:05:34.000Z</published>
    <updated>2019-08-04T08:05:34.000Z</updated>
    
    <content type="html"><![CDATA[<p>转自<a href="https://ywnz.com/linuxysjk/2971.html" target="_blank" rel="noopener">geekpi稿源:linux中国站</a></p><p>如果你在 Linux 下安装了 LAMP 服务器，然后用 root 用户进行登录数据库，但是忘记密码，你可以采用本文介绍的方法对 root 密码进行重置。</p><p><strong>关于搭建LAMP服务器的参考</strong></p><p>1.<a href="https://ywnz.com/linuxyffq/2833.html" target="_blank" rel="noopener">在Ubuntu 18.04系统中安装LAMP服务器全过程</a></p><p>2.<a href="https://ywnz.com/linuxyffq/2522.html" target="_blank" rel="noopener">Linux云服务器CentOS 7.4 64位PHP环境配置[LAMP]</a></p><p>3.<a href="https://ywnz.com/linuxyffq/511.html" target="_blank" rel="noopener">Debian搭建LAMP环境（Apache MariaDB PHP7）</a></p><p>4.<a href="https://ywnz.com/linuxyffq/497.html" target="_blank" rel="noopener">Ubuntu 16.04 LTS搭建Apache,MariaDB PHP7(LAMP)</a></p><p><strong>快速重置MariaDB或是MySQL的root密码详细方法如下</strong></p><p>1.首先，停止数据库。</p><p>如果你使用 MySQL，请输入以下命令并下按回车键。</p><p>$ sudo systemctl stop mysql</p><p>对于 MariaDB：</p><p>$ sudo systemctl stop mariadb</p><p>2.接下来，使用以下命令在没有权限检查的情况下重新启动数据库：</p><p>$ sudo mysqld_safe –skip-grant-tables &amp;</p><p>这里， –skip-grant-tables 选项让你在没有密码和所有权限的情况下进行连接。如果使用此选项启动服务器，它还会启用 –skip-networking 选项，这用于防止其他客户端连接到数据库服务器。并且，&amp; 符号用于在后台运行命令，因此你可以在以下步骤中输入其他命令。请注意，上述命令很危险，并且你的数据库会变得不安全。你应该只在短时间内运行此命令以重置密码。</p><p>3.然后以 root 用户身份登录 MariaDB/MySQL 服务器：</p><p>$ mysql</p><p>4.在 mysql &gt; 或 MariaDB [(none)] &gt; 提示符下，运行以下命令重置 root 用户密码：</p><p>UPDATE mysql.user SET Password=PASSWORD(‘NEW-PASSWORD’) WHERE User=’root’;</p><p>使用你自己的密码替换上述命令中的 NEW-PASSWORD。</p><p>5.然后再输入以下命令退出 mysql 控制台。</p><p>FLUSH PRIVILEGES;</p><p>exit</p><p>6.最后，关闭之前使用 –skip-grant-tables 选项运行的数据库。为此，运行：</p><p>$ sudo mysqladmin -u root -p shutdown</p><p>系统将要求你输入在上一步中设置的 MariaDB/MySQL 用户密码。</p><p>7.现在，使用以下命令正常启动 MariaDB/MySQL 服务：</p><p>$ sudo systemctl start mysql</p><p>对于 MariaDB：</p><p>$ sudo systemctl start mariadb</p><p>8.使用以下命令验证密码是否确实已更改：</p><p>$ mysql -u root -p</p><p>至此，重置MariaDB或是MySQL的root密码就完成了。</p><p><strong>相关主题</strong></p><p><a href="https://ywnz.com/linuxysjk/1245.html" target="_blank" rel="noopener">如何在Ubuntu上安装MySQL/MariaDB</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;转自&lt;a href=&quot;https://ywnz.com/linuxysjk/2971.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;geekpi稿源:linux中国站&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;如果你在 Linux 下安装了 LAMP 服务器，然后用
      
    
    </summary>
    
    
      <category term="待分类" scheme="https://xiliangsong.github.io/tags/%E5%BE%85%E5%88%86%E7%B1%BB/"/>
    
  </entry>
  
  <entry>
    <title>Nginx 简易教程 【转自 静默虚空的博客】</title>
    <link href="https://xiliangsong.github.io/2019/08/04//articles/2019/08/04/1564905769436.html/"/>
    <id>https://xiliangsong.github.io/2019/08/04//articles/2019/08/04/1564905769436.html/</id>
    <published>2019-08-04T08:02:49.000Z</published>
    <updated>2019-08-04T08:02:49.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Nginx-简易教程"><a href="#Nginx-简易教程" class="headerlink" title="Nginx 简易教程"></a><a href="https://www.cnblogs.com/jingmoxukong/p/5945200.html" target="_blank" rel="noopener">Nginx 简易教程</a></h1><blockquote><p><strong>目录</strong></p><p><a href="https://www.cnblogs.com/jingmoxukong/p/5945200.html#nginx" target="_blank" rel="noopener">Nginx</a><br><a href="https://www.cnblogs.com/jingmoxukong/p/5945200.html#%E6%A6%82%E8%BF%B0" target="_blank" rel="noopener">  概述</a><br><a href="https://www.cnblogs.com/jingmoxukong/p/5945200.html#%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8" target="_blank" rel="noopener">  安装与使用</a><br><a href="https://www.cnblogs.com/jingmoxukong/p/5945200.html#nginx-%E9%85%8D%E7%BD%AE%E5%AE%9E%E6%88%98" target="_blank" rel="noopener">  nginx 配置实战</a><br><a href="https://www.cnblogs.com/jingmoxukong/p/5945200.html#%E6%9B%B4%E5%A4%9A%E5%86%85%E5%AE%B9" target="_blank" rel="noopener">  更多内容</a>  </p></blockquote><h1 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h1><blockquote><p>本项目是一个 Nginx 极简教程，目的在于帮助新手快速入门 Nginx。</p><p><a href="https://www.cnblogs.com/jingmoxukong/p/demos" target="_blank" rel="noopener">demos</a> 目录中的示例模拟了工作中的一些常用实战场景，并且都可以通过脚本一键式启动，让您可以快速看到演示效果。</p></blockquote><ul><li><a href="https://www.cnblogs.com/jingmoxukong/p/5945200.html#%E6%A6%82%E8%BF%B0" target="_blank" rel="noopener">概述</a></li><li><a href="https://www.cnblogs.com/jingmoxukong/p/5945200.html#%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8" target="_blank" rel="noopener">安装与使用</a><ul><li><a href="https://www.cnblogs.com/jingmoxukong/p/5945200.html#%E5%AE%89%E8%A3%85" target="_blank" rel="noopener">安装</a></li><li><a href="https://www.cnblogs.com/jingmoxukong/p/5945200.html#%E4%BD%BF%E7%94%A8" target="_blank" rel="noopener">使用</a></li></ul></li><li><a href="https://www.cnblogs.com/jingmoxukong/p/5945200.html#nginx-%E9%85%8D%E7%BD%AE%E5%AE%9E%E6%88%98" target="_blank" rel="noopener">nginx 配置实战</a><ul><li><a href="https://www.cnblogs.com/jingmoxukong/p/5945200.html#http-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener">http 反向代理配置</a></li><li><a href="https://www.cnblogs.com/jingmoxukong/p/5945200.html#%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener">负载均衡配置</a></li><li><a href="https://www.cnblogs.com/jingmoxukong/p/5945200.html#%E7%BD%91%E7%AB%99%E6%9C%89%E5%A4%9A%E4%B8%AA-webapp-%E7%9A%84%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener">网站有多个 webapp 的配置</a></li><li><a href="https://www.cnblogs.com/jingmoxukong/p/5945200.html#https-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener">https 反向代理配置</a></li><li><a href="https://www.cnblogs.com/jingmoxukong/p/5945200.html#%E9%9D%99%E6%80%81%E7%AB%99%E7%82%B9%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener">静态站点配置</a></li><li><a href="https://www.cnblogs.com/jingmoxukong/p/5945200.html#%E6%90%AD%E5%BB%BA%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8" target="_blank" rel="noopener">搭建文件服务器</a></li><li><a href="https://www.cnblogs.com/jingmoxukong/p/5945200.html#%E8%B7%A8%E5%9F%9F%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88" target="_blank" rel="noopener">跨域解决方案</a></li></ul></li><li><a href="https://www.cnblogs.com/jingmoxukong/p/5945200.html#%E6%9B%B4%E5%A4%9A%E5%86%85%E5%AE%B9" target="_blank" rel="noopener">更多内容</a></li></ul><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p><strong>什么是 Nginx?</strong></p><p><strong>Nginx (engine x)</strong> 是一款轻量级的 Web 服务器 、反向代理服务器及电子邮件（IMAP/POP3）代理服务器。</p><p><img src="https://raw.githubusercontent.com/dunwu/images/master/images/web/nginx/nginx.jpg" alt="null"></p><p><strong>什么是反向代理？</strong></p><p>反向代理（Reverse Proxy）方式是指以代理服务器来接受 internet 上的连接请求，然后将请求转发给内部网络上的服务器，并将从服务器上得到的结果返回给 internet 上请求连接的客户端，此时代理服务器对外就表现为一个反向代理服务器。</p><p><img src="https://raw.githubusercontent.com/dunwu/images/master/images/web/reverse-proxy.png" alt="null"></p><h2 id="安装与使用"><a href="#安装与使用" class="headerlink" title="安装与使用"></a>安装与使用</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>详细安装方法请参考：<a href="https://www.cnblogs.com/jingmoxukong/p/install-nginx.md" target="_blank" rel="noopener">Nginx 安装</a></p><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>nginx 的使用比较简单，就是几条命令。</p><p>常用到的命令如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">nginx -s stop       快速关闭Nginx，可能不保存相关信息，并迅速终止web服务。</span><br><span class="line">nginx -s quit       平稳关闭Nginx，保存相关信息，有安排的结束web服务。</span><br><span class="line">nginx -s reload     因改变了Nginx相关配置，需要重新加载配置而重载。</span><br><span class="line">nginx -s reopen     重新打开日志文件。</span><br><span class="line">nginx -c filename   为 Nginx 指定一个配置文件，来代替缺省的。</span><br><span class="line">nginx -t            不运行，而仅仅测试配置文件。nginx 将检查配置文件的语法的正确性，并尝试打开配置文件中所引用到的文件。</span><br><span class="line">nginx -v            显示 nginx 的版本。</span><br><span class="line">nginx -V            显示 nginx 的版本，编译器版本和配置参数。</span><br></pre></td></tr></table></figure><p>如果不想每次都敲命令，可以在 nginx 安装目录下新添一个启动批处理文件<strong>startup.bat</strong>，双击即可运行。内容如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line">rem 如果启动前已经启动nginx并记录下pid文件，会kill指定进程</span><br><span class="line">nginx.exe -s stop</span><br><span class="line"></span><br><span class="line">rem 测试配置文件语法正确性</span><br><span class="line">nginx.exe -t -c conf/nginx.conf</span><br><span class="line"></span><br><span class="line">rem 显示版本信息</span><br><span class="line">nginx.exe -v</span><br><span class="line"></span><br><span class="line">rem 按照指定配置去启动nginx</span><br><span class="line">nginx.exe -c conf/nginx.conf</span><br></pre></td></tr></table></figure><p>如果是运行在 Linux 下，写一个 shell 脚本，大同小异。</p><h2 id="nginx-配置实战"><a href="#nginx-配置实战" class="headerlink" title="nginx 配置实战"></a>nginx 配置实战</h2><p>我始终认为，各种开发工具的配置还是结合实战来讲述，会让人更易理解。</p><h3 id="http-反向代理配置"><a href="#http-反向代理配置" class="headerlink" title="http 反向代理配置"></a>http 反向代理配置</h3><p>我们先实现一个小目标：不考虑复杂的配置，仅仅是完成一个 http 反向代理。</p><p>nginx.conf 配置文件如下：<br><strong><em>注：conf / nginx.conf 是 nginx 的默认配置文件。你也可以使用 nginx -c 指定你的配置文件</em></strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line">#运行用户</span><br><span class="line">#user somebody;</span><br><span class="line"></span><br><span class="line">#启动进程,通常设置成和cpu的数量相等</span><br><span class="line">worker_processes  1;</span><br><span class="line"></span><br><span class="line">#全局错误日志</span><br><span class="line">error_log  D:/Tools/nginx-1.10.1/logs/error.log;</span><br><span class="line">error_log  D:/Tools/nginx-1.10.1/logs/notice.log  notice;</span><br><span class="line">error_log  D:/Tools/nginx-1.10.1/logs/info.log  info;</span><br><span class="line"></span><br><span class="line">#PID文件，记录当前启动的nginx的进程ID</span><br><span class="line">pid        D:/Tools/nginx-1.10.1/logs/nginx.pid;</span><br><span class="line"></span><br><span class="line">#工作模式及连接数上限</span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections 1024;    #单个后台worker process进程的最大并发链接数</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#设定http服务器，利用它的反向代理功能提供负载均衡支持</span><br><span class="line">http &#123;</span><br><span class="line">    #设定mime类型(邮件支持类型),类型由mime.types文件定义</span><br><span class="line">    include       D:/Tools/nginx-1.10.1/conf/mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    #设定日志</span><br><span class="line">    log_format  main  &apos;[$remote_addr] - [$remote_user] [$time_local] &quot;$request&quot; &apos;</span><br><span class="line">                      &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;</span><br><span class="line">                      &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;;</span><br><span class="line"></span><br><span class="line">    access_log    D:/Tools/nginx-1.10.1/logs/access.log main;</span><br><span class="line">    rewrite_log     on;</span><br><span class="line"></span><br><span class="line">    #sendfile 指令指定 nginx 是否调用 sendfile 函数（zero copy 方式）来输出文件，对于普通应用，</span><br><span class="line">    #必须设为 on,如果用来进行下载等应用磁盘IO重负载应用，可设置为 off，以平衡磁盘与网络I/O处理速度，降低系统的uptime.</span><br><span class="line">    sendfile        on;</span><br><span class="line">    #tcp_nopush     on;</span><br><span class="line"></span><br><span class="line">    #连接超时时间</span><br><span class="line">    keepalive_timeout  120;</span><br><span class="line">    tcp_nodelay        on;</span><br><span class="line"></span><br><span class="line">    #gzip压缩开关</span><br><span class="line">    #gzip  on;</span><br><span class="line"></span><br><span class="line">    #设定实际的服务器列表</span><br><span class="line">    upstream zp_server1&#123;</span><br><span class="line">        server 127.0.0.1:8089;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #HTTP服务器</span><br><span class="line">    server &#123;</span><br><span class="line">        #监听80端口，80端口是知名端口号，用于HTTP协议</span><br><span class="line">        listen       80;</span><br><span class="line"></span><br><span class="line">        #定义使用www.xx.com访问</span><br><span class="line">        server_name  www.helloworld.com;</span><br><span class="line"></span><br><span class="line">        #首页</span><br><span class="line">        index index.html</span><br><span class="line"></span><br><span class="line">        #指向webapp的目录</span><br><span class="line">        root D:\01_Workspace\Project\github\zp\SpringNotes\spring-security\spring-shiro\src\main\webapp;</span><br><span class="line"></span><br><span class="line">        #编码格式</span><br><span class="line">        charset utf-8;</span><br><span class="line"></span><br><span class="line">        #代理配置参数</span><br><span class="line">        proxy_connect_timeout 180;</span><br><span class="line">        proxy_send_timeout 180;</span><br><span class="line">        proxy_read_timeout 180;</span><br><span class="line">        proxy_set_header Host $host;</span><br><span class="line">        proxy_set_header X-Forwarder-For $remote_addr;</span><br><span class="line"></span><br><span class="line">        #反向代理的路径（和upstream绑定），location 后面设置映射的路径</span><br><span class="line">        location / &#123;</span><br><span class="line">            proxy_pass http://zp_server1;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        #静态文件，nginx自己处理</span><br><span class="line">        location ~ ^/(images|javascript|js|css|flash|media|static)/ &#123;</span><br><span class="line">            root D:\01_Workspace\Project\github\zp\SpringNotes\spring-security\spring-shiro\src\main\webapp\views;</span><br><span class="line">            #过期30天，静态文件不怎么更新，过期可以设大一点，如果频繁更新，则可以设置得小一点。</span><br><span class="line">            expires 30d;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        #设定查看Nginx状态的地址</span><br><span class="line">        location /NginxStatus &#123;</span><br><span class="line">            stub_status           on;</span><br><span class="line">            access_log            on;</span><br><span class="line">            auth_basic            &quot;NginxStatus&quot;;</span><br><span class="line">            auth_basic_user_file  conf/htpasswd;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        #禁止访问 .htxxx 文件</span><br><span class="line">        location ~ /\.ht &#123;</span><br><span class="line">            deny all;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        #错误处理页面（可选择性配置）</span><br><span class="line">        #error_page   404              /404.html;</span><br><span class="line">        #error_page   500 502 503 504  /50x.html;</span><br><span class="line">        #location = /50x.html &#123;</span><br><span class="line">        #    root   html;</span><br><span class="line">        #&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>好了，让我们来试试吧：</p><ol><li>启动 webapp，注意启动绑定的端口要和 nginx 中的 <code>upstream</code> 设置的端口保持一致。</li><li>更改 host：在 C:\Windows\System32\drivers\etc 目录下的 host 文件中添加一条 DNS 记录</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1 www.helloworld.com</span><br></pre></td></tr></table></figure><ol><li>启动前文中 startup.bat 的命令</li><li>在浏览器中访问 <a href="http://www.helloworld.com，不出意外，已经可以访问了。" target="_blank" rel="noopener">www.helloworld.com，不出意外，已经可以访问了。</a></li></ol><h3 id="负载均衡配置"><a href="#负载均衡配置" class="headerlink" title="负载均衡配置"></a>负载均衡配置</h3><p>上一个例子中，代理仅仅指向一个服务器。</p><p>但是，网站在实际运营过程中，多半都是有多台服务器运行着同样的 app，这时需要使用负载均衡来分流。</p><p>nginx 也可以实现简单的负载均衡功能。</p><p>假设这样一个应用场景：将应用部署在 192.168.1.11:80、192.168.1.12:80、192.168.1.13:80 三台 linux 环境的服务器上。网站域名叫 <a href="http://www.helloworld.com，公网" target="_blank" rel="noopener">www.helloworld.com，公网</a> IP 为 192.168.1.11。在公网 IP 所在的服务器上部署 nginx，对所有请求做负载均衡处理。</p><p>nginx.conf 配置如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">http &#123;</span><br><span class="line">     #设定mime类型,类型由mime.type文件定义</span><br><span class="line">    include       /etc/nginx/mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line">    #设定日志格式</span><br><span class="line">    access_log    /var/log/nginx/access.log;</span><br><span class="line"></span><br><span class="line">    #设定负载均衡的服务器列表</span><br><span class="line">    upstream load_balance_server &#123;</span><br><span class="line">        #weigth参数表示权值，权值越高被分配到的几率越大</span><br><span class="line">        server 192.168.1.11:80   weight=5;</span><br><span class="line">        server 192.168.1.12:80   weight=1;</span><br><span class="line">        server 192.168.1.13:80   weight=6;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   #HTTP服务器</span><br><span class="line">   server &#123;</span><br><span class="line">        #侦听80端口</span><br><span class="line">        listen       80;</span><br><span class="line"></span><br><span class="line">        #定义使用www.xx.com访问</span><br><span class="line">        server_name  www.helloworld.com;</span><br><span class="line"></span><br><span class="line">        #对所有请求进行负载均衡请求</span><br><span class="line">        location / &#123;</span><br><span class="line">            root        /root;                 #定义服务器的默认网站根目录位置</span><br><span class="line">            index       index.html index.htm;  #定义首页索引文件的名称</span><br><span class="line">            proxy_pass  http://load_balance_server ;#请求转向load_balance_server 定义的服务器列表</span><br><span class="line"></span><br><span class="line">            #以下是一些反向代理的配置(可选择性配置)</span><br><span class="line">            #proxy_redirect off;</span><br><span class="line">            proxy_set_header Host $host;</span><br><span class="line">            proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">            #后端的Web服务器可以通过X-Forwarded-For获取用户真实IP</span><br><span class="line">            proxy_set_header X-Forwarded-For $remote_addr;</span><br><span class="line">            proxy_connect_timeout 90;          #nginx跟后端服务器连接超时时间(代理连接超时)</span><br><span class="line">            proxy_send_timeout 90;             #后端服务器数据回传时间(代理发送超时)</span><br><span class="line">            proxy_read_timeout 90;             #连接成功后，后端服务器响应时间(代理接收超时)</span><br><span class="line">            proxy_buffer_size 4k;              #设置代理服务器（nginx）保存用户头信息的缓冲区大小</span><br><span class="line">            proxy_buffers 4 32k;               #proxy_buffers缓冲区，网页平均在32k以下的话，这样设置</span><br><span class="line">            proxy_busy_buffers_size 64k;       #高负荷下缓冲大小（proxy_buffers*2）</span><br><span class="line">            proxy_temp_file_write_size 64k;    #设定缓存文件夹大小，大于这个值，将从upstream服务器传</span><br><span class="line"></span><br><span class="line">            client_max_body_size 10m;          #允许客户端请求的最大单文件字节数</span><br><span class="line">            client_body_buffer_size 128k;      #缓冲区代理缓冲用户端请求的最大字节数</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="网站有多个-webapp-的配置"><a href="#网站有多个-webapp-的配置" class="headerlink" title="网站有多个 webapp 的配置"></a>网站有多个 webapp 的配置</h3><p>当一个网站功能越来越丰富时，往往需要将一些功能相对独立的模块剥离出来，独立维护。这样的话，通常，会有多个 webapp。</p><p>举个例子：假如 <a href="http://www.helloworld.com" target="_blank" rel="noopener">www.helloworld.com</a> 站点有好几个 webapp，finance（金融）、product（产品）、admin（用户中心）。访问这些应用的方式通过上下文(context)来进行区分:</p><p><a href="http://www.helloworld.com/finance/" target="_blank" rel="noopener">www.helloworld.com/finance/</a></p><p><a href="http://www.helloworld.com/product/" target="_blank" rel="noopener">www.helloworld.com/product/</a></p><p><a href="http://www.helloworld.com/admin/" target="_blank" rel="noopener">www.helloworld.com/admin/</a></p><p>我们知道，http 的默认端口号是 80，如果在一台服务器上同时启动这 3 个 webapp 应用，都用 80 端口，肯定是不成的。所以，这三个应用需要分别绑定不同的端口号。</p><p>那么，问题来了，用户在实际访问 <a href="http://www.helloworld.com" target="_blank" rel="noopener">www.helloworld.com</a> 站点时，访问不同 webapp，总不会还带着对应的端口号去访问吧。所以，你再次需要用到反向代理来做处理。</p><p>配置也不难，来看看怎么做吧：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">http &#123;</span><br><span class="line">    #此处省略一些基本配置</span><br><span class="line"></span><br><span class="line">    upstream product_server&#123;</span><br><span class="line">        server www.helloworld.com:8081;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    upstream admin_server&#123;</span><br><span class="line">        server www.helloworld.com:8082;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    upstream finance_server&#123;</span><br><span class="line">        server www.helloworld.com:8083;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        #此处省略一些基本配置</span><br><span class="line">        #默认指向product的server</span><br><span class="line">        location / &#123;</span><br><span class="line">            proxy_pass http://product_server;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location /product/&#123;</span><br><span class="line">            proxy_pass http://product_server;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location /admin/ &#123;</span><br><span class="line">            proxy_pass http://admin_server;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location /finance/ &#123;</span><br><span class="line">            proxy_pass http://finance_server;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="https-反向代理配置"><a href="#https-反向代理配置" class="headerlink" title="https 反向代理配置"></a>https 反向代理配置</h3><p>一些对安全性要求比较高的站点，可能会使用 HTTPS（一种使用 ssl 通信标准的安全 HTTP 协议）。</p><p>这里不科普 HTTP 协议和 SSL 标准。但是，使用 nginx 配置 https 需要知道几点：</p><ul><li>HTTPS 的固定端口号是 443，不同于 HTTP 的 80 端口</li><li>SSL 标准需要引入安全证书，所以在 nginx.conf 中你需要指定证书和它对应的 key</li></ul><p>其他和 http 反向代理基本一样，只是在 <code>Server</code> 部分配置有些不同。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">#HTTP服务器</span><br><span class="line">server &#123;</span><br><span class="line">    #监听443端口。443为知名端口号，主要用于HTTPS协议</span><br><span class="line">    listen       443 ssl;</span><br><span class="line"></span><br><span class="line">    #定义使用www.xx.com访问</span><br><span class="line">    server_name  www.helloworld.com;</span><br><span class="line"></span><br><span class="line">    #ssl证书文件位置(常见证书文件格式为：crt/pem)</span><br><span class="line">    ssl_certificate      cert.pem;</span><br><span class="line">    #ssl证书key位置</span><br><span class="line">    ssl_certificate_key  cert.key;</span><br><span class="line"></span><br><span class="line">    #ssl配置参数（选择性配置）</span><br><span class="line">    ssl_session_cache    shared:SSL:1m;</span><br><span class="line">    ssl_session_timeout  5m;</span><br><span class="line">    #数字签名，此处使用MD5</span><br><span class="line">    ssl_ciphers  HIGH:!aNULL:!MD5;</span><br><span class="line">    ssl_prefer_server_ciphers  on;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        root   /root;</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="静态站点配置"><a href="#静态站点配置" class="headerlink" title="静态站点配置"></a>静态站点配置</h3><p>有时候，我们需要配置静态站点(即 html 文件和一堆静态资源)。</p><p>举例来说：如果所有的静态资源都放在了 <code>/app/dist</code> 目录下，我们只需要在 <code>nginx.conf</code> 中指定首页以及这个站点的 host 即可。</p><p>配置如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">worker_processes  1;</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line">    sendfile        on;</span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line"></span><br><span class="line">    gzip on;</span><br><span class="line">    gzip_types text/plain application/x-javascript text/css application/xml text/javascript application/javascript image/jpeg image/gif image/png;</span><br><span class="line">    gzip_vary on;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  static.zp.cn;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            root /app/dist;</span><br><span class="line">            index index.html;</span><br><span class="line">            #转发任何请求到 index.html</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后，添加 HOST：</p><p>127.0.0.1 static.zp.cn</p><p>此时，在本地浏览器访问 static.zp.cn ，就可以访问静态站点了。</p><h3 id="搭建文件服务器"><a href="#搭建文件服务器" class="headerlink" title="搭建文件服务器"></a>搭建文件服务器</h3><p>有时候，团队需要归档一些数据或资料，那么文件服务器必不可少。使用 Nginx 可以非常快速便捷的搭建一个简易的文件服务。</p><p>Nginx 中的配置要点：</p><ul><li>将 autoindex 开启可以显示目录，默认不开启。</li><li>将 autoindex_exact_size 开启可以显示文件的大小。</li><li>将 autoindex_localtime 开启可以显示文件的修改时间。</li><li>root 用来设置开放为文件服务的根路径。</li><li>charset 设置为 <code>charset utf-8,gbk;</code>，可以避免中文乱码问题（windows 服务器下设置后，依然乱码，本人暂时没有找到解决方法）。</li></ul><p>一个最简化的配置如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">autoindex on;# 显示目录</span><br><span class="line">autoindex_exact_size on;# 显示文件大小</span><br><span class="line">autoindex_localtime on;# 显示文件时间</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">    charset      utf-8,gbk; # windows 服务器下设置后，依然乱码，暂时无解</span><br><span class="line">    listen       9050 default_server;</span><br><span class="line">    listen       [::]:9050 default_server;</span><br><span class="line">    server_name  _;</span><br><span class="line">    root         /share/fs;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="跨域解决方案"><a href="#跨域解决方案" class="headerlink" title="跨域解决方案"></a>跨域解决方案</h3><p>web 领域开发中，经常采用前后端分离模式。这种模式下，前端和后端分别是独立的 web 应用程序，例如：后端是 Java 程序，前端是 React 或 Vue 应用。</p><p>各自独立的 web app 在互相访问时，势必存在跨域问题。解决跨域问题一般有两种思路：</p><ol><li><strong>CORS</strong></li></ol><p>在后端服务器设置 HTTP 响应头，把你需要运行访问的域名加入加入 <code>Access-Control-Allow-Origin</code> 中。</p><ol><li><strong>jsonp</strong></li></ol><p>把后端根据请求，构造 json 数据，并返回，前端用 jsonp 跨域。</p><p>这两种思路，本文不展开讨论。</p><p>需要说明的是，nginx 根据第一种思路，也提供了一种解决跨域的解决方案。</p><p>举例：<a href="http://www.helloworld.com" target="_blank" rel="noopener">www.helloworld.com</a> 网站是由一个前端 app ，一个后端 app 组成的。前端端口号为 9000， 后端端口号为 8080。</p><p>前端和后端如果使用 http 进行交互时，请求会被拒绝，因为存在跨域问题。来看看，nginx 是怎么解决的吧：</p><p>首先，在 enable-cors.conf 文件中设置 cors ：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"># allow origin list</span><br><span class="line">set $ACAO &apos;*&apos;;</span><br><span class="line"></span><br><span class="line"># set single origin</span><br><span class="line">if ($http_origin ~* (www.helloworld.com)$) &#123;</span><br><span class="line">  set $ACAO $http_origin;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">if ($cors = &quot;trueget&quot;) &#123;</span><br><span class="line">    add_header &apos;Access-Control-Allow-Origin&apos; &quot;$http_origin&quot;;</span><br><span class="line">    add_header &apos;Access-Control-Allow-Credentials&apos; &apos;true&apos;;</span><br><span class="line">    add_header &apos;Access-Control-Allow-Methods&apos; &apos;GET, POST, OPTIONS&apos;;</span><br><span class="line">    add_header &apos;Access-Control-Allow-Headers&apos; &apos;DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type&apos;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">if ($request_method = &apos;OPTIONS&apos;) &#123;</span><br><span class="line">  set $cors &quot;$&#123;cors&#125;options&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">if ($request_method = &apos;GET&apos;) &#123;</span><br><span class="line">  set $cors &quot;$&#123;cors&#125;get&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">if ($request_method = &apos;POST&apos;) &#123;</span><br><span class="line">  set $cors &quot;$&#123;cors&#125;post&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>接下来，在你的服务器中 <code>include enable-cors.conf</code> 来引入跨域配置：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"># ----------------------------------------------------</span><br><span class="line"># 此文件为项目 nginx 配置片段</span><br><span class="line"># 可以直接在 nginx config 中 include（推荐）</span><br><span class="line"># 或者 copy 到现有 nginx 中，自行配置</span><br><span class="line"># www.helloworld.com 域名需配合 dns hosts 进行配置</span><br><span class="line"># 其中，api 开启了 cors，需配合本目录下另一份配置文件</span><br><span class="line"># ----------------------------------------------------</span><br><span class="line">upstream front_server&#123;</span><br><span class="line">  server www.helloworld.com:9000;</span><br><span class="line">&#125;</span><br><span class="line">upstream api_server&#123;</span><br><span class="line">  server www.helloworld.com:8080;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">  listen       80;</span><br><span class="line">  server_name  www.helloworld.com;</span><br><span class="line"></span><br><span class="line">  location ~ ^/api/ &#123;</span><br><span class="line">    include enable-cors.conf;</span><br><span class="line">    proxy_pass http://api_server;</span><br><span class="line">    rewrite &quot;^/api/(.*)$&quot; /$1 break;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  location ~ ^/ &#123;</span><br><span class="line">    proxy_pass http://front_server;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>到此，就完成了。</p><h2 id="更多内容"><a href="#更多内容" class="headerlink" title="更多内容"></a>更多内容</h2><ul><li><a href="http://tool.oschina.net/apidocs/apidoc?api=nginx-zh" target="_blank" rel="noopener">Nginx 的中文维基</a></li><li><a href="https://github.com/dunwu/nginx-tutorial/blob/master/install-nginx.md" target="_blank" rel="noopener">Nginx 安装</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Nginx-简易教程&quot;&gt;&lt;a href=&quot;#Nginx-简易教程&quot; class=&quot;headerlink&quot; title=&quot;Nginx 简易教程&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://www.cnblogs.com/jingmoxukong/p/5945200.
      
    
    </summary>
    
    
      <category term="待分类" scheme="https://xiliangsong.github.io/tags/%E5%BE%85%E5%88%86%E7%B1%BB/"/>
    
  </entry>
  
  <entry>
    <title> 香港问题的来龙去脉 【转】</title>
    <link href="https://xiliangsong.github.io/2019/08/04//articles/2019/08/04/1564905517377.html/"/>
    <id>https://xiliangsong.github.io/2019/08/04//articles/2019/08/04/1564905517377.html/</id>
    <published>2019-08-04T07:58:37.000Z</published>
    <updated>2019-08-05T02:46:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>转自微信公众号 <strong>缓缓君</strong><a href="[https://mp.weixin.qq.com/s?__biz=MzI1NzA2NTc3MQ==&mid=2669179682&idx=1&sn=d7927151a872cab135a0b60b38b7c8dd&chksm=f0f1c566c7864c70d6142fddcc7ea14cacd2320b66d6682f2da8ae1ff23d590fb95c40515339&mpshare=1&scene=2&srcid=0803fBFtDPsx61BadqPwHKWw&sharer_sharetime=1564826152762&sharer_shareid=62bf3f90434f18f568795e57497f339f&from=timeline&clicktime=1564905301#rd](https://mp.weixin.qq.com/s?__biz=MzI1NzA2NTc3MQ==&mid=2669179682&idx=1&sn=d7927151a872cab135a0b60b38b7c8dd&chksm=f0f1c566c7864c70d6142fddcc7ea14cacd2320b66d6682f2da8ae1ff23d590fb95c40515339&mpshare=1&scene=2&srcid=0803fBFtDPsx61BadqPwHKWw&sharer_sharetime=1564826152762&sharer_shareid=62bf3f90434f18f568795e57497f339f&from=timeline&clicktime=1564905301#rd)">8月1日</a></p><p>文 | 缓缓君<br>首发 | 缓缓说</p><h3 id="01"><a href="#01" class="headerlink" title="01"></a>01</h3><p>香港问题比较复杂，不仅关乎政治和经济，还存在教育、司法、舆论环境、身份认同以及外部势力等因素。</p><p>只不过，从公众的角度来看，这一次的风波都是从“修例”开始的，所以今天先从修例开始讲起。</p><p>所谓的“修例”，指的是香港特别行政区政府提交立法会审议《2019年逃犯及刑事事宜相互法律协助法例（修订）条例草案》（民间和媒体一般也将其称为《逃犯条例》或者《引渡条例》）。</p><p>《逃犯条例》并非是一项新增的法律，而是在香港回归之前就有。</p><p>根据该条例，香港与英国、美国、新加坡等20个司法管辖区签有移交逃犯的协议（也就是引渡协议），但其中不包括中国大陆、台湾以及澳门。</p><p>为什么要修订《逃犯条例》？</p><p>官方有官方的说法，民间有民间的想法。</p><p>这里先介绍官方的版本，据新华社报道：</p><p>“香港特区政府提出此次修例的目的是处理去年发生在台湾的谋杀案，同时堵塞香港整体刑事事宜协作制度方面的漏洞……修订《逃犯条例》可以建立地区间的司法协助关系，也是落实基本法的应有之义，更是维护香港法治核心价值和巩固提升香港良好法治形象的重要举措。”</p><p>官方说的这起谋杀案发生于2018年2月，一对香港情侣去台湾旅行，结果在旅行途中，20岁的香港姑娘潘晓颖被其男友陈同佳杀害。</p><p>根据媒体报道，女孩遇害时已怀孕3个多月，他们去台湾是为了一起过情人节，然而在旅行途中，两人多次发生争吵。</p><p>2018年2月17日凌晨2点左右，两人再次爆发口角，争吵中潘晓颖失去理智，说肚子里的孩子是前男友的，还把自己和前男友亲热的视频拿给陈同佳看。</p><p>这一行为彻底激怒了陈同佳，他抓起潘晓颖的头发，将她的头朝墙上狠狠地撞了过去，然后用双手掐住她的脖子，将其活活掐死。</p><p>杀人后，陈同佳表现得异常冷静。</p><p>他把潘晓颖的尸体装入到新买的粉色行李箱中，并把她的个人物品分装到4个袋子里，然后他就去睡了一觉。</p><p>醒来后，陈同佳把那4个袋子分别扔到了不同的垃圾箱里，之后又坐了15站的地铁，拖着行李箱到处寻找抛尸地点，并最终将其丢弃在一个公园的草丛里。</p><p>再然后陈同佳就像没事人一样，大摇大摆回到香港，并从潘晓颖的银行卡中取出19000元港币。</p><p>3月5日，迟迟联系不上女儿的潘晓颖父母分别在香港、台湾两地报警。</p><p>2018年3月13日，陈同佳在香港被捕，并承认是自己杀害了潘晓颖。</p><p>然而法院却只判处陈同佳29个月刑期！</p><p>原因是陈同佳杀人抛尸的地点是在台湾，按照香港实行的属地管辖原则，香港法院对台湾杀人案件没有管辖权，所以香港警方无法以谋杀罪起诉陈同佳；香港和台湾也没有签署过引渡条约，所以香港警方也无法把陈同佳送到台湾去受审。</p><p>这就是现有《逃犯条例》所存在的法律漏洞。</p><p>在现有法律框架下，香港警方只能以盗窃现金、手机等行为，指控陈同佳4项洗黑钱罪外加3项盗窃罪，这就是为什么刑期只有29个月，再考虑服刑期间若行为良好可在刑期三分之二时假释，理论上陈同佳最快于今年10月就有可能出狱。</p><p>这样的结果显然是潘晓颖的父母所无法接受的。</p><p>2019年2月12日，潘晓颖的母亲召开记者会恳请香港政府尽快修订《逃犯条例》，将陈同佳绳之以法。</p><p>因为立法会如果不能在7月休会前完成立法，那么在下一个会期开始前，陈同佳将恢复自由身，到时候他可能会逃离香港，从此逃脱法律的制裁。</p><p>在这一背景下，香港于2月13日正式启动修例程序。</p><p>考虑到除台湾之外，香港也没有和大陆、澳门等（国家和地区）签署引渡协议，仅仅是大陆逃到香港的重犯就多达300多人，受现有《逃犯条例》的限制，香港并不能将这些逃犯移交内地入罪，所以香港政府本打算趁着这次修例的机会，把移交逃犯的范围扩大到大中华区，从而把现有法律上的漏洞和缺陷一并堵上。</p><p>以上是官方版本的介绍，但民间有不同的看法。</p><p>修例草案一经提出，就引发了激烈的争论。</p><p>最先跳出来反对的是香港的商界和法律界。</p><p>在最初的修例草案中，涉及到46项移交罪行，其中一部分和商业罪行有关，商界认为这有可能影响香港的营商环境，建议香港政府剔除当中的商业罪行。</p><p>3月底，香港政府在听取商界意见后，剔除了其中9项商业和个人罪行（包括破产、证券期货、侵权、电脑罪行等），并把引渡的门槛由公诉判入狱1年以上的罪行，提高至3年（或以上）。</p><p>政府的让步获得了商界的支持，但法律界依然反对修例，他们的理由是修例会破坏香港的司法独立。</p><p>5月底，香港政府再次做出让步，将引渡门槛由3年（或）以上刑期的罪行，提高到7年。</p><p>这就变相剔除了包括刑事恐吓、把枪支交给无牌人士、与未成年少女发生性行为等色情活动在内的七项罪行（这些罪行的刑期在7年以下，引渡门槛提高到7年，则犯有这些罪行的罪犯不会被引渡）。</p><p>然而事态并没有往好的方向发展，反而急速恶化。</p><p>经过再次修订的《逃犯条例》草案本应于6月12日在立法会进行二读辩论，但就在6月9日，香港发生了百万民众大游行。</p><p>游行的主办方为“香港民间人权阵线”（简称“民阵”，这个组织后面再细讲），他们散布消息称，新修订的《逃犯条例》一旦通过，中央政府就会利用条例涵盖范围罗织罪名任意拘捕和引渡身在香港的人士，令被引渡人遭受不公平的审判，使逃犯条例成为政治打压的工具。</p><p>与此同时，香港的大律师公会、律师会和多个宗教团体均发声明反对修例。</p><p>在舆论的发酵过程中，修例的影响和目的被不断夸张，诸如“人人被送中（任何一个香港人都可能被送到大陆）”“中国政府的目的是要吓唬让我们，让我们不敢说话”等说法开始在民间传播。</p><p>正是在这一舆论背景下，6月9日，香港百万民众走上街头，反对修例，其中有数百人摧毁立法会停车场车闸并冲入立法会示威区，有警员受伤。</p><p>6月15日，香港特区行政长官林郑月娥宣布，修例工作全面暂停，并呼吁社会各界尽快恢复平静，避免再有执法人员和市民受到伤害。</p><p>国务院港澳办发言人随后表示，对香港政府的决定表示支持、尊重和理解。</p><p>以上就是这场风波的第一阶段。</p><p>对于香港人的担心，我在情感上可以理解，但如果你去仔细研究过那些条例就会知道，舆论宣传中有太多误解。</p><p>新的条例在条款上做了多重保障：</p><p>1.适用于移交到内地的罪犯必须是犯有37种国际公认、且刑期都在7年或以上的罪犯。</p><p>2.移交必须经过特区法院和特首双批准才能实施。</p><p>3.条例中明确规定有 “八不移交”——不符合“双重犯罪”原则的不移交、政治罪行不移交、死刑犯不移交，并且不涉及新闻、言论、学术、出版等方面的行为，所以并不会影响香港的新闻自由和言论自由。</p><p>有些香港人担心，一旦《基本法》（即《中华人民共和国香港特别行政区基本法》）二十三条获得通过，未来大陆会以颠覆国家罪或者间谍罪等政治罪名从香港引渡异见人士，从而伤害香港的言论自由。</p><p>对于《基本法》第二十三条，香港民众已经非常熟悉了，但大陆这边其实很多人并不是太了解，所以这里再专门解释下。</p><p>《基本法》第二十三条的内容为：</p><p>“香港特别行政区应自行立法禁止任何叛国、分裂国家、煽动叛乱、颠覆中央人民政府及窃取国家机密的行为，禁止外国的政治性组织或团体在香港特别行政区进行政治活动，禁止香港特别行政区的政治性组织或团体与外国的政治性组织或团体建立联系。”</p><p>这是一条关乎国家安全的条文，但在2003年征求意见的时候，遭到了50万人的游行反对。</p><p>那场游行的组织者同样是“香港民间人权阵线”，他们以二十三条剥夺人权和言论自由为由，呼吁香港民众反对二十三条立法。大游行发生后，时任香港行政长官董建华随后宣布，撤回二十三条立法草案。</p><p>从这里你也可以看出，香港真的是很自由的地方，为了保护人权和言论自由，煽动叛乱、搞间谍活动都不属于违法行为。</p><p>但是，这也是为什么香港会和里斯本、卡萨布兰卡被并称为世界三大“间谍之都”。</p><p>2013年，斯诺登在香港接受英国《卫报》采访时称，美国中情局（CIA）的香港分站就设在美国驻香港领事馆内，里面至少潜伏着15名 CIA 特工。</p><p>斯诺登还不无讽刺地说：“我肯定，他们在下周将会很忙。”（因为被他曝光了）</p><p>那么如果未来《基本法》第二十三条获得通过，香港一旦也有了分裂国家的罪行，大陆是否会通过《逃犯条例》引渡国内外间谍和香港异见人士呢？</p><p>其实在“八不移交”中有明确提到，政治罪行不移交，而叛国、分裂国家、煽动叛乱、从事间谍行为等等，这些全都属于政治罪，所以即便新修订的《逃犯条例》和二十三条在未来获得通过，间谍和异见人士也都不会被移交中央政府，哪怕特首下令也没有用。</p><p>《逃犯条例》最大的作用还是在于堵住香港现有的法律漏洞，至于“人人被送中”这样夸张的说法，真的是在煽动民意了。</p><p>当然，在“港人治港，高度自治”的制度框架下，民众当然有权利表达反对。如果民众不能理解，你也可以认为是政府的解释工作做得不到位。</p><p>所以，如果这次的事情只是发展到第一阶段就收尾了，政府和民众各退一步，通过沟通和进一步的讨论来解决分歧，那我觉得也无可厚非。</p><p>然而事态并没有在香港政府的让步下结束，反而愈演愈烈。</p><h3 id="02"><a href="#02" class="headerlink" title="02"></a>02</h3><p>第二阶段的时间线是6月15日至7月14日，和平游行开始往暴力方向演进，其标志性事件为警察被咬断手指。</p><p>就在香港政府宣布停止修例之后，“香港民间人权阵线”不依不饶，不仅要求彻底撤回《逃犯条例》（此前为暂停），还要求特首下台。</p><p>6月21日，示威者包围警察总部并堵塞出入口，以铁马、水马设置路障，封锁附近主要交通干道，向警察总部投掷鸡蛋，用激光照射警员。期间，因为道路被堵，救护车无法进入，有孕妇被困数小时才被送往医院。</p><p>6月26日，示威者再次包围警察总部，并拆掉了“香港警察总部”牌匾。</p><p>7月1日，示威者阻碍升旗，并用铁马、铁笼车冲击立法会，在众目睽睽之下撕掉基本法，涂污香港特区区徽，甚至还把龙狮旗挂在了主席台。</p><p>龙狮旗是英国殖民香港时期所使用的的地区旗帜，当龙狮旗被挂在立法会主席台的那一刻，这场行动的性质已经完全变了。</p><p>中央政府给了香港高度自治的权利，但是别忘了，“一国”是“两制”的前提，如果有人要闹独立，那么香港现在已经拥有的那些都终将失去。</p><p>在阻扰升旗和冲击立法会的过程中，发生了袭警行为，示威者以不同的方式冲击前线警察，包括以化学物品作为武器，导致多名警务人员受伤。</p><p>7月2日，有美国媒体采访了一名在香港生活的英国老人，问他“你昨天看到了什么”，这名英国老人说，他看到了三件事，分别发生在早上、下午和晚上：</p><p>“我看到了早上的暴力示威，是在升旗的时候发生的。当时我其实是在警戒线外，看到他们蒙着脸，还带着护目镜，他们用帽子面具等东西全都把脸蒙住，让别人认不出他们的身份来。我没遮住自己的身份，我四处走动，因为在香港我是一个自由人。</p><p>然后下午我跟大家一起往前走，那就是一个和平的游行活动，就跟两三天前周末的时候一样，人不是很多，但都是和平人士。</p><p>但昨晚我看到了暴力行为，他们破坏公物，造成了现在你看到的这种肮脏恶心的局面。”</p><p>这位英国老人说，那天晚上，他哭了。</p><p>“我知道他们所做的事，阻碍了香港至少两到三代人的和平民主发展，而对于整个中国来说，将是四到五代人的影响。这是最令人难过的事。</p><p>这些抗议者可能觉得自己在做好事，但我觉得他们中大多数人只是暴徒和破坏者，就是来找警察争斗的——他们中的多数人。</p><p>他们所做的事是对世界四分之一人口的巨大破坏，这是最悲哀的事。在我背后， 那里发生的是一场悲剧。”</p><p>之后记者又问：“你觉得这件事对年轻人，尤其是对孩子们来说有什么影响？他们担心自己的未来，他们觉得自己有权利这么做。”</p><p>这位英国老人是这么回答的：</p><p>“他们是有权利抗议，他们也有权利投票，但他们没有权利做出暴力行为。香港是基于法治的地方，而不是基于动乱。没人有权做这种事情。</p><p>如果我到你家，把你家砸得一团糟，把你所有珍贵的东西都打碎，然后转身离开跟你说：‘真抱歉，我就是不喜欢你。’</p><p>我有权那么做吗？</p><p>不，我没有那种权利，所有人都没有权利这样做。</p><p>香港是一个自由的地方，自由到你在香港很少有不能做的事情，年轻人根本不明白这一点，他们没有意识到在香港生活有多么美好。”</p><p>我非常赞同这位英国老人的观点，很多香港人，尤其是年轻人，他们今天所拥有的的一切，并不是理所当然就能有的，背后有很多的支持和大陆源源不断地输血（这个后面再说）。</p><p>7月6日、7月7日、7月13日，暴力行为继续发酵，更多警察遭到了袭击，期间也有美国国旗出现在了游行的队伍。</p><p>7月14日，暴力行动推向了高潮。</p><p>据香港《星岛日报》报道，发生于14日下午的沙田游行期间，有人在主干道冲撞封锁线企图占据马路，并设立铁马阵，有组织地在沙田正街分发雨伞等物资，同时挖开路面砖头，大批防暴警员到场布防，双方展开对峙。</p><p>晚上8时许，警方多次发出警告，但示威者从商场高楼层扔下大量雨伞、头盔及水瓶，在警察后退的过程中，其中一名警察“落单”，示威者竟然将其从自动扶梯上踹了下去，然后这名警察就一路从扶梯上滚了下去，然而这些暴徒并没有打算放过他，他们像狼群一样围了过去拳打脚踢。</p><p>14日当天至少有11名警察受伤，其中最惨的一位被咬断了手指，而且是整个关节都被咬下来的那种。</p><p>咬掉警察手指的暴徒名叫杜启华，是知名高校——香港大学的一名毕业生。</p><p>点击查看大图</p><p>根据控方在法庭上的陈述，晚上9时40分，杜启华在没受挑衅及发出宣示下，突然用雨伞打中一名警员后颈，其他警员见状，对其进行包围及制止。纠缠期间，梁警官跌倒地上，杜趁机用伞打其头部，梁在用手挡格时，右手无名指骨折。其他警员合力控制杜，但杜极力挣扎，将梁警官右手无名指前节咬断。</p><p>据《大公报》的报道，控方读到这段时，呈上了断指警长的伤势照片，法官观看时用手掩嘴。</p><p>杜启华的辩护律师兵不同意控方的说法，他辩称杜启华咬断警察手指是因为梁警官主动把手指塞到了杜的口中。</p><p>7月16日，法官以1万元保释金+不准涉足新城广场为条件，同意了杜启华的保释请求。</p><p>不知道你怎么看这个判决，但我觉得是有问题的，对暴行的轻判，对警务人员权利的漠视，只会让暴力分子更加肆无忌惮。</p><p>这里就牵扯出香港的司法问题了，香港的司法界长期被自由派法官所掌控，而且这些自由派法官大多都有外国国籍。</p><p>2016年新一届香港终审法院的常任和非常任大法官任命中，17位大法官中仅有2人为中国香港籍，其余均为外国国籍或双重国籍。</p><p>香港的司法界一直都是被外国人控制的（原因和英国殖民时期的历史有关），这一历史遗留问题直到现在都没能得到解决。</p><p>所以香港的司法裁决，都受制于外国人价值理念（法官个人理念对司法裁决的影响，可以参考卡瓦诺上任美国最高院大法官过程中所经历的闹剧和党争，而特朗普全力护他当选最高院大法官也换来了丰厚的政治利益，在前几天美国最高法院关于修墙的裁决中，以5比4的投票结果允许特朗普动用25亿美金在美墨边境修墙，这意味着5名保守派大法官全部支持特朗普，而4名自由派大法官全部反对特朗普）。</p><p>早在2014年，香港的“占中”事件中，就发生了颇受争议的“七警察事件”。</p><p>其实事实层面是没有争议的：</p><p>港独组织“公民党”的成员曾健超，在占中运动中向11名警务人员泼粪水和尿液挑衅，之后拒捕。警察在受到袭击和侮辱后，发生了殴打曾健超行为并被拍到。曾健超伤无大碍但拒绝拍照记录伤情。</p><p>但司法判决的结果却引发了巨大的争议：</p><p>外籍法官杜大卫判决，7名警察被判监禁2年，而曾健超获判监禁5个星期且获准用300元得到保释。</p><p>当时警察一方的律师表示，作为律师，他遵守法院的判决，但他实在忍不住要谈一下自己的感受：</p><p>“这两年的刑期我认为是太重，如果我们回望一些过往的案例，关于袭击引致人身伤害，最轻的是社会服务令，之后可以判两、三个星期，甚至于两三个月监禁，跟两年这个刑期是有比较大的距离。大家记得扔砖的案子，一个涉事的年轻犯人，被判的是感化令。一些人会觉得，原来扔砖，破坏我们的社会公益，破坏我们的社会安宁，随时可能令人失去生命，判的都是感化令。”</p><p>他认为警察当然应该遵守法院的判决，但他也希望大家能够和他一起去想一想：</p><p>“在占领期间，警员要付出多大的代价，长时间执勤。我听说有人说是130小时的长时间执行任务，没有休息，面对示威者如狼似虎般地来欺侮他们，打压他们，挑衅他们，打不还手，骂不还口，在这个情况下，这些执行任务的警员是面对好大好大压力的，精神和情绪是达到爆炸点，有没有人体谅过他们？现在反过来梁国雄（香港前立法会议员）今日站在这里，刚才还在谴责警察。我想请大家、公众听到我这段发言，大家回去思考一下，想一下。这件事发生之后，我们现在见到这个判决，大家的感受如何？”</p><p>香港的司法判决有一个特点：哪怕一个人实际采取了暴行，但只要他打着民主和争取人权的旗号，就会被法律所偏袒；与之相应的是，香港警察却只能谨小慎微。</p><p>香港的那些自由派人士认为这是理所当然，毕竟警察代表的是强势的公权力，是一种强权，而民众是弱势群体，法律要保护弱势群体，要保护香港人引以为傲的自由和民主。</p><p>但问题是，强和弱从来都不是绝对的。</p><p>如果一个地方的司法体系是秉着“谁弱谁有理”来判决的，那么原本的强者会变得战战兢兢，弱者会变得肆无忌惮，于是强弱关系互换。</p><p>示威者随时可能化身为暴徒，因为反正警察也不敢还手，所以他们会肆无忌惮地袭击警察，这无异于在鼓励暴力。</p><p>而且警察是一个特殊的群体，他们的职责是保护老百姓，但也别忘了，警察这份职业的背后，是一个个有血有肉的人。</p><p>他们也会觉得苦，觉得累，觉得委屈，会感到不安和恐惧，如果现实一次次让警察寒了心，最后受苦的只会是老百姓。</p><p>相比之下，美国警察在2011年的“占领华尔街”运动中，对试图攻击他们的示威群众可是毫不手软的。</p><p>从背摔，到扔出围栏，到就地拷住，甚至连那些已经服软的示威者都被要求蹲在地上被警察喷辣椒水。</p><p>相比之下，香港的警察真的已经非常克制了。</p><p>为什么我把7月14日的断指事件划入到这次香港风暴的第二阶段？</p><p>因为我觉得这个事会对警察群体的心理冲击会特别大。</p><p>试想一下，如果是你，或者你的父亲、兄弟被人这样咬断了手指，你会怎么想？</p><p>然而让警察失望的是，暴徒竟然在两天后就获得了保释。</p><h3 id="03"><a href="#03" class="headerlink" title="03"></a>03</h3><p>7月20日，超过30万香港市民在金钟添马公园冒雨举行“守护香港”大型集会。</p><p>霍英东集团副总裁霍启刚，谴责激进人士的暴力行径，强调表达自己意见并不是使用暴力的借口，并呼吁香港年轻人能够冷静下来。</p><p>霍启刚表示，他深信大部分的香港年轻人并不是暴力的，他呼吁大家用沟通来解决问题，而不是暴力。</p><p>然而暴力依然没有停止，而且变本加厉。</p><p>7月20日，警察在突击检查荃湾区一座工厂大厦的时候，发现了一公斤的TATP烈性炸药和“燃烧弹”电油等物品，以及“香港民间人权阵线”的衣服，这意味着可能已经有人在密谋恐怖袭击了。</p><p>7月21日又发生了两件大事：一是示威者冲进了中联办（中央人民政府驻香港特别行政区联络办公室 ），二是元朗发生了打人事件。</p><p>激进分子先后向中联办大楼投掷鸡蛋、玻璃瓶、砖块、油漆弹，用黑色液体玷污国徽，并在中联办外墙上喷涂“支那”等侮辱国家、民族的字句。</p><p>这已经不仅仅是在挑衅中央政府，甚至是对全体中国人的侮辱。</p><p>另据《大公报》报道，现场暴徒高度组织化、各有分工，有人用对讲机联络，有人打电话召集讨论部署，有人戴上头盔搬铁马，有人即场制作油漆弹，有人调配装备。暴徒之后在中联办大楼外以粤语及英文发表所谓宣言，称不排除成立“临时立法会”。</p><p>其实之前就一直有传言说，由反修例引发的示威游行之所以不断往暴力方向演进，是因为背后有外部势力在搅局。</p><p>最初露出端倪的是，有多名外国人持对讲机和黑衣人（示威游行群众都统一穿黑衣）进行指挥和联络，而且这些人的手段非常专业，他们会特意把监控摄像头扒下来，把线路剪断。</p><p>而中国外交部这边，最初都是点到为止，告诫某些国家不要干预香港事务，直到7月30日，华春莹在主持外交部例行记者会时，直接点名说，这是美方的一个“作品”。</p><p>同一天，人民日报发文章揭露“民主基金会”（National Endowment for Democracy ，简称NED）资助香港的反对派和港独分子的证据。</p><p>其中在2014年的“占中”运动中，NED就资助过该运动，当时国内媒体谴责NED插手香港事务、资助“占中”活动时，该基金会还信誓旦旦出了一份公告，坚称自己“从未”有过此类行为。</p><p>结果被维基解密实锤打脸。</p><p>而在这次风暴发生之前，以李柱铭为首的反对派在5月份出访美国，跑去NED专门发表了煽动性极强的演讲，并参加了该基金会组织的论坛研讨。</p><p>当然，你也可以怀疑这只是中国方面的揣测，但其实美国这边也有人持有同样的想法。</p><p>在美国近期的一档电视节目中，主持人就香港的局势向英国前国会议员乔治加洛韦进行了电视采访，这名英国前国会议员表示，“我绝不怀疑外国势力有参与这场混乱”，他认为这只是另一场颜色革命，就如同在乌克兰和格鲁吉亚发生的那样。</p><p>随后，主持人又通过两名美女记者来谈论香港的局势，其中一人是RS特派员米雪尔·格林斯坦，她数月以来一直致力于研究中美之间的消息。</p><p>当主持人问她，是否认同那名英国前国会议员的观点时，米雪尔表示，她完全同意，而且还提供了更多的细节。</p><p>“香港民间人权阵线”旗下的组织中，包括香港人力资源管理学会、香港联工盟，香港记协、公民党、工党、民主党等等，米雪尔说这些组织有一个共同点，就是全部都收了美国国家民主基金会（NED）的钱。</p><p>从90时代开始，NED就已经在长期资助香港的这些组织了。</p><p>之后主持人又问，这个NED到底是什么来头？</p><p>米雪尔则引用NED主席卡尔·格许曼的话说，这个组织成立的目的，就是做一些CIA（美国中情局）不方便公开进行的操作，实质上是为CIA工作。</p><p>之后，米雪尔又引用了NED的另一位元老艾伦·温斯坦的话，说NED做的很多事都是25年前CIA秘密进行的，某种意义上，NED就是CIA的前线组织，包括之前的洪都拉斯事件（军事政变），就有NED的参与。</p><p>这就解释了为什么这次发生在香港的政治风暴，会愈演愈烈，而且不断往暴力方向升级，我相信这背后有境外势力在幕后策划和煽动。</p><h3 id="04"><a href="#04" class="headerlink" title="04"></a>04</h3><p>接下来说说媒体。</p><p>在我表示要写香港话题之后，有多位香港的读者给我留言，有的甚至还特意加了我的微信，就是为了告诉我，港独真的只是一小部分人，大部分人都是支持一个中国的，他们只是不想改变现状，所以他们反对修例，至于后来发生的那些暴力冲突，并不能代表大部分香港人。</p><p>也有人很担心现在国内的舆论环境，他们害怕被大陆误解，怕香港被黑。</p><p>在这次的香港风暴中，我看到了各种各样的媒体报道，然后发现大家都是在自说自话。</p><p>比如在暴徒咬断警察手指这件事上，《纽约时报》的报道说，警官在用手指挖抗议者的眼睛时，手指被部分咬断。</p><p>这一说法既不符合法庭上辩方的说法，也不符合控方的说法，明显就是记者瞎编的。</p><p>再比如BBC，在7月20日“守护香港”的和平集会上，BBC的主持人在直播期间称现场只有几千人（主办方说有30万人），结果当场被游行群众打脸是 Fake News （假新闻）。</p><p>港媒这边也是站队明显，文汇、大公和苹果日报势同水火。</p><p>说到底，媒体终究是摆脱不了立场的影响的。</p><p>对于元朗事件，大陆和香港两边的信息是不对称的。</p><p>大陆这边，把事件定性为元朗居民用藤条教训港独分子，但很多香港人并不这么看。</p><p>有兴趣的可以去看一下香港电台《铿锵集》节目对这件事的报道，你会对这个事件又更深的了解。</p><h3 id="05"><a href="#05" class="headerlink" title="05"></a>05</h3><p>即便是有境外势力在幕后煽动，但这毕竟只是外部因素，其实事态发展成这样，内部因素才是决定性因素。</p><p>在我看来，内部因素主要在两个层面：一是香港的经济问题，二是香港民众、尤其是年轻一代的认知问题。</p><p>香港的经济问题讨论得已经很多了，所以这里不再详细展开，这里简单说一下。</p><p>1.香港的贫富分化太严重，房价又太高。</p><p>在很多人的印象中，香港非常富裕，数据似乎也证明了这一点：2018年香港人均GDP高达4.87万美元。</p><p>但事实是，香港普通人的收入其实并不高，2018年香港打工者的中位数月收入仅仅为17500港币（汇率按0.9算，相当于人民币1.57万元）。</p><p>人均GDP和居民收入之间确实会存在差距，但差那么多倍，显然是有问题的。</p><p>问题就在于香港的贫富差距实在太大。</p><p>根据IMF（国际货币基金组织）的测算，香港前十大富豪的资产加起来，占到了香港GDP比重的35%，这个贫富差距水平在全世界绝无仅有。</p><p>也就是说，香港发展的绝大多数果实，都被极少数资本家吃掉了。</p><p>相对于香港全世界第一的生活成本，以及动辄十几、二十几万一平的房价，香港普通居民的收入，实在是太低了。</p><p>2.香港的年轻人没有出路。</p><p>2017年，香港的一份报纸显示，当年六个区的高考状元，有5个人的志愿是行医。</p><p>那么还有1位状元的志愿是啥呢？</p><p>是牙医（牙医医学系是单独的）。</p><p>也就说是，6名状元，无一例外全部都打算当医生。</p><p>这其实是很可怕的一件事。</p><p>这意味着现在的香港，寒门子弟靠努力读书考取状元，最好的未来也不过是当个医生而已。</p><p>年轻人为什么没有出路？</p><p>因为香港没有抓住新兴产业的红利：</p><p>互联网时代，香港错过了；</p><p>移动互联网时代，香港又错过了；</p><p>高端制造业，香港没有。</p><p>香港的经济搞来搞去还是那老四样：</p><p>贸易及物流</p><p>金融服务</p><p>专业服务及工商业支援服务</p><p>旅游</p><p>这四大产业中，只有金融能提供高收入，但金融业能提供的就业岗位是非常少的，只占全港就业总人数的5.5%。</p><p>那么剩下的人怎么办？</p><p>说实话，没有办法。</p><p>和香港形成鲜明对比的是，华为今年开出200万年薪招聘应届博士生。</p><p>有了高端产业才会有高薪岗位，有了高薪岗位普通老百姓才能通过读书来改变命运。</p><p>香港因为没能抓住新兴产业，所以他们的年轻人看不到出路。</p><p>长此以往，老百姓对生活的不满，最终通过另一个渠道发泄出来，比如通过反对政府，甚至是使用暴力，这是香港风波的内因。</p><p>但内因并非这一项，还有香港人的认知。</p><h3 id="06"><a href="#06" class="headerlink" title="06"></a>06</h3><p>大多数香港人，在看待大陆的时候，其实是有一种高高在上的优越感的。</p><p>毕竟香港从前比大陆要富裕得多，我自己小时候也经常看TVB，那时候觉得香港真好。</p><p>但时过境迁，今天的香港正在不断丧失竞争力，尤其是在对未来产业的布局上，香港真的已经比不上一江之隔的深圳了。</p><p>今天的香港人，能够引以为傲的就是“自由、民主和法治”。</p><p>有香港读者留言和我说，不要仅仅从经济层面分析这次的风波，他们是在争取和维护民主。</p><p>但我也想提醒你们，香港恰恰也是在你们引以为傲的“自由、民主和法治”下，才沦落到今天这般田地的。</p><p>其实香港本有机会摆脱今日的困境。</p><p>站在今天回头看，香港首任特首董建华是非常具有战略眼光的。</p><p>他上任后提出了两大计划：一是“八万五”计划，二是”数码港”计划。</p><p>“数码港”计划最终被李嘉诚的儿子李泽楷搞成了房地产项目，这是香港社会最大的弊端——财阀掌控了太多的社会资源，然后他们又通过自己强大的资源把科技项目变成了房地产项目，因为房地产来钱最快。</p><p>而可悲的是，整个过程竟然都是合法的，让人不知道该怎么反对，只能任由以李嘉诚为代表的房地产商们，像蚂蟥一样趴在香港身上吸血。</p><p>相比之下，“八万五”计划本来取得了相当不错的成效，但可惜的是，最终也逃不过中途流产。</p><p>所谓的“八万五”计划，是指政府加大土地供应，确保每年兴建房屋不少于85000套，以此来解决高房价问题。</p><p>从香港1980-2018房价走势图中你可以看出，香港的房价是一路上涨的，只有1997-2003年间出现了下跌（有人说是97亚洲金融风暴的原因，这是原因之一，但不是主因，因为香港在1999年经济就已开始反弹，2000年经济增速甚至达到了惊人的7.7%，但当时房价依然在下降）。</p><p>事实证明，“八万五”计划的效果是非常显著的。</p><p>然而可悲的是，香港竟然发生了大规模的游行抗议。</p><p>而且上街的不止有房地产大佬，还有被地产大佬们鼓动的中产阶级。</p><p>这些中产阶级无法接受自己好不容易买下来的房子价格下降，他们被地产商们煽动，走上街头要求停止这项计划，否则就要董建华下台。</p><p>但他们根本就没有想明白，对于刚需来说，房价不过是一个数字而已，因为你不可能卖掉它然后露宿街头。</p><p>今天你反对房价下降，看起来是保住了自己的资产，但高房价也绑架了香港的经济，让那些地产商们赚的盆满钵满，然后垄断整个香港的资源，再然后等到你们的孩子读完书，毕了业，却发现这个社会已经没有年轻人打拼和发展的空间了。</p><p>你们用民意推倒了政府的正确决定，然后用你们自己的所作所为，把你们自己的孩子，推向了一个没有出路的未来。</p><p>这一切，都是在你们引以为傲的“自由、民主和法治”下发生的。</p><p>时至今日，这样的事还在发生。</p><p>2018年，林郑月娥公布了“明日大屿愿景”计划，希望通过填海建造人工岛屿，来新增土地建设 26-40万住宅单位，从而缓解高房价和住房紧张问题。</p><p>这一计划，依然遭到了反对。</p><p>一些英国政客，以及一些香港人，总是把香港过去取得的成就归功于“自由、民主和法治”，但他们没有意识到，香港今天的成就有很大一部分原因是抓住了历史机遇。</p><p>英国学者马丁·雅克在去年8月的一次采访中归结香港过去的成功：“香港在上世纪70年代末和1997年回归之间表现不错，那仅仅是因为它走运了。”</p><p>马丁口中的“走运”，就是我说的历史机遇，在中国大陆被全世界封锁的时候，香港是链接大陆和外部世界的唯一通道，而中国加入WTO之后，很多原本只能香港做的事，北京、上海、深圳全部都能做了，香港不再具有唯一性，“唯一通道”的红利就消失了。</p><p>反而是今天的香港，在享用着大陆源源不断地输血。</p><p>大陆在给香港供应蔬菜、水果和牛奶的时候，会把最优质的的那部分产品运往香港。</p><p>当然，你可以说这些都可以通过进口替代，但是供水和供电呢？</p><p>香港从来不需要像台湾那样担心供电不足问题，更不需要傻乎乎地打出“用爱发电”的旗号，因为大陆会把电送过去。</p><p>香港四分之一的用电来自大陆的南方电网（大亚湾核电站发电量的70%给了香港）。</p><p>香港的自然条件是养不活700万香港市民加大量的流动人口的，是大陆一直在源源不断地给香港供水，香港淡水的80%来自大陆。</p><p>如果没有大陆的供水、供电，你们的生活成本只会比现在更高。</p><p>当年英国殖民时期，香港的土地归英国皇室所有，港督全部由英国指派，回归后中央给了香港民众投票的权利，给了香港高度自治的权利，为了维护香港的言论自由，任由外国的间谍们在香港自由活动，还不让你们给中央交税。</p><p>中央真的已经很对得起香港了。</p><p>希望香港的同胞们能够正视大陆为香港的付出，也警告那一小撮要闹独立的香港年轻人：</p><p>适可而止吧<br>不要再挑衅中央的底线<br>再这么蹦跶下去<br>早晚有一天<br>现在拥有的都终将逝去<br>望港独自重</p><p>缓缓君：985高校工科男，时代华语图书签约作者。有一些故事，也有一些观点；有一点理性，也有一点温度，已出版《我就喜欢这样的你》。公众号：缓缓说（huanhuanshuo520）</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;转自微信公众号 &lt;strong&gt;缓缓君&lt;/strong&gt;&lt;a href=&quot;[https://mp.weixin.qq.com/s?__biz=MzI1NzA2NTc3MQ==&amp;mid=2669179682&amp;idx=1&amp;sn=d7927151a872cab135a0b60b3
      
    
    </summary>
    
    
      <category term="香港" scheme="https://xiliangsong.github.io/tags/%E9%A6%99%E6%B8%AF/"/>
    
  </entry>
  
  <entry>
    <title>您好！欢迎访问我的Hexo主页~</title>
    <link href="https://xiliangsong.github.io/2019/06/24/hello-world/"/>
    <id>https://xiliangsong.github.io/2019/06/24/hello-world/</id>
    <published>2019-06-24T10:08:36.511Z</published>
    <updated>2019-06-24T10:14:53.429Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
      
    
    </summary>
    
    
  </entry>
  
</feed>
